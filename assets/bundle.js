var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function r(e){return e()}function i(){return Object.create(null)}function o(e){e.forEach(r)}function a(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(e,t,n){e.$$.on_destroy.push(l(t,n))}function u(e,t,n,r){if(e){const i=d(e,t,n,r);return e[0](i)}}function d(e,t,r,i){return e[1]&&i?n(r.ctx.slice(),e[1](i(t))):r.ctx}function f(e,t,n,r,i,o,a){const s=function(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|i[r];return e}return t.dirty|i}return t.dirty}(t,r,i,o);if(s){const i=d(t,n,r,a);e.p(i,s)}}function p(t){return t&&a(t.destroy)?t.destroy:e}const h="undefined"!=typeof window;let g=h?()=>window.performance.now():()=>Date.now(),m=h?e=>requestAnimationFrame(e):e;const v=new Set;function b(e){v.forEach(t=>{t.c(e)||(v.delete(t),t.f())}),0!==v.size&&m(b)}function y(e){let t;return 0===v.size&&m(b),{promise:new Promise(n=>{v.add(t={c:e,f:n})}),abort(){v.delete(t)}}}function w(e,t){e.appendChild(t)}function x(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode.removeChild(e)}function _(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function C(e){return document.createElement(e)}function E(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function T(e){return document.createTextNode(e)}function S(){return T(" ")}function D(){return T("")}function A(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function O(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function M(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function I(e,t){e.value=null==t?"":t}function P(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function N(e,t,n){e.classList[n?"add":"remove"](t)}function L(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}class j{constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,n=null){this.e||(this.e=C(t.nodeName),this.t=t,this.h(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)x(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(k)}}const R=new Set;let B,F=0;function U(e,t,n,r,i,o,a,s=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=t+(n-t)*o(e);c+=100*e+`%{${a(r,1-r)}}\n`}const u=c+`100% {${a(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${s}`,f=e.ownerDocument;R.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(C("style")).sheet),h=f.__svelte_rules||(f.__svelte_rules={});h[d]||(h[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?g+", ":""}${d} ${r}ms linear ${i}ms 1 both`,F+=1,d}function z(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-r.length;i&&(e.style.animation=r.join(", "),F-=i,F||m(()=>{F||(R.forEach(e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}}),R.clear())}))}function H(e){const t=getComputedStyle(e);if("absolute"!==t.position&&"fixed"!==t.position){const{width:n,height:r}=t,i=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=r,function(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const r=getComputedStyle(e),i="none"===r.transform?"":r.transform;e.style.transform=`${i} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}(e,i)}}function K(e){B=e}function Y(){if(!B)throw new Error("Function called outside component initialization");return B}function q(e){Y().$$.on_mount.push(e)}function V(e){Y().$$.after_update.push(e)}function W(){const e=Y();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const i=L(t,n);r.slice().forEach(t=>{t.call(e,i)})}}}function G(e){return Y().$$.context.get(e)}function X(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}const J=[],Z=[],Q=[],ee=[],te=Promise.resolve();let ne=!1;function re(){ne||(ne=!0,te.then(le))}function ie(){return re(),te}function oe(e){Q.push(e)}let ae=!1;const se=new Set;function le(){if(!ae){ae=!0;do{for(let e=0;e<J.length;e+=1){const t=J[e];K(t),ce(t.$$)}for(K(null),J.length=0;Z.length;)Z.pop()();for(let e=0;e<Q.length;e+=1){const t=Q[e];se.has(t)||(se.add(t),t())}Q.length=0}while(J.length);for(;ee.length;)ee.pop()();ne=!1,ae=!1,se.clear()}}function ce(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(oe)}}let ue;function de(e,t,n){e.dispatchEvent(L(`${t?"intro":"outro"}${n}`))}const fe=new Set;let pe;function he(){pe={r:0,c:[],p:pe}}function ge(){pe.r||o(pe.c),pe=pe.p}function me(e,t){e&&e.i&&(fe.delete(e),e.i(t))}function ve(e,t,n,r){if(e&&e.o){if(fe.has(e))return;fe.add(e),pe.c.push(()=>{fe.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const be={duration:0};function ye(n,r,i,s){let l=r(n,i),c=s?0:1,u=null,d=null,f=null;function p(){f&&z(n,f)}function h(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function m(r){const{delay:i=0,duration:a=300,easing:s=t,tick:m=e,css:v}=l||be,b={start:g()+i,b:r};r||(b.group=pe,pe.r+=1),u||d?d=b:(v&&(p(),f=U(n,c,r,a,i,s,v)),r&&m(0,1),u=h(b,a),oe(()=>de(n,r,"start")),y(e=>{if(d&&e>d.start&&(u=h(d,a),d=null,de(n,u.b,"start"),v&&(p(),f=U(n,c,u.b,u.duration,0,s,l.css))),u)if(e>=u.end)m(c=u.b,1-c),de(n,u.b,"end"),d||(u.b?p():--u.group.r||o(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*s(t/u.duration),m(c,1-c)}return!(!u&&!d)}))}return{run(e){a(l)?(ue||(ue=Promise.resolve(),ue.then(()=>{ue=null})),ue).then(()=>{l=l(),m(e)}):m(e)},end(){p(),u=d=null}}}const we="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function xe(e,t){e.d(1),t.delete(e.key)}function ke(e,t){ve(e,1,1,()=>{t.delete(e.key)})}function _e(e,t){e.f(),ke(e,t)}function Ce(e,t,n,r,i,o,a,s,l,c,u,d){let f=e.length,p=o.length,h=f;const g={};for(;h--;)g[e[h].key]=h;const m=[],v=new Map,b=new Map;for(h=p;h--;){const e=d(i,o,h),s=n(e);let l=a.get(s);l?r&&l.p(e,t):(l=c(s,e),l.c()),v.set(s,m[h]=l),s in g&&b.set(s,Math.abs(h-g[s]))}const y=new Set,w=new Set;function x(e){me(e,1),e.m(s,u),a.set(e.key,e),u=e.first,p--}for(;f&&p;){const t=m[p-1],n=e[f-1],r=t.key,i=n.key;t===n?(u=t.first,f--,p--):v.has(i)?!a.has(r)||y.has(r)?x(t):w.has(i)?f--:b.get(r)>b.get(i)?(w.add(r),x(t)):(y.add(i),f--):(l(n,a),f--)}for(;f--;){const t=e[f];v.has(t.key)||l(t,a)}for(;p;)x(m[p-1]);return m}function Ee(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const a=e[o],s=t[o];if(s){for(const e in a)e in s||(r[e]=1);for(const e in s)i[e]||(n[e]=s[e],i[e]=1);e[o]=s}else for(const e in a)i[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function Te(e){return"object"==typeof e&&null!==e?e:{}}function Se(e){e&&e.c()}function De(e,t,n){const{fragment:i,on_mount:s,on_destroy:l,after_update:c}=e.$$;i&&i.m(t,n),oe(()=>{const t=s.map(r).filter(a);l?l.push(...t):o(t),e.$$.on_mount=[]}),c.forEach(oe)}function Ae(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Oe(t,n,r,a,s,l,c=[-1]){const u=B;K(t);const d=n.props||{},f=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:i(),dirty:c,skip_bound:!1};let p=!1;if(f.ctx=r?r(t,d,(e,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&s(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),p&&function(e,t){-1===e.$$.dirty[0]&&(J.push(e),re(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n}):[],f.update(),p=!0,o(f.before_update),f.fragment=!!a&&a(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(k)}else f.fragment&&f.fragment.c();n.intro&&me(t.$$.fragment),De(t,n.target,n.anchor),le()}K(u)}class $e{$destroy(){Ae(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Me=[];function Ie(e,t){return{subscribe:Pe(e,t).subscribe}}function Pe(t,n=e){let r;const i=[];function o(e){if(s(t,e)&&(t=e,r)){const e=!Me.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),Me.push(n,t)}if(e){for(let e=0;e<Me.length;e+=2)Me[e][0](Me[e+1]);Me.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(a,s=e){const l=[a,s];return i.push(l),1===i.length&&(r=n(o)||e),a(t),()=>{const e=i.indexOf(l);-1!==e&&i.splice(e,1),0===i.length&&(r(),r=null)}}}}function Ne(t,n,r){const i=!Array.isArray(t),s=i?[t]:t,c=n.length<2;return Ie(r,t=>{let r=!1;const u=[];let d=0,f=e;const p=()=>{if(d)return;f();const r=n(i?u[0]:u,t);c?t(r):f=a(r)?r:e},h=s.map((e,t)=>l(e,e=>{u[t]=e,d&=~(1<<t),r&&p()},()=>{d|=1<<t}));return r=!0,p(),function(){o(h),f()}})}function Le(e){let t,r,i;const o=[e[2]];var a=e[0];function s(e){let t={};for(let e=0;e<o.length;e+=1)t=n(t,o[e]);return{props:t}}return a&&(t=new a(s()),t.$on("routeEvent",e[7])),{c(){t&&Se(t.$$.fragment),r=D()},m(e,n){t&&De(t,e,n),x(e,r,n),i=!0},p(e,n){const i=4&n?Ee(o,[Te(e[2])]):{};if(a!==(a=e[0])){if(t){he();const e=t;ve(e.$$.fragment,1,0,()=>{Ae(e,1)}),ge()}a?(t=new a(s()),t.$on("routeEvent",e[7]),Se(t.$$.fragment),me(t.$$.fragment,1),De(t,r.parentNode,r)):t=null}else a&&t.$set(i)},i(e){i||(t&&me(t.$$.fragment,e),i=!0)},o(e){t&&ve(t.$$.fragment,e),i=!1},d(e){e&&k(r),t&&Ae(t,e)}}}function je(e){let t,r,i;const o=[{params:e[1]},e[2]];var a=e[0];function s(e){let t={};for(let e=0;e<o.length;e+=1)t=n(t,o[e]);return{props:t}}return a&&(t=new a(s()),t.$on("routeEvent",e[6])),{c(){t&&Se(t.$$.fragment),r=D()},m(e,n){t&&De(t,e,n),x(e,r,n),i=!0},p(e,n){const i=6&n?Ee(o,[2&n&&{params:e[1]},4&n&&Te(e[2])]):{};if(a!==(a=e[0])){if(t){he();const e=t;ve(e.$$.fragment,1,0,()=>{Ae(e,1)}),ge()}a?(t=new a(s()),t.$on("routeEvent",e[6]),Se(t.$$.fragment),me(t.$$.fragment,1),De(t,r.parentNode,r)):t=null}else a&&t.$set(i)},i(e){i||(t&&me(t.$$.fragment,e),i=!0)},o(e){t&&ve(t.$$.fragment,e),i=!1},d(e){e&&k(r),t&&Ae(t,e)}}}function Re(e){let t,n,r,i;const o=[je,Le],a=[];function s(e,t){return e[1]?0:1}return t=s(e),n=a[t]=o[t](e),{c(){n.c(),r=D()},m(e,n){a[t].m(e,n),x(e,r,n),i=!0},p(e,[i]){let l=t;t=s(e),t===l?a[t].p(e,i):(he(),ve(a[l],1,1,()=>{a[l]=null}),ge(),n=a[t],n?n.p(e,i):(n=a[t]=o[t](e),n.c()),me(n,1),n.m(r.parentNode,r))},i(e){i||(me(n),i=!0)},o(e){ve(n),i=!1},d(e){a[t].d(e),e&&k(r)}}}function Be(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let r="";return n>-1&&(r=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:r}}const Fe=Ie(null,(function(e){e(Be());const t=()=>{e(Be())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}}));Ne(Fe,e=>e.location),Ne(Fe,e=>e.querystring);async function Ue(e){if(!e||e.length<1||"/"!=e.charAt(0)&&0!==e.indexOf("#/"))throw Error("Invalid parameter location");await ie(),history.replaceState({scrollX:window.scrollX,scrollY:window.scrollY},void 0,void 0),window.location.hash=("#"==e.charAt(0)?"":"#")+e}function ze(e,t){if(!e||!e.tagName||"a"!=e.tagName.toLowerCase())throw Error('Action "link" can only be used with <a> tags');return He(e,t||e.getAttribute("href")),{update(t){He(e,t)}}}function He(e,t){if(!t||t.length<1||"/"!=t.charAt(0))throw Error('Invalid value for "href" attribute: '+t);e.setAttribute("href","#"+t),e.addEventListener("click",Ke)}function Ke(e){e.preventDefault();const t=e.currentTarget.getAttribute("href");history.replaceState({scrollX:window.scrollX,scrollY:window.scrollY},void 0,void 0),window.location.hash=t}function Ye(e,t,n){let{routes:r={}}=t,{prefix:i=""}=t,{restoreScrollState:o=!1}=t;class a{constructor(e,t){if(!t||"function"!=typeof t&&("object"!=typeof t||!0!==t._sveltesparouter))throw Error("Invalid component object");if(!e||"string"==typeof e&&(e.length<1||"/"!=e.charAt(0)&&"*"!=e.charAt(0))||"object"==typeof e&&!(e instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:n,keys:r}=function(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,i,o,a=[],s="",l=e.split("/");for(l[0]||l.shift();i=l.shift();)"*"===(n=i[0])?(a.push("wild"),s+="/(.*)"):":"===n?(r=i.indexOf("?",1),o=i.indexOf(".",1),a.push(i.substring(1,~r?r:~o?o:i.length)),s+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(s+=(~r?"?":"")+"\\"+i.substring(o))):s+="/"+i;return{keys:a,pattern:new RegExp("^"+s+(t?"(?=$|/)":"/?$"),"i")}}(e);this.path=e,"object"==typeof t&&!0===t._sveltesparouter?(this.component=t.component,this.conditions=t.conditions||[],this.userData=t.userData,this.props=t.props||{}):(this.component=()=>Promise.resolve(t),this.conditions=[],this.props={}),this._pattern=n,this._keys=r}match(e){if(i)if("string"==typeof i){if(!e.startsWith(i))return null;e=e.substr(i.length)||"/"}else if(i instanceof RegExp){const t=e.match(i);if(!t||!t[0])return null;e=e.substr(t[0].length)||"/"}const t=this._pattern.exec(e);if(null===t)return null;if(!1===this._keys)return t;const n={};let r=0;for(;r<this._keys.length;){try{n[this._keys[r]]=decodeURIComponent(t[r+1]||"")||null}catch(e){n[this._keys[r]]=null}r++}return n}async checkConditions(e){for(let t=0;t<this.conditions.length;t++)if(!await this.conditions[t](e))return!1;return!0}}const s=[];r instanceof Map?r.forEach((e,t)=>{s.push(new a(t,e))}):Object.keys(r).forEach(e=>{s.push(new a(e,r[e]))});let l=null,c=null,u={};const d=W();async function f(e,t){await ie(),d(e,t)}let p=null;o&&(window.addEventListener("popstate",e=>{p=e.state&&e.state.scrollY?e.state:null}),V(()=>{p?window.scrollTo(p.scrollX,p.scrollY):window.scrollTo(0,0)}));let h=null,g=null;return Fe.subscribe(async e=>{h=e;let t=0;for(;t<s.length;){const r=s[t].match(e.location);if(!r){t++;continue}const i={route:s[t].path,location:e.location,querystring:e.querystring,userData:s[t].userData};if(!await s[t].checkConditions(i))return n(0,l=null),g=null,void f("conditionsFailed",i);f("routeLoading",Object.assign({},i));const o=s[t].component;if(g!=o){o.loading?(n(0,l=o.loading),g=o,n(1,c=o.loadingParams),n(2,u={}),f("routeLoaded",Object.assign({},i,{component:l,name:l.name}))):(n(0,l=null),g=null);const t=await o();if(e!=h)return;n(0,l=t&&t.default||t),g=o}return r&&"object"==typeof r&&Object.keys(r).length?n(1,c=r):n(1,c=null),n(2,u=s[t].props),void f("routeLoaded",Object.assign({},i,{component:l,name:l.name}))}n(0,l=null),g=null}),e.$$set=e=>{"routes"in e&&n(3,r=e.routes),"prefix"in e&&n(4,i=e.prefix),"restoreScrollState"in e&&n(5,o=e.restoreScrollState)},e.$$.update=()=>{32&e.$$.dirty&&(history.scrollRestoration=o?"manual":"auto")},[l,c,u,r,i,o,function(t){X(e,t)},function(t){X(e,t)}]}class qe extends $e{constructor(e){super(),Oe(this,e,Ye,Re,s,{routes:3,prefix:4,restoreScrollState:5})}}function Ve(e){return e||(e=0),new Promise((function(t){return setTimeout(t,e)}))}function We(){return Math.random().toString(36).substring(2)}var Ge=0,Xe=0;function Je(){var e=(new Date).getTime();return e===Ge?1e3*e+ ++Xe:(Ge=e,Xe=0,1e3*e)}var Ze="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);var Qe={create:function(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){e.bc.postMessage(t,!1)},canBeUsed:function(){if(Ze&&"undefined"==typeof window)return!1;if("function"==typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1},type:"native",averageResponseTime:function(){return 150},microSeconds:Je},et=function(e){var t=new Set,n=new Map;this.has=t.has.bind(t),this.add=function(r){n.set(r,tt()),t.add(r),function(){var r=tt()-e,i=t[Symbol.iterator]();for(;;){var o=i.next().value;if(!o)return;if(!(n.get(o)<r))return;n.delete(o),t.delete(o)}}()},this.clear=function(){t.clear(),n.clear()}};function tt(){return(new Date).getTime()}function nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return void 0===t.webWorkerSupport&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=45e3),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&"function"==typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=12e4),void 0===t.node.useFastPath&&(t.node.useFastPath=!0),t}var rt="messages";function it(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof window){if(void 0!==window.mozIndexedDB)return window.mozIndexedDB;if(void 0!==window.webkitIndexedDB)return window.webkitIndexedDB;if(void 0!==window.msIndexedDB)return window.msIndexedDB}return!1}function ot(e,t){return function(e,t){var n=(new Date).getTime()-t,r=e.transaction(rt).objectStore(rt),i=[];return new Promise((function(e){r.openCursor().onsuccess=function(t){var r=t.target.result;if(r){var o=r.value;if(!(o.time<n))return void e(i);i.push(o),r.continue()}else e(i)}}))}(e,t).then((function(t){return Promise.all(t.map((function(t){return function(e,t){var n=e.transaction([rt],"readwrite").objectStore(rt).delete(t);return new Promise((function(e){n.onsuccess=function(){return e()}}))}(e,t.id)})))}))}function at(e){return e.closed?Promise.resolve():e.messagesCallback?(t=e.db,n=e.lastCursorId,r=t.transaction(rt).objectStore(rt),i=[],o=IDBKeyRange.bound(n+1,1/0),new Promise((function(e){r.openCursor(o).onsuccess=function(t){var n=t.target.result;n?(i.push(n.value),n.continue()):e(i)}}))).then((function(t){return t.filter((function(e){return!!e})).map((function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t})).filter((function(t){return function(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}(t,e)})).sort((function(e,t){return e.time-t.time})).forEach((function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))})),Promise.resolve()})):Promise.resolve();var t,n,r,i,o}var st={create:function(e,t){return t=nt(t),function(e){var t="pubkey.broadcast-channel-0-"+e,n=it().open(t,1);return n.onupgradeneeded=function(e){e.target.result.createObjectStore(rt,{keyPath:"id",autoIncrement:!0})},new Promise((function(e,t){n.onerror=function(e){return t(e)},n.onsuccess=function(){e(n.result)}}))}(e).then((function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:We(),eMIs:new et(2*t.idb.ttl),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},function e(t){if(t.closed)return;at(t).then((function(){return Ve(t.options.idb.fallbackInterval)})).then((function(){return e(t)}))}(r),r}))},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,at(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then((function(){return function(e,t,n){var r={uuid:t,time:(new Date).getTime(),data:n},i=e.transaction([rt],"readwrite");return new Promise((function(e,t){i.oncomplete=function(){return e()},i.onerror=function(e){return t(e)},i.objectStore(rt).add(r)}))}(e.db,e.uuid,t)})).then((function(){var t,n;0===(t=0,n=10,Math.floor(Math.random()*(n-t+1)+t))&&ot(e.db,e.options.idb.ttl)})),e.writeBlockPromise},canBeUsed:function(){return!Ze&&!!it()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:Je};function lt(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(e){}return e}function ct(e){return"pubkey.broadcastChannel-"+e}function ut(){if(Ze)return!1;var e=lt();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch(e){return!1}return!0}var dt={create:function(e,t){if(t=nt(t),!ut())throw new Error("BroadcastChannel: localstorage cannot be used");var n=We(),r=new et(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=function(e,t){var n=ct(e),r=function(e){e.key===n&&t(JSON.parse(e.newValue))};return window.addEventListener("storage",r),r}(e,(function(e){i.messagesCallback&&e.uuid!==n&&e.token&&!r.has(e.token)&&(e.data.time&&e.data.time<i.messagesCallbackTime||(r.add(e.token),i.messagesCallback(e.data)))})),i},close:function(e){var t;t=e.listener,window.removeEventListener("storage",t)},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){Ve().then((function(){var r=ct(e.channelName),i={token:We(),time:(new Date).getTime(),data:t,uuid:e.uuid},o=JSON.stringify(i);lt().setItem(r,o);var a=document.createEvent("Event");a.initEvent("storage",!0,!0),a.key=r,a.newValue=o,window.dispatchEvent(a),n()}))}))},canBeUsed:ut,type:"localstorage",averageResponseTime:function(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120},microSeconds:Je},ft=Je,pt=new Set;var ht={create:function(e){var t={name:e,messagesCallback:null};return pt.add(t),t},close:function(e){pt.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){return setTimeout((function(){Array.from(pt).filter((function(t){return t.name===e.name})).filter((function(t){return t!==e})).filter((function(e){return!!e.messagesCallback})).forEach((function(e){return e.messagesCallback(t)})),n()}),5)}))},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:ft},gt=[Qe,st,dt];if(Ze){var mt=require("../../src/methods/node.js");"function"==typeof mt.canBeUsed&&gt.push(mt)}var vt=function(e,t){var n,r,i;this.name=e,this.options=nt(t),this.method=function(e){var t=[].concat(e.methods,gt).filter(Boolean);if(e.type){if("simulate"===e.type)return ht;var n=t.find((function(t){return t.type===e.type}));if(n)return n;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||Ze||(t=t.filter((function(e){return"idb"!==e.type})));var r=t.find((function(e){return e.canBeUsed()}));if(r)return r;throw new Error("No useable methode found:"+JSON.stringify(gt.map((function(e){return e.type}))))}(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._befC=[],this._prepP=null,r=(n=this).method.create(n.name,n.options),(i=r)&&"function"==typeof i.then?(n._prepP=r,r.then((function(e){n._state=e}))):n._state=r};function bt(e,t,n){var r={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:Promise.resolve()).then((function(){return e.method.postMessage(e._state,r)}))}function yt(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function wt(e,t,n){e._addEL[t].push(n),function(e){if(!e._iL&&yt(e)){var t=function(t){e._addEL[t.type].forEach((function(e){t.time>=e.time&&e.fn(t.data)}))},n=e.method.microSeconds();e._prepP?e._prepP.then((function(){e._iL=!0,e.method.onMessage(e._state,t,n)})):(e._iL=!0,e.method.onMessage(e._state,t,n))}}(e)}function xt(e,t,n){e._addEL[t]=e._addEL[t].filter((function(e){return e!==n})),function(e){if(e._iL&&!yt(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}vt._pubkey=!0,vt.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return bt(this,"message",e)},postInternal:function(e){return bt(this,"internal",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};xt(this,"message",this._onML),e&&"function"==typeof e?(this._onML=t,wt(this,"message",t)):this._onML=null},addEventListener:function(e,t){wt(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){xt(this,e,this._addEL[e].find((function(e){return e.fn===t})))},close:function(){var e=this;if(!this.closed){this.closed=!0;var t=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],t.then((function(){return Promise.all(e._befC.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}},get type(){return this.method.type}};class kt extends $e{constructor(e){super(),Oe(this,e,null,null,s,{})}}function _t(e){const t=e-1;return t*t*t+1}function Ct(e,t,n){const r=getComputedStyle(e),i="none"===r.transform?"":r.transform,o=t.from.width/e.clientWidth,s=t.from.height/e.clientHeight,l=(t.from.left-t.to.left)/o,c=(t.from.top-t.to.top)/s,u=Math.sqrt(l*l+c*c),{delay:d=0,duration:f=(e=>120*Math.sqrt(e)),easing:p=_t}=n;return{delay:d,duration:a(f)?f(u):f,easing:p,css:(e,t)=>`transform: ${i} translate(${t*l}px, ${t*c}px);`}}function Et(e){let t,n,r,i,a;return{c(){t=C("h2"),n=C("span"),$(n,"contenteditable",""),$(n,"class","block w-full focus:bg-light-300 dark:focus:bg-dark-100 border border-transparent border-dashed break-words hover:border-light dark:hover:border-dark rounded p-1 svelte-1b19m7i"),void 0===e[1]&&oe(()=>e[11].call(n)),N(n,"truncate-3-lines",!e[2]),$(t,"class","w-full text-xl font-semibold pr-2"),$(t,"title",e[1])},m(o,s){x(o,t,s),w(t,n),void 0!==e[1]&&(n.textContent=e[1]),i||(a=[p(r=e[6].call(null,n)),A(n,"keyup",O(e[9])),A(n,"keydown",e[4]),A(n,"focus",e[3]),A(n,"blur",e[5]),A(n,"input",e[11])],i=!0)},p(e,r){2&r&&e[1]!==n.textContent&&(n.textContent=e[1]),4&r&&N(n,"truncate-3-lines",!e[2]),2&r&&$(t,"title",e[1])},d(e){e&&k(t),i=!1,o(a)}}}function Tt(e){let t,n,r,i,a;return{c(){t=C("h1"),n=C("span"),$(n,"contenteditable",""),$(n,"class","block w-full focus:bg-light-100 dark:focus:bg-dark-100 border border-transparent border-dashed break-words hover:border-light dark:hover:border-dark rounded p-1 svelte-1b19m7i"),void 0===e[1]&&oe(()=>e[10].call(n)),N(n,"truncate-2-lines",!e[2]),$(t,"class","w-full text-2xl font-semibold"),$(t,"title",e[1])},m(o,s){x(o,t,s),w(t,n),void 0!==e[1]&&(n.textContent=e[1]),i||(a=[p(r=e[6].call(null,n)),A(n,"keyup",O(e[8])),A(n,"keydown",e[4]),A(n,"focus",e[3]),A(n,"blur",e[5]),A(n,"input",e[10])],i=!0)},p(e,r){2&r&&e[1]!==n.textContent&&(n.textContent=e[1]),4&r&&N(n,"truncate-2-lines",!e[2]),2&r&&$(t,"title",e[1])},d(e){e&&k(t),i=!1,o(a)}}}function St(t){let n,r;function i(e,t){return e[0]?Tt:Et}let o=i(t),a=o(t);return{c(){n=C("div"),r=C("div"),a.c(),$(r,"class","min-w-0 editable-title"),$(n,"class","min-w-0 w-full")},m(e,t){x(e,n,t),w(n,r),a.m(r,null)},p(e,[t]){o===(o=i(e))&&a?a.p(e,t):(a.d(1),a=o(e),a&&(a.c(),a.m(r,null)))},i:e,o:e,d(e){e&&k(n),a.d()}}}function Dt(e,t,n){let{content:r}=t,{isTitle:i=!1}=t,o=r,a=!1;const s=W();return e.$$set=e=>{"content"in e&&n(7,r=e.content),"isTitle"in e&&n(0,i=e.isTitle)},e.$$.update=()=>{128&e.$$.dirty&&n(1,o=r)},[i,o,a,e=>{n(2,a=!0)},e=>{"Enter"==e.key?(e.preventDefault(),e.target.textContent&&(n(7,r=e.target.textContent),e.target.blur())):"Escape"==e.key&&e.target.blur()},e=>{n(2,a=!1),n(1,o=r),e.target.scrollTop=0,s("updateTitle",r)},e=>{const t=e=>{e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)};return e.addEventListener("paste",t),{destroy(){document.removeEventListener("paste",t)}}},r,function(t){X(e,t)},function(t){X(e,t)},function(){o=this.textContent,n(1,o),n(7,r)},function(){o=this.textContent,n(1,o),n(7,r)}]}class At extends $e{constructor(e){super(),Oe(this,e,Dt,St,s,{content:7,isTitle:0})}}function Ot(e,{delay:n=0,duration:r=400,easing:i=t}){const o=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:i,css:e=>"opacity: "+e*o}}function $t(e,{delay:t=0,duration:n=400,easing:r=_t,x:i=0,y:o=0,opacity:a=0}){const s=getComputedStyle(e),l=+s.opacity,c="none"===s.transform?"":s.transform,u=l*(1-a);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*i}px, ${(1-e)*o}px);\n\t\t\topacity: ${l-u*t}`}}function Mt(e,{delay:t=0,duration:n=400,easing:r=_t}){const i=getComputedStyle(e),o=+i.opacity,a=parseFloat(i.height),s=parseFloat(i.paddingTop),l=parseFloat(i.paddingBottom),c=parseFloat(i.marginTop),u=parseFloat(i.marginBottom),d=parseFloat(i.borderTopWidth),f=parseFloat(i.borderBottomWidth);return{delay:t,duration:n,easing:r,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*o};height: ${e*a}px;padding-top: ${e*s}px;padding-bottom: ${e*l}px;margin-top: ${e*c}px;margin-bottom: ${e*u}px;border-top-width: ${e*d}px;border-bottom-width: ${e*f}px;`}}const It=["#DC7684","#A0C1B8","#2D7F9D","#A1B6B4","#717D84","#B5A25D","#6B436E","#9A83A3","#737088","#A63D11","#E97140","#818773"];var Pt,Nt,Lt;!function(e){e[e.P1=0]="P1",e[e.P2=1]="P2",e[e.P3=2]="P3",e[e.P4=3]="P4"}(Pt||(Pt={})),function(e){e[e.RED=0]="RED",e[e.ORANGE=1]="ORANGE",e[e.YELLOW=2]="YELLOW",e[e.GREEN=3]="GREEN",e[e.TEAL=4]="TEAL",e[e.BLUE=5]="BLUE",e[e.PURPLE=6]="PURPLE"}(Nt||(Nt={})),function(e){e[e.BOARD=0]="BOARD",e[e.CARD=1]="CARD"}(Lt||(Lt={}));let jt=e=>crypto.getRandomValues(new Uint8Array(e));const Rt=new Date,Bt=Rt.getDate(),Ft=Rt.getMonth(),Ut=Rt.getFullYear(),zt=(e,t)=>{let n=new Date;return"today"===t?e<n.getTime():"tomorrow"===t&&(n.setDate(n.getDate()+1),e<n.getTime())},Ht=(e,t)=>{const n=n=>{n.composedPath().includes(e)||t()};return setTimeout(()=>{document.addEventListener("click",n)},10),{destroy(){document.removeEventListener("click",n)}}},Kt=e=>(Rt.setTime(e),Rt.getDate()===Bt&&Rt.getMonth()===Ft&&Rt.getFullYear()===Ut?Rt.toLocaleString("default",{hour:"numeric",minute:"numeric"}):Rt.getFullYear()==Ut?Rt.toLocaleString("default",{month:"short",day:"numeric"}):Rt.toLocaleString("default",{year:"numeric"})),Yt=e=>[Math.floor(e/3600),Math.floor(e/60)%60,e%=60].map(e=>e<10?"0"+e:e).filter((e,t)=>"00"!==e||t>0).join(":"),qt=e=>{let t="",n=Math.floor(e/3600),r=Math.floor(e%3600/60),i=e%60;return n&&(t+=n+"h "),r&&(t+=r+"m "),i&&(t+=i+"s"),t},Vt=((e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*t/e.length);return()=>{let o="";for(;;){let a=n(i),s=i;for(;s--;)if(o+=e[a[s]&r]||"",o.length===t)return o}}})("2346789ABCDEFGHJKLMNPQRTUVWXYZabcdefghijkmnpqrtwxyz",10,jt);function Wt(e){let t,n;return{c(){t=C("div"),n=C("div"),$(n,"class","w-6 h-2 mb-1 rounded-sm"),N(n,"bg-red-500",e[2].label==Nt.RED),N(n,"bg-orange-500",e[2].label==Nt.ORANGE),N(n,"bg-yellow-500",e[2].label==Nt.YELLOW),N(n,"bg-green-500",e[2].label==Nt.GREEN),N(n,"bg-teal-500",e[2].label==Nt.TEAL),N(n,"bg-blue-500",e[2].label==Nt.BLUE),N(n,"bg-purple-500",e[2].label==Nt.PURPLE),$(t,"class","flex justify-end")},m(e,r){x(e,t,r),w(t,n)},p(e,t){4&t&&N(n,"bg-red-500",e[2].label==Nt.RED),4&t&&N(n,"bg-orange-500",e[2].label==Nt.ORANGE),4&t&&N(n,"bg-yellow-500",e[2].label==Nt.YELLOW),4&t&&N(n,"bg-green-500",e[2].label==Nt.GREEN),4&t&&N(n,"bg-teal-500",e[2].label==Nt.TEAL),4&t&&N(n,"bg-blue-500",e[2].label==Nt.BLUE),4&t&&N(n,"bg-purple-500",e[2].label==Nt.PURPLE)},d(e){e&&k(t)}}}function Gt(e){let t,n,r,i,o,a,s=e[2].description&&Xt(),l=e[2].checklist.length&&Jt(e),c=e[2].log.length&&Zt(e),u=e[2].due&&Qt(e),d=e[2].priority in Pt&&en(e);return{c(){t=C("div"),n=C("div"),s&&s.c(),r=S(),l&&l.c(),i=S(),c&&c.c(),o=S(),u&&u.c(),a=S(),d&&d.c(),$(n,"class","flex items-center space-x-1.5"),$(t,"class","flex justify-between group mt-2 text-sm -mb-1 opacity-75")},m(e,f){x(e,t,f),w(t,n),s&&s.m(n,null),w(n,r),l&&l.m(n,null),w(n,i),c&&c.m(n,null),w(n,o),u&&u.m(n,null),w(n,a),d&&d.m(n,null)},p(e,t){e[2].description?s||(s=Xt(),s.c(),s.m(n,r)):s&&(s.d(1),s=null),e[2].checklist.length?l?l.p(e,t):(l=Jt(e),l.c(),l.m(n,i)):l&&(l.d(1),l=null),e[2].log.length?c?c.p(e,t):(c=Zt(e),c.c(),c.m(n,o)):c&&(c.d(1),c=null),e[2].due?u?u.p(e,t):(u=Qt(e),u.c(),u.m(n,a)):u&&(u.d(1),u=null),e[2].priority in Pt?d?d.p(e,t):(d=en(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},d(e){e&&k(t),s&&s.d(),l&&l.d(),c&&c.d(),u&&u.d(),d&&d.d()}}}function Xt(e){let t;return{c(){t=C("div"),t.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 10H3M21 6H3M21 14H3M17 18H3"></path></svg>',$(t,"class","py-1")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function Jt(e){let t,n,r,i,o,a,s,l,c,u,d=e[2].checklist.length+"";return{c(){t=C("div"),n=E("svg"),r=E("path"),i=E("path"),o=S(),a=C("span"),s=T(e[5]),l=T(" / "),c=T(d),$(r,"d","M22 11.08V12a10 10 0 11-5.93-9.14"),$(i,"d","M22 4L12 14.01l-3-3"),$(n,"width","20"),$(n,"height","20"),$(n,"viewBox","0 0 24 24"),$(n,"fill","none"),$(n,"stroke","currentColor"),$(n,"stroke-width","2"),$(n,"stroke-linecap","round"),$(n,"stroke-linejoin","round"),$(a,"class","ml-1"),$(t,"class",u=e[5]==e[2].checklist.length?"flex items-center rounded text-white bg-green-500 p-1":"flex items-center rounded p-1")},m(e,u){x(e,t,u),w(t,n),w(n,r),w(n,i),w(t,o),w(t,a),w(a,s),w(a,l),w(a,c)},p(e,n){32&n&&M(s,e[5]),4&n&&d!==(d=e[2].checklist.length+"")&&M(c,d),36&n&&u!==(u=e[5]==e[2].checklist.length?"flex items-center rounded text-white bg-green-500 p-1":"flex items-center rounded p-1")&&$(t,"class",u)},d(e){e&&k(t)}}}function Zt(e){let t,n,r,i,o,a,s,l,c=qt(e[6])+"";return{c(){t=C("div"),n=E("svg"),r=E("circle"),i=E("polyline"),o=E("path"),a=S(),s=C("span"),l=T(c),$(r,"cx","12"),$(r,"cy","12"),$(r,"r","7"),$(i,"points","12 9 12 12 13.5 13.5"),$(o,"d","M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83"),$(n,"width","20"),$(n,"height","20"),$(n,"viewBox","0 0 24 24"),$(n,"fill","none"),$(n,"stroke","currentColor"),$(n,"stroke-width","2"),$(n,"stroke-linecap","round"),$(n,"stroke-linejoin","round"),$(s,"class",""),$(t,"class","flex items-center rounded py-1")},m(e,c){x(e,t,c),w(t,n),w(n,r),w(n,i),w(n,o),w(t,a),w(t,s),w(s,l)},p(e,t){64&t&&c!==(c=qt(e[6])+"")&&M(l,c)},d(e){e&&k(t)}}}function Qt(e){let t,n,r,i,o,a,s,l,c=Kt(e[2].due)+"";return{c(){t=C("div"),n=E("svg"),r=E("circle"),i=E("path"),o=S(),a=C("span"),s=T(c),$(r,"cx","12"),$(r,"cy","12"),$(r,"r","10"),$(i,"d","M12 6v6l4 2"),$(n,"width","20"),$(n,"height","20"),$(n,"viewBox","0 0 24 24"),$(n,"fill","none"),$(n,"stroke","currentColor"),$(n,"stroke-width","2"),$(n,"stroke-linecap","round"),$(n,"stroke-linejoin","round"),$(a,"class","ml-1"),$(t,"class",l=e[2].isComplete?"flex items-center rounded text-white bg-green-500 p-1":zt(e[2].due,"today")?"flex items-center rounded text-white bg-red-600 p-1":zt(e[2].due,"tomorrow")?"flex items-center rounded text-white bg-orange-600 p-1":"flex items-center rounded p-1")},m(e,l){x(e,t,l),w(t,n),w(n,r),w(n,i),w(t,o),w(t,a),w(a,s)},p(e,n){4&n&&c!==(c=Kt(e[2].due)+"")&&M(s,c),4&n&&l!==(l=e[2].isComplete?"flex items-center rounded text-white bg-green-500 p-1":zt(e[2].due,"today")?"flex items-center rounded text-white bg-red-600 p-1":zt(e[2].due,"tomorrow")?"flex items-center rounded text-white bg-orange-600 p-1":"flex items-center rounded p-1")&&$(t,"class",l)},d(e){e&&k(t)}}}function en(e){let t;function n(e,t){return e[2].priority==Pt.P1?on:e[2].priority==Pt.P2?rn:e[2].priority==Pt.P3?nn:e[2].priority==Pt.P4?tn:void 0}let r=n(e),i=r&&r(e);return{c(){t=C("div"),i&&i.c(),$(t,"class","flex font-bold text-center text-white")},m(e,n){x(e,t,n),i&&i.m(t,null)},p(e,o){r!==(r=n(e))&&(i&&i.d(1),i=r&&r(e),i&&(i.c(),i.m(t,null)))},d(e){e&&k(t),i&&i.d()}}}function tn(e){let t;return{c(){t=C("span"),t.textContent="P4",$(t,"class","bg-purple-500 p-1 rounded"),$(t,"title","Low")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function nn(e){let t;return{c(){t=C("span"),t.textContent="P3",$(t,"class","bg-green-500 p-1 rounded"),$(t,"title","Normal")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function rn(e){let t;return{c(){t=C("span"),t.textContent="P2",$(t,"class","bg-orange-500 p-1 rounded"),$(t,"title","High")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function on(e){let t;return{c(){t=C("span"),t.textContent="P1",$(t,"class","bg-red-500 p-1 rounded"),$(t,"title","Urgent")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function an(e){let t,n,r,i,o,a,s,l,c=Yt(e[3])+"",u=e[4]&&sn();return{c(){t=C("div"),n=C("button"),u&&u.c(),r=S(),i=C("span"),o=T(c),$(i,"class","font-mono"),$(n,"class","flex items-center p-1 bg-indigo-500 hover:bg-indigo-600 rounded-tl-sm rounded-br-sm text-white"),$(n,"title","Start time tracking"),$(t,"class","absolute bottom-0 right-0 group-hover:block"),N(t,"hidden",!e[4])},m(c,d){x(c,t,d),w(t,n),u&&u.m(n,null),w(n,r),w(n,i),w(i,o),a=!0,s||(l=A(n,"click",e[8]),s=!0)},p(e,i){e[4]?u?16&i&&me(u,1):(u=sn(),u.c(),me(u,1),u.m(n,r)):u&&(he(),ve(u,1,1,()=>{u=null}),ge()),(!a||8&i)&&c!==(c=Yt(e[3])+"")&&M(o,c),16&i&&N(t,"hidden",!e[4])},i(e){a||(me(u),a=!0)},o(e){ve(u),a=!1},d(e){e&&k(t),u&&u.d(),s=!1,l()}}}function sn(e){let t,n,r;return{c(){t=C("div"),t.innerHTML='<span class="flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"></span> \n              <span class="relative inline-flex rounded-full h-2 w-2 bg-white"></span></span>',$(t,"class","relative ml-1 mr-1.5")},m(e,n){x(e,t,n),r=!0},i(e){r||(oe(()=>{n||(n=ye(t,$t,{x:20},!0)),n.run(1)}),r=!0)},o(e){n||(n=ye(t,$t,{x:20},!1)),n.run(0),r=!1},d(e){e&&k(t),e&&n&&n.end()}}}function ln(e){let t,n,r,i,o,a,s,l=e[2].title+"",c=null!=e[2].label&&Wt(e),u=e[7]&&Gt(e),d=e[1]&&an(e);return{c(){t=C("div"),c&&c.c(),n=S(),r=C("div"),i=T(l),o=S(),u&&u.c(),a=S(),d&&d.c(),$(r,"class","break-words truncate-3-lines"),$(t,"class","card card-label relative group cursor-pointer focus:outline-none focus:border-indigo-500 border-4 border-transparent shadow font-semibold p-2 rounded-sm"),$(t,"tabindex","0"),N(t,"border-indigo-500",e[0])},m(e,l){x(e,t,l),c&&c.m(t,null),w(t,n),w(t,r),w(r,i),w(t,o),u&&u.m(t,null),w(t,a),d&&d.m(t,null),s=!0},p(e,[r]){null!=e[2].label?c?c.p(e,r):(c=Wt(e),c.c(),c.m(t,n)):c&&(c.d(1),c=null),(!s||4&r)&&l!==(l=e[2].title+"")&&M(i,l),e[7]?u?u.p(e,r):(u=Gt(e),u.c(),u.m(t,a)):u&&(u.d(1),u=null),e[1]?d?(d.p(e,r),2&r&&me(d,1)):(d=an(e),d.c(),me(d,1),d.m(t,null)):d&&(he(),ve(d,1,1,()=>{d=null}),ge()),1&r&&N(t,"border-indigo-500",e[0])},i(e){s||(me(d),s=!0)},o(e){ve(d),s=!1},d(e){e&&k(t),c&&c.d(),u&&u.d(),d&&d.d()}}}function cn(e,t,n){let{c:r}=t,{isFocused:i=!1}=t,{isZen:o=!1}=t;const a=W();let s,l=0,c=!1;let u,d,f,p;return e.$$set=e=>{"c"in e&&n(9,r=e.c),"isFocused"in e&&n(0,i=e.isFocused),"isZen"in e&&n(1,o=e.isZen)},e.$$.update=()=>{512&e.$$.dirty&&n(2,u=r),4&e.$$.dirty&&n(5,d=u.checklist.filter(e=>e.checked).length),4&e.$$.dirty&&n(6,f=u.log.reduce((e,t)=>e+t.duration,0)),4&e.$$.dirty&&n(7,p=!!u.checklist.length||!!u.log.length||!!u.due||!!u.description||u.priority in Pt)},[i,o,u,l,c,d,f,p,e=>{e.stopPropagation(),clearInterval(s),c?(u.trackTime(l),a("trackTime",u),n(3,l=0),n(4,c=!1)):(n(4,c=!0),s=setInterval(()=>{n(3,l++,l)},1e3))},r]}class un extends $e{constructor(e){super(),Oe(this,e,cn,ln,s,{c:9,isFocused:0,isZen:1})}}function dn(e){let t,n,r,i,a,s,l,c,u,d,f,h,g,m=e[1]>0&&fn(e),v=e[2]&&pn(e);return{c(){t=C("div"),n=C("div"),r=C("div"),m&&m.c(),i=S(),v&&v.c(),a=S(),s=C("button"),s.innerHTML='<svg class="w-6 h-6 mr-1" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>',l=S(),c=C("button"),c.innerHTML='<svg class="w-6 h-6 mr-1" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>',$(s,"class","flex items-center w-full p-2 text-sm leading-5\n              hover:bg-light-200 dark:hover:bg-dark-100-50"),$(s,"role","menuitem"),$(c,"class","flex items-center w-full p-2 text-sm leading-5\n              hover:bg-light-200 dark:hover:bg-dark-100-50"),$(c,"role","menuitem"),$(r,"class","flex"),$(r,"role","menu"),$(r,"aria-orientation","horizontal"),$(r,"aria-labelledby","options-menu"),$(n,"class","rounded border border-indigo-500 bg-light-100 dark:bg-dark-200 text-light dark:text-dark shadow-xl"),$(t,"class","origin-top-right absolute right-0 w-auto z-10 rounded shadow-lg")},m(o,d){x(o,t,d),w(t,n),w(n,r),m&&m.m(r,null),w(r,i),v&&v.m(r,null),w(r,a),w(r,s),w(r,l),w(r,c),f=!0,h||(g=[A(s,"click",e[7]),A(c,"click",e[8]),p(u=e[4].call(null,t))],h=!0)},p(e,t){e[1]>0?m?m.p(e,t):(m=fn(e),m.c(),m.m(r,i)):m&&(m.d(1),m=null),e[2]?v?v.p(e,t):(v=pn(e),v.c(),v.m(r,a)):v&&(v.d(1),v=null)},i(e){f||(oe(()=>{d||(d=ye(t,Ot,{duration:150},!0)),d.run(1)}),f=!0)},o(e){d||(d=ye(t,Ot,{duration:150},!1)),d.run(0),f=!1},d(e){e&&k(t),m&&m.d(),v&&v.d(),e&&d&&d.end(),h=!1,o(g)}}}function fn(t){let n,r,i;return{c(){n=C("button"),n.innerHTML='<svg class="w-6 h-6 mr-1" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>',$(n,"class","flex items-center w-full p-2 text-sm leading-5\n              hover:bg-light-200 dark:hover:bg-dark-100-50"),$(n,"role","menuitem")},m(e,o){x(e,n,o),r||(i=A(n,"click",t[5]),r=!0)},p:e,d(e){e&&k(n),r=!1,i()}}}function pn(t){let n,r,i;return{c(){n=C("button"),n.innerHTML='<svg class="w-6 h-6 mr-1" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>',$(n,"class","flex items-center w-full p-2 text-sm leading-5\n              hover:bg-light-200 dark:hover:bg-dark-100-50"),$(n,"role","menuitem")},m(e,o){x(e,n,o),r||(i=A(n,"click",t[6]),r=!0)},p:e,d(e){e&&k(n),r=!1,i()}}}function hn(e){let t,n,r=e[0]&&dn(e);return{c(){r&&r.c(),t=D()},m(e,i){r&&r.m(e,i),x(e,t,i),n=!0},p(e,[n]){e[0]?r?(r.p(e,n),1&n&&me(r,1)):(r=dn(e),r.c(),me(r,1),r.m(t.parentNode,t)):r&&(he(),ve(r,1,1,()=>{r=null}),ge())},i(e){n||(me(r),n=!0)},o(e){ve(r),n=!1},d(e){r&&r.d(e),e&&k(t)}}}function gn(e,t,n){let{isOpen:r}=t,{index:i}=t,{hasMore:o}=t;const a=W(),s=e=>{a("emit",e)};return e.$$set=e=>{"isOpen"in e&&n(0,r=e.isOpen),"index"in e&&n(1,i=e.index),"hasMore"in e&&n(2,o=e.hasMore)},[r,i,o,s,e=>Ht(e,()=>{s("close")}),e=>s(["move",{from:i,to:i-1}]),e=>s(["move",{from:i,to:i+1}]),e=>s(["create",i]),e=>s(["delete"])]}class mn extends $e{constructor(e){super(),Oe(this,e,gn,hn,s,{isOpen:0,index:1,hasMore:2})}}var vn=function(){return(vn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function bn(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var yn=Object.keys,wn=Array.isArray,xn="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function kn(e,t){return"object"!=typeof t||yn(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||xn.Promise||(xn.Promise=Promise);var _n=Object.getPrototypeOf,Cn={}.hasOwnProperty;function En(e,t){return Cn.call(e,t)}function Tn(e,t){"function"==typeof t&&(t=t(_n(e))),yn(t).forEach((function(n){Dn(e,n,t[n])}))}var Sn=Object.defineProperty;function Dn(e,t,n,r){Sn(e,t,kn(n&&En(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function An(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Dn(e.prototype,"constructor",e),{extend:Tn.bind(null,e.prototype)}}}}var On=Object.getOwnPropertyDescriptor;function $n(e,t){var n;return On(e,t)||(n=_n(e))&&$n(n,t)}var Mn=[].slice;function In(e,t,n){return Mn.call(e,t,n)}function Pn(e,t){return t(e)}function Nn(e){if(!e)throw new Error("Assertion Failed")}function Ln(e){xn.setImmediate?setImmediate(e):setTimeout(e,0)}function jn(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function Rn(e,t){if(En(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=Rn(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return void 0===s?void 0:Rn(s,t.substr(a+1))}}function Bn(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){Nn("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)Bn(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var a=t.substr(0,o),s=t.substr(o+1);if(""===s)void 0===n?wn(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var l=e[a];l||(l=e[a]={}),Bn(l,s,n)}}else void 0===n?wn(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Fn(e,t){"string"==typeof t?Bn(e,t,void 0):"length"in t&&[].map.call(t,(function(t){Bn(e,t,void 0)}))}function Un(e){var t={};for(var n in e)En(e,n)&&(t[n]=e[n]);return t}var zn=[].concat;function Hn(e){return zn.apply([],e)}var Kn="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(Hn([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return xn[e]})),Yn=Kn.map((function(e){return xn[e]})),qn=jn(Kn,(function(e){return[e,!0]}));function Vn(e){if(!e||"object"!=typeof e)return e;var t;if(wn(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(Vn(e[n]))}else if(Yn.indexOf(e.constructor)>=0)t=e;else for(var i in t=e.constructor?Object.create(e.constructor.prototype):{},e)En(e,i)&&(t[i]=Vn(e[i]));return t}var Wn={}.toString;function Gn(e){return Wn.call(e).slice(8,-1)}var Xn=function(e,t){return"Array"===t?""+e.map((function(e){return Xn(e,Gn(e))})):"ArrayBuffer"===t?""+new Uint8Array(e):"Date"===t?e.getTime():ArrayBuffer.isView(e)?""+new Uint8Array(e.buffer):e};function Jn(e,t,n,r){return n=n||{},r=r||"",yn(e).forEach((function(i){if(En(t,i)){var o=e[i],a=t[i];if("object"==typeof o&&"object"==typeof a&&o&&a){var s=Gn(o),l=Gn(a);s===l?qn[s]?Xn(o,s)!==Xn(a,l)&&(n[r+i]=t[i]):Jn(o,a,n,r+i+"."):n[r+i]=t[i]}else o!==a&&(n[r+i]=t[i])}else n[r+i]=void 0})),yn(t).forEach((function(i){En(e,i)||(n[r+i]=t[i])})),n}var Zn="undefined"!=typeof Symbol&&Symbol.iterator,Qn=Zn?function(e){var t;return null!=e&&(t=e[Zn])&&t.apply(e)}:function(){return null},er={};function tr(e){var t,n,r,i;if(1===arguments.length){if(wn(e))return e.slice();if(this===er&&"string"==typeof e)return[e];if(i=Qn(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var nr="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},rr="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ir(e,t){rr=e,or=t}var or=function(){return!0},ar=!new Error("").stack;function sr(){if(ar)try{throw new Error}catch(e){return e}return new Error}function lr(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(or).map((function(e){return"\n"+e})).join("")):""}var cr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ur=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(cr),dr={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function fr(e,t){this._e=sr(),this.name=e,this.message=t}function pr(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function hr(e,t,n,r){this._e=sr(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=pr(e,t)}function gr(e,t){this._e=sr(),this.name="BulkError",this.failures=t,this.message=pr(e,t)}An(fr).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+lr(this._e,2))}},toString:function(){return this.name+": "+this.message}}),An(hr).from(fr),An(gr).from(fr);var mr=ur.reduce((function(e,t){return e[t]=t+"Error",e}),{}),vr=fr,br=ur.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=sr(),this.name=n,e?"string"==typeof e?(this.message=e+(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=dr[t]||n,this.inner=null)}return An(r).from(vr),e[t]=r,e}),{});br.Syntax=SyntaxError,br.Type=TypeError,br.Range=RangeError;var yr=cr.reduce((function(e,t){return e[t+"Error"]=br[t],e}),{});var wr=ur.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=br[t]),e}),{});function xr(){}function kr(e){return e}function _r(e,t){return null==e||e===kr?t:function(n){return t(e(n))}}function Cr(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Er(e,t){return e===xr?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Cr(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Cr(i,this.onerror):i),void 0!==o?o:n}}function Tr(e,t){return e===xr?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Cr(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Cr(r,this.onerror):r)}}function Sr(e,t){return e===xr?t:function(n){var r=e.apply(this,arguments);kn(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Cr(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Cr(o,this.onerror):o),void 0===r?void 0===a?void 0:a:kn(r,a)}}function Dr(e,t){return e===xr?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function Ar(e,t){return e===xr?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}wr.ModifyError=hr,wr.DexieError=fr,wr.BulkError=gr;var Or={},$r="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,e.__proto__,e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,t.__proto__,e]}(),Mr=$r[0],Ir=$r[1],Pr=$r[2],Nr=Ir&&Ir.then,Lr=Mr&&Mr.constructor,jr=!!Pr,Rr=!1,Br=Pr?function(){Pr.then(si)}:xn.setImmediate?setImmediate.bind(null,si):xn.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){si(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(si,0)},Fr=function(e,t){Gr.push([e,t]),zr&&(Br(),zr=!1)},Ur=!0,zr=!0,Hr=[],Kr=[],Yr=null,qr=kr,Vr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Mi,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{Mi(e[0],e[1])}catch(e){}}))}},Wr=Vr,Gr=[],Xr=0,Jr=[];function Zr(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=xr,this._lib=!1;var t=this._PSD=Wr;if(rr&&(this._stackHolder=sr(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==Or)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&ni(this,this._value))}this._state=null,this._value=null,++t.ref,ti(this,e)}var Qr={get:function(){var e=Wr,t=vi;function n(n,r){var i=this,o=!e.global&&(e!==Wr||t!==vi),a=o&&!xi(),s=new Zr((function(t,s){ii(i,new ei(Ai(n,e,o,a),Ai(r,e,o,a),t,s,e))}));return rr&&ai(s,this),s}return n.prototype=Or,n},set:function(e){Dn(this,"then",e&&e.prototype===Or?Qr:{get:function(){return e},set:Qr.set})}};function ei(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function ti(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&li();t&&"function"==typeof t.then?ti(e,(function(e,n){t instanceof Zr?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,ri(e)),n&&ci()}}),ni.bind(null,e))}catch(t){ni(e,t)}}function ni(e,t){if(Kr.push(t),null===e._state){var n=e._lib&&li();t=qr(t),e._state=!1,e._value=t,rr&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((function(){var n=$n(t,"stack");t._promise=e,Dn(t,"stack",{get:function(){return Rr?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){Hr.some((function(t){return t._value===e._value}))||Hr.push(e)}(e),ri(e),n&&ci()}}function ri(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)ii(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===Xr&&(++Xr,Fr((function(){0==--Xr&&ui()}),[]))}function ii(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Xr,Fr(oi,[n,e,t])}else e._listeners.push(t)}function oi(e,t,n){try{Yr=t;var r,i=t._value;t._state?r=e(i):(Kr.length&&(Kr=[]),r=e(i),-1===Kr.indexOf(i)&&function(e){var t=Hr.length;for(;t;)if(Hr[--t]._value===e._value)return void Hr.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Yr=null,0==--Xr&&ui(),--n.psd.ref||n.psd.finalize()}}function ai(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function si(){li()&&ci()}function li(){var e=Ur;return Ur=!1,zr=!1,e}function ci(){var e,t,n;do{for(;Gr.length>0;)for(e=Gr,Gr=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Gr.length>0);Ur=!0,zr=!0}function ui(){var e=Hr;Hr=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Jr.slice(0),n=t.length;n;)t[--n]()}function di(e){return new Zr(Or,!1,e)}function fi(e,t){var n=Wr;return function(){var r=li(),i=Wr;try{return Ei(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{Ei(i,!1),r&&ci()}}}Tn(Zr.prototype,{then:Qr,_then:function(e,t){ii(this,new ei(null,null,e,t,Wr))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):di(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):di(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),di(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{Rr=!0;var e=function e(t,n,r){if(n.length===r)return n;var i="";if(!1===t._state){var o,a,s=t._value;null!=s?(o=s.name||"Error",a=s.message||s,i=lr(s,0)):(o=s,a=""),n.push(o+(a?": "+a:"")+i)}rr&&((i=lr(t._stackHolder,2))&&-1===n.indexOf(i)&&n.push(i),t._prev&&e(t._prev,n,r));return n}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Rr=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Zr((function(r,i){var o=setTimeout((function(){return i(new br.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&Dn(Zr.prototype,Symbol.toStringTag,"Dexie.Promise"),Vr.env=Ti(),Tn(Zr,{all:function(){var e=tr.apply(null,arguments).map(ki);return new Zr((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,o){return Zr.resolve(i).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof Zr)return e;if(e&&"function"==typeof e.then)return new Zr((function(t,n){e.then(t,n)}));var t=new Zr(Or,!0,e);return ai(t,Yr),t},reject:di,race:function(){var e=tr.apply(null,arguments).map(ki);return new Zr((function(t,n){e.map((function(e){return Zr.resolve(e).then(t,n)}))}))},PSD:{get:function(){return Wr},set:function(e){return Wr=e}},totalEchoes:{get:function(){return vi}},newPSD:yi,usePSD:Si,scheduler:{get:function(){return Fr},set:function(e){Fr=e}},rejectionMapper:{get:function(){return qr},set:function(e){qr=e}},follow:function(e,t){return new Zr((function(n,r){return yi((function(t,n){var r=Wr;r.unhandleds=[],r.onunhandled=n,r.finalize=Cr((function(){var e=this;!function(e){function t(){e(),Jr.splice(Jr.indexOf(t),1)}Jr.push(t),++Xr,Fr((function(){0==--Xr&&ui()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),Lr&&(Lr.allSettled&&Dn(Zr,"allSettled",(function(){var e=tr.apply(null,arguments).map(ki);return new Zr((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return Zr.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),Lr.any&&"undefined"!=typeof AggregateError&&Dn(Zr,"any",(function(){var e=tr.apply(null,arguments).map(ki);return new Zr((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,o){return Zr.resolve(e).then((function(e){return t(e)}),(function(e){i[o]=e,--r||n(new AggregateError(i))}))}))}))})));var pi={awaits:0,echoes:0,id:0},hi=0,gi=[],mi=0,vi=0,bi=0;function yi(e,t,n,r){var i=Wr,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++bi;var a=Vr.env;o.env=jr?{Promise:Zr,PromiseProp:{value:Zr,configurable:!0,writable:!0},all:Zr.all,race:Zr.race,allSettled:Zr.allSettled,any:Zr.any,resolve:Zr.resolve,reject:Zr.reject,nthen:Oi(a.nthen,o),gthen:Oi(a.gthen,o)}:{},t&&kn(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=Si(o,e,n,r);return 0===o.ref&&o.finalize(),s}function wi(){return pi.id||(pi.id=++hi),++pi.awaits,pi.echoes+=100,pi.id}function xi(){return!!pi.awaits&&(0==--pi.awaits&&(pi.id=0),pi.echoes=100*pi.awaits,!0)}function ki(e){return pi.echoes&&e&&e.constructor===Lr?(wi(),e.then((function(e){return xi(),e}),(function(e){return xi(),Ii(e)}))):e}function _i(e){++vi,pi.echoes&&0!=--pi.echoes||(pi.echoes=pi.id=0),gi.push(Wr),Ei(e,!0)}function Ci(){var e=gi[gi.length-1];gi.pop(),Ei(e,!1)}function Ei(e,t){var n=Wr;if((t?!pi.echoes||mi++&&e===Wr:!mi||--mi&&e===Wr)||Di(t?_i.bind(null,e):Ci),e!==Wr&&(Wr=e,n===Vr&&(Vr.env=Ti()),jr)){var r=Vr.env.Promise,i=e.env;Ir.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(xn,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Ti(){var e=xn.Promise;return jr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(xn,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Ir.then,gthen:e.prototype.then}:{}}function Si(e,t,n,r,i){var o=Wr;try{return Ei(e,!0),t(n,r,i)}finally{Ei(o,!1)}}function Di(e){Nr.call(Mr,e)}function Ai(e,t,n,r){return"function"!=typeof e?e:function(){var i=Wr;n&&wi(),Ei(t,!0);try{return e.apply(this,arguments)}finally{Ei(i,!1),r&&Di(xi)}}}function Oi(e,t){return function(n,r){return e.call(this,Ai(n,t),Ai(r,t))}}-1===(""+Nr).indexOf("[native code]")&&(wi=xi=xr);var $i="unhandledrejection";function Mi(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(xn.document&&document.createEvent?((r=document.createEvent("Event")).initEvent($i,!0,!0),kn(r,i)):xn.CustomEvent&&kn(r=new CustomEvent($i,{detail:i}),i),r&&xn.dispatchEvent&&(dispatchEvent(r),!xn.PromiseRejectionEvent&&xn.onunhandledrejection))try{xn.onunhandledrejection(r)}catch(e){}rr&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var Ii=Zr.reject;var Pi="3.0.3",Ni=String.fromCharCode(65535),Li=-1/0,ji="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ri="String expected.",Bi=[],Fi="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ui=Fi,zi=Fi,Hi=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},Ki="__dbnames",Yi="readonly",qi="readwrite";function Vi(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Wi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Gi(e){return function(t){return void 0===Rn(t,e)&&Fn(t=Vn(t),e),t}}var Xi=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||Wr.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new br.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var a=li();try{return r&&r.db===this.db?r===Wr.trans?r._promise(e,o,n):yi((function(){return r._promise(e,o,n)}),{trans:r,transless:Wr.transless||Wr}):function e(t,n,r,i){if(t._state.openComplete||Wr.letThrough){var o=t._createTransaction(n,r,t._dbSchema);try{o.create()}catch(e){return Ii(e)}return o._promise(n,(function(e,t){return yi((function(){return Wr.trans=o,i(e,t,o)}))})).then((function(e){return o._completion.then((function(){return e}))}))}if(!t._state.isBeingOpened){if(!t._options.autoOpen)return Ii(new br.DatabaseClosed);t.open().catch(xr)}return t._state.dbReadyPromise.then((function(){return e(t,n,r,i)}))}(this.db,e,[this.name],o)}finally{a&&ci()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(wn(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=yn(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==Ni)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&rr&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var r=this.schema.idxByName,i=this.db._deps.indexedDB;function o(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}}var a=t.reduce((function(t,n){var i=t[0],a=t[1],s=r[n],l=e[n];return[i||s,i||!s?Vi(a,s&&s.multi?function(e){var t=Rn(e,n);return wn(t)&&t.some((function(e){return o(l,e)}))}:function(e){return o(l,Rn(e,n))}):a]}),[null,null]),s=a[0],l=a[1];return s?this.where(s.name).equals(e[s.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,wn(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(En(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){kn(this,e)}))},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=Gi(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})})).then((function(e){return e.numFailures?Zr.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{Bn(e,o,t)}catch(e){}return t}))},e.prototype.update=function(e,t){if("object"!=typeof t||wn(t))throw new br.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||wn(e))return this.where(":id").equals(e).modify(t);yn(t).forEach((function(n){Bn(e,n,t[n])}));var n=Rn(e,this.schema.primKey.keyPath);return void 0===n?Ii(new br.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=Gi(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?Zr.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{Bn(e,o,t)}catch(e){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Zr.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Wi})})).then((function(e){return e.numFailures?Zr.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&i)throw new br.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new br.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=s&&a?e.map(Gi(s)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:c,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures;if(0===t)return o?n:i;throw new gr(r.name+".bulkAdd(): "+t+" of "+l+" operations failed",Object.keys(a).map((function(e){return a[e]})))}))}))},e.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&i)throw new br.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new br.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=s&&a?e.map(Gi(s)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:c,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures;if(0===t)return o?n:i;throw new gr(r.name+".bulkPut(): "+t+" of "+l+" operations failed",Object.keys(a).map((function(e){return a[e]})))}))}))},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,o=e.failures;if(0===r)return i;throw new gr(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",o)}))},e}();function Ji(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(e,r,i){if("object"==typeof e)return a(e);r||(r=Dr),i||(i=xr);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function a(e){yn(e).forEach((function(t){var n=e[t];if(wn(n))o(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new br.InvalidArgument("Invalid event config");var r=o(t,kr,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){Ln((function(){e.apply(null,t)}))}))}))}}))}}function Zi(e,t){return An(t).from({prototype:e}),t}function Qi(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function eo(e,t){e.filter=Vi(e.filter,t)}function to(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Vi(r(),t())}:t,e.justLimit=n&&!r}function no(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new br.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function ro(e,t,n){var r=no(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function io(e,t,n,r){var i=e.replayFilter?Vi(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(e,n,r){if(!i||i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var a=n.primaryKey,s=""+a;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(a)),En(o,s)||(o[s]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),oo(ro(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return oo(ro(e,r,n),Vi(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function oo(e,t,n,r){var i=fi(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=xr}),(function(t){e.fail(t),n=xr}))||i(e.value,e,(function(e){return n=e})),n()}))}))}var ao=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Ii.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Ii.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Vi(t.algorithm,e)},e.prototype._iterate=function(e,t){return io(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&kn(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return io(t,e,n,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(Qi(n,!0))return r.count({trans:e,query:{index:no(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return io(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function s(e,t){var n=o(e,i),r=o(t,i);return n<r?-a:n>r?a:0}return this.toArray((function(e){return e.sort(s)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&Qi(n,!0)&&n.limit>0){var r=n.valueMapper,i=no(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var o=[];return io(n,(function(e){return o.push(e)}),e,n.table.core).then((function(){return o}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Qi(t)?to(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):to(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),to(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},e.prototype.until=function(e,t){return eo(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){var t,n;return eo(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=Vi(t.isMatch,n),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&Qi(t,!0)&&t.limit>0)return this._read((function(e){var n=no(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return eo(this._ctx,(function(e){var t=e.primaryKey.toString(),r=En(n,t);return n[t]=!0,!r})),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var i;if("function"==typeof e)i=e;else{var o=yn(e),a=o.length;i=function(t){for(var n=!1,r=0;r<a;++r){var i=o[r],s=e[i];Rn(t,i)!==s&&(Bn(t,i,s),n=!0)}return n}}var s=n.table.core,l=s.schema.primaryKey,c=l.outbound,u=l.extractKey,d="testmode"in Zo?1:2e3,f=t.db.core.cmp,p=[],h=0,g=[],m=function(e,t){var n=t.failures,r=t.numFailures;h+=e-r;for(var i=0,o=yn(n);i<o.length;i++){var a=o[i];p.push(n[a])}};return t.clone().primaryKeys().then((function(e){var t=function(n){var o=Math.min(d,e.length-n);return s.getMany({trans:r,keys:e.slice(n,n+o)}).then((function(a){for(var l=[],p=[],h=c?[]:null,g=[],v=0;v<o;++v){var b=a[v],y={value:Vn(b),primKey:e[n+v]};!1!==i.call(y,y.value,y)&&(null==y.value?g.push(e[n+v]):c||0===f(u(b),u(y.value))?(p.push(y.value),c&&h.push(e[n+v])):(g.push(e[n+v]),l.push(y.value)))}return Promise.resolve(l.length>0&&s.mutate({trans:r,type:"add",values:l}).then((function(e){for(var t in e.failures)g.splice(parseInt(t),1);m(l.length,e)}))).then((function(e){return p.length>0&&s.mutate({trans:r,type:"put",keys:h,values:p}).then((function(e){return m(p.length,e)}))})).then((function(){return g.length>0&&s.mutate({trans:r,type:"delete",keys:g}).then((function(e){return m(g.length,e)}))})).then((function(){return e.length>n+o&&t(n+d)}))}))};return t(0).then((function(){if(p.length>0)throw new hr("Error modifying one or more objects",p,h,g);return e.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return Qi(e)&&(e.isPrimKey&&!zi||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures,r=(e.lastResult,e.results,e.numFailures);if(r)throw new hr("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify((function(e,t){return t.value=null}))},e}();function so(e,t){return e<t?-1:e===t?0:1}function lo(e,t){return e>t?-1:e===t?0:1}function co(e,t,n){var r=e instanceof mo?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function uo(e){return new e.Collection(e,(function(){return go("")})).limit(0)}function fo(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,l=0;l<a;++l){var c=t[l];if(c!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[l],c)<0&&(s=l)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function po(e,t,n,r){var i,o,a,s,l,c,u,d=n.length;if(!n.every((function(e){return"string"==typeof e})))return co(e,Ri);function f(e){i=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),a="next"===e?so:lo;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),c=e,u="next"===e?"":r}f("next");var p=new e.Collection(e,(function(){return ho(s[0],l[d-1]+r)}));p._ondirectionchange=function(e){f(e)};var h=0;return p._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var f=o(i);if(t(f,l,h))return!0;for(var p=null,g=h;g<d;++g){var m=fo(i,f,s[g],l[g],a,c);null===m&&null===p?h=g+1:(null===p||a(p,m)>0)&&(p=m)}return n(null!==p?function(){e.continue(p+u)}:r),!1})),p}function ho(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function go(e){return{type:1,lower:e,upper:e}}var mo=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?uo(this):new this.Collection(this,(function(){return ho(e,t,!n,!r)}))}catch(e){return co(this,ji)}},e.prototype.equals=function(e){return null==e?co(this,ji):new this.Collection(this,(function(){return go(e)}))},e.prototype.above=function(e){return null==e?co(this,ji):new this.Collection(this,(function(){return ho(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?co(this,ji):new this.Collection(this,(function(){return ho(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?co(this,ji):new this.Collection(this,(function(){return ho(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?co(this,ji):new this.Collection(this,(function(){return ho(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!=typeof e?co(this,Ri):this.between(e,e+Ni,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):po(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Ni)},e.prototype.equalsIgnoreCase=function(e){return po(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=tr.apply(er,arguments);return 0===e.length?uo(this):po(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=tr.apply(er,arguments);return 0===e.length?uo(this):po(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Ni)},e.prototype.anyOf=function(){var e=this,t=tr.apply(er,arguments),n=this._cmp;try{t.sort(n)}catch(e){return co(this,ji)}if(0===t.length)return uo(this);var r=new this.Collection(this,(function(){return ho(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,o){for(var a=e.key;n(a,t[i])>0;)if(++i===t.length)return r(o),!1;return 0===n(a,t[i])||(r((function(){e.continue(t[i])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[Li,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=tr.apply(er,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return co(this,ji)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[Li,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,o=this._descending,a=this._min,s=this._max;if(0===e.length)return uo(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return co(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",br.InvalidArgument);var l=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;var u,d=i;function f(e,t){return d(e[0],t[0])}try{(u=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var o=e[n];if(r(t[0],o[1])<0&&r(t[1],o[0])>0){o[0]=a(o[0],t[0]),o[1]=s(o[1],t[1]);break}}return n===i&&e.push(t),e}),[])).sort(f)}catch(e){return co(this,ji)}var p=0,h=c?function(e){return i(e,u[p][1])>0}:function(e){return i(e,u[p][1])>=0},g=l?function(e){return o(e,u[p][0])>0}:function(e){return o(e,u[p][0])>=0};var m=h,v=new this.Collection(this,(function(){return ho(u[0][0],u[u.length-1][1],!l,!c)}));return v._ondirectionchange=function(e){"next"===e?(m=h,d=i):(m=g,d=o),u.sort(f)},v._addAlgorithm((function(e,t,r){for(var o=e.key;m(o);)if(++p===u.length)return t(r),!1;return!!function(e){return!h(e)&&!g(e)}(o)||(0===n._cmp(o,u[p][1])||0===n._cmp(o,u[p][0])||t((function(){d===i?e.continue(u[p][0]):e.continue(u[p][1])})),!1)})),v},e.prototype.startsWithAnyOf=function(){var e=tr.apply(er,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?uo(this):this.inAnyRange(e.map((function(e){return[e,e+Ni]}))):co(this,"startsWithAnyOf() only works with strings")},e}();function vo(e){return 1===e.length?e[0]:e}function bo(e){try{return e.only([[]]),[[]]}catch(e){return Ni}}function yo(e){return fi((function(t){return wo(t),e(t.target.error),!1}))}function wo(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var xo=function(){function e(){}return e.prototype._lock=function(){return Nn(!Wr.global),++this._reculock,1!==this._reculock||Wr.global||(Wr.lockOwnerFor=this),this},e.prototype._unlock=function(){if(Nn(!Wr.global),0==--this._reculock)for(Wr.global||(Wr.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Si(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&Wr.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(Nn(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new br.DatabaseClosed(r);case"MissingAPIError":throw new br.MissingAPI(r.message,r);default:throw new br.OpenFailed(r)}if(!this.active)throw new br.TransactionInactive;return Nn(null===this._completion._state),(e=this.idbtrans=e||n.transaction(vo(this.storeNames),this.mode)).onerror=fi((function(n){wo(n),t._reject(e.error)})),e.onabort=fi((function(n){wo(n),t.active&&t._reject(new br.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=fi((function(){t.active=!1,t._resolve()})),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Ii(new br.ReadOnly("Transaction is readonly"));if(!this.active)return Ii(new br.TransactionInactive);if(this._locked())return new Zr((function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},Wr])}));if(n)return yi((function(){var e=new Zr((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new Zr((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=Zr.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new Zr((function(e,r){n.then((function(n){return t._waitingQueue.push(fi(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(fi(r.bind(null,e)))})).finally((function(){t._waitingFor===i&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&this._reject(new br.Abort),this.active=!1},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(En(t,e))return t[e];var n=this.schema[e];if(!n)throw new br.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function ko(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+_o(t)}}function _o(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Co(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:jn(n,(function(e){return[e.name,e]}))}}function Eo(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return Rn(t,e)}}(e):function(t){return Rn(t,e)}}function To(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}function So(e){return[].slice.call(e)}var Do=0;function Ao(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function Oo(e,t,n,r){var i=t.cmp.bind(t);function o(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen;return void 0===t?void 0===r?null:n.upperBound(r,!!o):void 0===r?n.lowerBound(t,!!i):n.bound(t,r,!!i,!!o)}var a=function(e,t){var n=So(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=wn(t),i=null==t,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Eo(t)},indexes:So(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath,a={name:t,compound:wn(i),keyPath:i,unique:n,multiEntry:r,extractKey:Eo(i)};return o[Ao(i)]=a,a})),getIndexByKeyPath:function(e){return o[Ao(e)]}};return o[":id"]=a.primaryKey,null!=t&&(o[Ao(t)]=a.primaryKey),a}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),s=a.schema,l=a.hasGetAll,c=s.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(n){var r=n.trans,i=n.type,a=n.keys,s=n.values,l=n.range,c=n.wantResults;return new Promise((function(n,u){n=fi(n);var d=r.objectStore(t),f=null==d.keyPath,p="put"===i||"add"===i;if(!p&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var h=(a||s||{length:1}).length;if(a&&s&&a.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return n({numFailures:0,failures:{},results:[],lastResult:void 0});var g,m=c&&bn(a||To(e.primaryKey,{type:i,keys:a,values:s})),v=[],b=0,y=function(e){++b,wo(e),m&&(m[e.target._reqno]=void 0),v[e.target._reqno]=e.target.error},w=function(e){var t=e.target;m[t._reqno]=t.result};if("deleteRange"===i){if(4===l.type)return n({numFailures:b,failures:v,results:m,lastResult:void 0});g=3===l.type?d.clear():d.delete(o(l))}else{var x=p?f?[s,a]:[s,null]:[a,null],k=x[0],_=x[1];if(p)for(var C=0;C<h;++C)(g=_&&void 0!==_[C]?d[i](k[C],_[C]):d[i](k[C]))._reqno=C,m&&void 0===m[C]&&(g.onsuccess=w),g.onerror=y;else for(C=0;C<h;++C)(g=d[i](k[C]))._reqno=C,g.onerror=y}var E=function(e){var t=e.target.result;m&&(m[h-1]=t),n({numFailures:b,failures:v,results:m,lastResult:t})};g.onerror=function(e){y(e),E(e)},g.onsuccess=E}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,i){e=fi(e);for(var o,a=n.objectStore(t),s=r.length,l=new Array(s),c=0,u=0,d=function(t){var n=t.target;l[n._pos]=n.result,++u===c&&e(l)},f=yo(i),p=0;p<s;++p)null!=r[p]&&((o=a.get(r[p]))._pos=p,o.onsuccess=d,o.onerror=f,++c);0===c&&e(l)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,i){e=fi(e);var o=n.objectStore(t).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=yo(i)}))},query:function(e){return function(n){return new Promise((function(r,i){r=fi(r);var a=n.trans,s=n.values,l=n.limit,c=n.query,u=l===1/0?void 0:l,d=c.index,f=c.range,p=a.objectStore(t),h=d.isPrimaryKey?p:p.index(d.name),g=o(f);if(0===l)return r({result:[]});if(e){var m=s?h.getAll(g,u):h.getAllKeys(g,u);m.onsuccess=function(e){return r({result:e.target.result})},m.onerror=yo(i)}else{var v=0,b=s||!("openKeyCursor"in h)?h.openCursor(g):h.openKeyCursor(g),y=[];b.onsuccess=function(e){var t=b.result;return t?(y.push(s?t.value:t.primaryKey),++v===l?r({result:y}):void t.continue()):r({result:y})},b.onerror=yo(i)}}))}}(l),openCursor:function(e){var n=e.trans,r=e.values,i=e.query,a=e.reverse,s=e.unique;return new Promise((function(e,l){e=fi(e);var c=i.index,u=i.range,d=n.objectStore(t),f=c.isPrimaryKey?d:d.index(c.name),p=a?s?"prevunique":"prev":s?"nextunique":"next",h=r||!("openKeyCursor"in f)?f.openCursor(o(u),p):f.openKeyCursor(o(u),p);h.onerror=yo(l),h.onsuccess=fi((function(t){var r=h.result;if(r){r.___id=++Do,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var a=r.advance.bind(r),s=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=fi(l),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=fi(e),h.onerror=yo(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=s,e(t)}})),n=function(){if(h.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return h.onsuccess=fi((function(e){h.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=o,r.advance=a,n(),t},e(r)}else e(null)}),l)}))},count:function(e){var n=e.query,r=e.trans,i=n.index,a=n.range;return new Promise((function(e,n){var s=r.objectStore(t),l=i.isPrimaryKey?s:s.index(i.name),c=o(a),u=c?l.count(c):l.count();u.onsuccess=fi((function(t){return e(t.target.result)})),u.onerror=yo(n)}))}}}(e)})),u={};return c.forEach((function(e){return u[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!u[e])throw new Error("Table '"+e+"' not found");return u[e]},cmp:i,MIN_KEY:-1/0,MAX_KEY:bo(n),schema:s}}function $o(e,t,n,r){var i=n.IDBKeyRange;return{dbcore:function(e,t){return t.reduce((function(e,t){var n=t.create;return vn(vn({},e),n(e))}),e)}(Oo(t,n.indexedDB,i,r),e.dbcore)}}function Mo(e,t){var n=t.db,r=$o(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function Io(e,t,n,r){n.forEach((function(n){var i=r[n];t.forEach((function(t){var r=$n(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?Dn(t,n,{get:function(){return this.table(n)},set:function(e){Sn(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))}))}))}function Po(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function No(e,t){return e._cfg.version-t._cfg.version}function Lo(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),s=Wr.transless||Wr;yi((function(){Wr.trans=o,Wr.transless=s,0===t?(yn(i).forEach((function(e){Ro(n,e,i[e].primKey,i[e].indexes)})),Mo(e,n),Zr.follow((function(){return e.on.populate.fire(o)})).catch(a)):function(e,t,n,r){var i=[],o=e._versions,a=e._dbSchema=Fo(e,e.idbdb,r),s=!1;function l(){return i.length?Zr.resolve(i.shift()(n.idbtrans)).then(l):Zr.resolve()}return o.filter((function(e){return e._cfg.version>=t})).forEach((function(o){i.push((function(){var i=a,l=o._cfg.dbschema;Uo(e,i,r),Uo(e,l,r),a=e._dbSchema=l;var c=jo(i,l);c.add.forEach((function(e){Ro(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((function(e){if(e.recreate)throw new br.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return Bo(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),Bo(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var u=o._cfg.contentUpgrade;if(u&&o._cfg.version>t){Mo(e,r),n._memoizedTables={},s=!0;var d=Un(l);c.del.forEach((function(e){d[e]=i[e]})),Po(e,[e.Transaction.prototype]),Io(e,[e.Transaction.prototype],yn(d),d),n.schema=d;var f,p=nr(u);p&&wi();var h=Zr.follow((function(){if((f=u(n))&&p){var e=xi.bind(null,null);f.then(e,e)}}));return f&&"function"==typeof f.then?Zr.resolve(f):h.then((function(){return f}))}})),i.push((function(t){s&&Ui||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(o._cfg.dbschema,t);Po(e,[e.Transaction.prototype]),Io(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),l().then((function(){var e,t;t=r,yn(e=a).forEach((function(n){t.db.objectStoreNames.contains(n)||Ro(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,o,n).catch(a)}))}function jo(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],o=t[n];if(i){var a={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!Fi)a.recreate=!0,r.change.push(a);else{var s=i.idxByName,l=o.idxByName,c=void 0;for(c in s)l[c]||a.del.push(c);for(c in l){var u=s[c],d=l[c];u?u.src!==d.src&&a.change.push(d):a.add.push(d)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,o])}return r}function Ro(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return Bo(i,e)})),i}function Bo(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Fo(e,t,n){var r={};return In(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=t.keyPath,o=ko(_o(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),a=[],s=0;s<t.indexNames.length;++s){var l=t.index(t.indexNames[s]);i=l.keyPath;var c=ko(l.name,i,!!l.unique,!!l.multiEntry,!1,i&&"string"!=typeof i,!1);a.push(c)}r[e]=Co(e,o,a)})),r}function Uo(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var o=r[i],a=n.objectStore(o);e._hasGetAll="getAll"in a;for(var s=0;s<a.indexNames.length;++s){var l=a.indexNames[s],c=a.index(l).keyPath,u="string"==typeof c?c:"["+In(c).join("+")+"]";if(t[o]){var d=t[o].idxByName[u];d&&(d.name=l,delete t[o].idxByName[u],t[o].idxByName[l]=d)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&xn.WorkerGlobalScope&&xn instanceof xn.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}var zo,Ho=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){yn(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return ko(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),wn(r),0===t)})),i=r.shift();if(i.multi)throw new br.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new br.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new br.Schema("Index must have a name and cannot be an empty string")})),t[n]=Co(n,i,r)}}))},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?kn(this._cfg.storesSource,e):e;var n=t._versions,r={},i={};return n.forEach((function(e){kn(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,Po(t,[t._allTables,t,t.Transaction.prototype]),Io(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],yn(i),i),t._storeNames=yn(i),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=e,this},e}();function Ko(e){return yi((function(){return Wr.letThrough=!0,e()}))}function Yo(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?Ii(t.dbOpenError):e}));rr&&(t.openCanceller._stackHolder=sr()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.dbReadyResolve,i=null;return Zr.race([t.openCanceller,new Zr((function(r,o){if(!n)throw new br.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var a=e.name,s=t.autoSchema?n.open(a):n.open(a,Math.round(10*e.verno));if(!s)throw new br.MissingAPI("IndexedDB API not available");s.onerror=yo(o),s.onblocked=fi(e._fireOnBlocked),s.onupgradeneeded=fi((function(r){if(i=s.transaction,t.autoSchema&&!e._options.allowEmptyDB){s.onerror=wo,i.abort(),s.result.close();var l=n.deleteDatabase(a);l.onsuccess=l.onerror=fi((function(){o(new br.NoSuchDatabase("Database "+a+" doesnt exist"))}))}else{i.onerror=yo(o);var c=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;e.idbdb=s.result,Lo(e,c/10,i,o)}}),o),s.onsuccess=fi((function(){i=null;var n=e.idbdb=s.result,o=In(n.objectStoreNames);if(o.length>0)try{var l=n.transaction(vo(o),"readonly");t.autoSchema?function(e,t,n){e.verno=t.version/10;var r=e._dbSchema=Fo(0,t,n);e._storeNames=In(t.objectStoreNames,0),Io(e,[e._allTables],yn(r),r)}(e,n,l):(Uo(e,e._dbSchema,l),function(e,t){var n=jo(Fo(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,l)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Mo(e,l)}catch(e){}Bi.push(e),n.onversionchange=fi((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),zo.add(a),r()}),o)}))]).then((function(){return t.onReadyBeingFired=[],Zr.resolve(Ko(e.on.ready.fire)).then((function e(){if(t.onReadyBeingFired.length>0){var n=t.onReadyBeingFired.reduce(Ar,xr);return t.onReadyBeingFired=[],Zr.resolve(Ko(n)).then(e)}}))})).finally((function(){t.onReadyBeingFired=null})).then((function(){return t.isBeingOpened=!1,e})).catch((function(n){try{i&&i.abort()}catch(e){}return t.isBeingOpened=!1,e.close(),t.dbOpenError=n,Ii(t.dbOpenError)})).finally((function(){t.openComplete=!0,r()}))}function qo(e){var t=function(t){return e.next(t)},n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),o=i.value;return i.done?o:o&&"function"==typeof o.then?o.then(n,r):wn(o)?Promise.all(o).then(n,r):n(o)}}return i(t)()}function Vo(e,t,n){var r=arguments.length;if(r<2)throw new br.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=Hn(i);return[e,o,n]}function Wo(e,t,n,r,i){return Zr.resolve().then((function(){var o=Wr.transless||Wr,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:o};r?a.idbtrans=r.idbtrans:a.create();var l,c=nr(i);c&&wi();var u=Zr.follow((function(){if(l=i.call(a,a))if(c){var e=xi.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=qo(l))}),s);return(l&&"function"==typeof l.then?Zr.resolve(l).then((function(e){return a.active?e:Ii(new br.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):u.then((function(){return l}))).then((function(e){return r&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),Ii(e)}))}))}function Go(e,t,n){for(var r=wn(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Xo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return vn(vn({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function a(e,t,n){var r=Ao(e),s=i[r]=i[r]||[],l=null==e?0:"string"==typeof e?1:e.length,c=t>0,u=vn(vn({},n),{isVirtual:c,isPrimaryKey:!c&&n.isPrimaryKey,keyTail:t,keyLength:l,extractKey:Eo(e),unique:!c&&n.unique});(s.push(u),u.isPrimaryKey||o.push(u),l>1)&&a(2===l?e[0]:e.slice(0,l-1),t+1,n);return s.sort((function(e,t){return e.keyTail-t.keyTail})),u}var s=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(var l=0,c=r.indexes;l<c.length;l++){var u=c[l];a(u.keyPath,0,u)}function d(t){var n,r,i=t.query.index;return i.isVirtual?vn(vn({},t),{query:{index:i,range:(n=t.query.range,r=i.keyTail,{type:1===n.type?2:n.type,lower:Go(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:Go(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}):t}return vn(vn({},n),{schema:vn(vn({},r),{primaryKey:s,indexes:o,getIndexByKeyPath:function(e){var t=i[Ao(e)];return t&&t[0]}}),count:function(e){return n.count(d(e))},query:function(e){return n.query(d(e))},openCursor:function(t){var r=t.query.index,i=r.keyTail,o=r.isVirtual,a=r.keyLength;if(!o)return n.openCursor(t);return n.openCursor(d(t)).then((function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Go(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(Go(n.key,t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Go(t,e.MAX_KEY,i),r)}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}})}(n)}))}})}})}},Jo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return vn(vn({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return vn(vn({},n),{mutate:function(e){var i=Wr.trans,o=i.table(t).hook,a=o.deleting,s=o.creating,l=o.updating;switch(e.type){case"add":if(s.fire===xr)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"put":if(s.fire===xr&&l.fire===xr)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"delete":if(a.fire===xr)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"deleteRange":if(a.fire===xr)break;return i._promise("readwrite",(function(){return function(e){return function e(t,i,o){return n.query({trans:t,values:!1,query:{index:r,range:i},limit:o}).then((function(n){var r=n.result;return c({type:"delete",keys:r,trans:t}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):r.length<o?{failures:[],numFailures:0,lastResult:void 0}:e(t,vn(vn({},i),{lower:r[r.length-1],lowerOpen:!0}),o)}))}))}(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function c(e){var t=Wr.trans,i=e.keys||To(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?vn(vn({},e),{keys:i,wantResults:!0}):vn({},e)).type&&(e.values=bn(e.values)),e.keys&&(e.keys=bn(e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve(new Array(t.values.length)):e.getMany({trans:t.trans,keys:n})}(n,e,i).then((function(o){var c=i.map((function(n,i){var c=o[i],u={onerror:null,onsuccess:null};if("delete"===e.type)a.fire.call(u,n,c,t);else if("add"===e.type||void 0===c){var d=s.fire.call(u,n,e.values[i],t);null==n&&null!=d&&(n=d,e.keys[i]=n,r.outbound||Bn(e.values[i],r.keyPath,n))}else{var f=Jn(c,e.values[i]),p=l.fire.call(u,f,n,c,t);if(p){var h=e.values[i];Object.keys(p).forEach((function(e){En(h,e)?h[e]=p[e]:Bn(h,e,p[e])}))}}return u}));return n.mutate(e).then((function(t){for(var n=t.failures,r=t.results,a=t.numFailures,s=t.lastResult,l=0;l<i.length;++l){var u=r?r[l]:i[l],d=c[l];null==u?d.onerror&&d.onerror(n[l]):d.onsuccess&&d.onsuccess("put"===e.type&&o[l]?e.values[l]:u)}return{failures:n,results:r,numFailures:a,lastResult:s}})).catch((function(e){return c.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}}})}})}},Zo=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=vn({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var a,s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:xr,dbReadyPromise:null,cancelOpen:xr,openCanceller:null,autoSchema:!0};s.dbReadyPromise=new Zr((function(e){s.dbReadyResolve=e})),s.openCanceller=new Zr((function(e,t){s.cancelOpen=t})),this._state=s,this.name=t,this.on=Ji(this,"populate","blocked","versionchange",{ready:[Ar,xr]}),this.on.ready.subscribe=Pn(this.on.ready.subscribe,(function(t){return function(n,i){e.vip((function(){var e=r._state;if(e.openComplete)e.dbOpenError||Zr.resolve().then(n),i&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),i&&t(n);else{t(n);var o=r;i||t((function e(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(a=this,Zi(ao.prototype,(function(e,t){this.db=a;var n=Wi,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,o=i.table,s=o.hook.reading.fire;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:s!==kr?s:null}}))),this.Table=function(e){return Zi(Xi.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Ji(null,{creating:[Er,xr],reading:[_r,kr],updating:[Sr,xr],deleting:[Tr,xr]})}))}(this),this.Transaction=function(e){return Zi(xo.prototype,(function(t,n,r,i){var o=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.idbtrans=null,this.on=Ji(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Zr((function(e,t){o._resolve=e,o._reject=t})),this._completion.then((function(){o.active=!1,o.on.complete.fire()}),(function(e){var t=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort(),Ii(e)}))}))}(this),this.Version=function(e){return Zi(Ho.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Zi(mo.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var i=e._deps.indexedDB;if(!i)throw new br.MissingAPI("indexedDB API missing");this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return i.cmp(e,t)>0?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=bo(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),Bi.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Xo),this.use(Jo),o.forEach((function(e){return e(r)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new br.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new br.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(No),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this._state.openComplete||Wr.letThrough?e():new Zr((function(e,n){if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new br.DatabaseClosed);t.open().catch(xr)}t._state.dbReadyPromise.then(e,n)})).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==r?10:r,name:i}),o.sort((function(e,t){return e.level-t.level})),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},e.prototype.open=function(){return Yo(this)},e.prototype.close=function(){var e=Bi.indexOf(this),t=this._state;if(e>=0&&Bi.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}this._options.autoOpen=!1,t.dbOpenError=new br.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError),t.dbReadyPromise=new Zr((function(e){t.dbReadyResolve=e})),t.openCanceller=new Zr((function(e,n){t.cancelOpen=n}))},e.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new Zr((function(r,i){var o=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=fi((function(){zo.remove(e.name),r()})),t.onerror=yo(i),t.onblocked=e._fireOnBlocked};if(t)throw new br.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return yn(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!0,configurable:!0}),e.prototype.transaction=function(){var e=Vo.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,i=Wr.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,a,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===Yi)o=Yi;else{if("rw"!=e&&e!=qi)throw new br.InvalidArgument("Invalid transaction mode: "+e);o=qi}if(i){if(i.mode===Yi&&o===qi){if(!s)throw new br.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!s)throw new br.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),s&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,(function(t,n){n(e)})):Ii(e)}var l=Wo.bind(null,this,o,a,i,n);return i?i._promise(o,l,"lock"):Wr.trans?Si(Wr.transless,(function(){return r._whenReady(l)})):this._whenReady(l)},e.prototype.table=function(e){if(!En(this._allTables,e))throw new br.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),Qo=Zo;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
function ea(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function ta(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function na(e){return[e.schema.primKey].concat(e.schema.indexes).map((function(e){return e.src})).join(",")}function ra(e,t){return new Promise((function(n,r){var i=new FileReader;i.onabort=function(e){return r(new Error("file read aborted"))},i.onerror=function(e){return r(e.target.error)},i.onload=function(e){return n(e.target.result)},"binary"===t?i.readAsArrayBuffer(e):i.readAsText(e)}))}function ia(e,t){if("undefined"==typeof FileReaderSync)throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync;return"binary"===t?n.readAsArrayBuffer(e):n.readAsText(e)}Tn(Qo,vn(vn({},wr),{delete:function(e){return new Qo(e).delete()},exists:function(e){return new Qo(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){return zo?zo.getDatabaseNames().then(e):Zr.resolve([])},defineClass:function(){return function(e){kn(this,e)}},ignoreTransaction:function(e){return Wr.trans?Si(Wr.transless,e):e()},vip:Ko,async:function(e){return function(){try{var t=qo(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Zr.resolve(t)}catch(e){return Ii(e)}}},spawn:function(e,t,n){try{var r=qo(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Zr.resolve(r)}catch(e){return Ii(e)}},currentTransaction:{get:function(){return Wr.trans||null}},waitFor:function(e,t){var n=Zr.resolve("function"==typeof e?Qo.ignoreTransaction(e):e).timeout(t||6e4);return Wr.trans?Wr.trans.waitFor(n):n},Promise:Zr,debug:{get:function(){return rr},set:function(e){ir(e,"dexie"===e?function(){return!0}:Hi)}},derive:An,extend:kn,props:Tn,override:Pn,Events:Ji,getByKeyPath:Rn,setByKeyPath:Bn,delByKeyPath:Fn,shallowClone:Un,deepClone:Vn,getObjectDiff:Jn,asap:Ln,minKey:Li,addons:[],connections:Bi,errnames:mr,dependencies:function(){try{return{indexedDB:xn.indexedDB||xn.mozIndexedDB||xn.webkitIndexedDB||xn.msIndexedDB,IDBKeyRange:xn.IDBKeyRange||xn.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Pi,version:Pi.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)})),default:Qo,Dexie:Qo})),Qo.maxKey=bo(Qo.dependencies.IDBKeyRange),function(e){try{zo=function(e){var t,n=e&&"function"==typeof e.databases;if(!n){var r=new Zo(Ki,{addons:[]});r.version(1).stores({dbnames:"name"}),t=r.table("dbnames")}return{getDatabaseNames:function(){return n?Zr.resolve(e.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==Ki}))})):t.toCollection().primaryKeys()},add:function(e){return!n&&e!==Ki&&t.put({name:e}).catch(xr)},remove:function(e){return!n&&e!==Ki&&t.delete(e).catch(xr)}}}(e)}catch(e){}}(Zo.dependencies.indexedDB),Zr.rejectionMapper=function(e,t){if(!e||e instanceof fr||e instanceof TypeError||e instanceof SyntaxError||!e.name||!yr[e.name])return e;var n=new yr[e.name](t||e.message,e);return"stack"in e&&Dn(n,"stack",{get:function(){return this.inner.stack}}),n},ir(rr,Hi);var oa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function aa(e,t){return e(t={exports:{}},t.exports),t.exports}for(var sa=aa((function(e,t){e.exports=function(){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},r=Object.keys,i=Array.isArray,o={}.toString,a=Object.getPrototypeOf,s={}.hasOwnProperty,l=s.toString,c=["type","replaced","iterateIn","iterateUnsetNumeric"];function u(e,t){return g.isObject(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function d(e){return o.call(e).slice(8,-1)}function f(t,n){if(!t||"object"!==(void 0===t?"undefined":e(t)))return!1;var r=a(t);if(!r)return!1;var i=s.call(r,"constructor")&&r.constructor;return"function"!=typeof i?null===n:"function"==typeof i&&null!==n&&l.call(i)===l.call(n)}function p(e){return!(!e||"Object"!==d(e))&&(!a(e)||f(e,Object))}function h(t){return t&&"object"===(void 0===t?"undefined":e(t))}function g(o){var a=[],s=[],l={},d=this.types={},b=this.stringify=function(e,t,n,r){r=Object.assign({},o,r,{stringification:!0});var a=_(e,null,r);return i(a)?JSON.stringify(a[0],t,n):a.then((function(e){return JSON.stringify(e,t,n)}))};this.stringifySync=function(e,t,n,r){return b(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.stringifyAsync=function(e,t,n,r){return b(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))};var k=this.parse=function(e,t,n){return n=Object.assign({},o,n,{parse:!0}),C(JSON.parse(e,t),n)};this.parseSync=function(e,t,n){return k(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.parseAsync=function(e,t,n){return k(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))},this.specialTypeNames=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)},this.rootTypeName=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)};var _=this.encapsulate=function(u,d,m){var b=(m=Object.assign({sync:!0},o,m)).sync,y={},w=[],k=[],_=[],C=!(m&&"cyclic"in m)||m.cyclic,E=m.encapsulateObserver,T=A("",u,C,d||{},_);function S(e){var t=Object.values(y);if(m.iterateNone)return t.length?t[0]:g.getJSONType(e);if(t.length){if(m.returnTypeNames)return[].concat(n(new Set(t)));e&&p(e)&&!e.hasOwnProperty("$types")?e.$types=y:e={$:e,$types:{$:y}}}else h(e)&&e.hasOwnProperty("$types")&&(e={$:e,$types:!0});return!m.returnTypeNames&&e}return _.length?b&&m.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(function e(n,r){return Promise.all(r.map((function(e){return e[1].p}))).then((function(i){return Promise.all(i.map((function(i){var o=[],a=r.splice(0,1)[0],s=t(a,7),l=s[0],c=s[2],u=s[3],d=s[4],p=s[5],h=s[6],g=A(l,i,c,u,o,!0,h),m=f(g,x);return l&&m?g.p.then((function(t){return d[p]=t,e(n,o)})):(l?d[p]=g:n=m?g.p:g,e(n,o))})))})).then((function(){return n}))}(T,_)).then(S):!b&&m.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():m.stringification&&b?[S(T)]:b?S(T):Promise.resolve(S(T));function D(e,t,n){Object.assign(e,t);var r=c.map((function(t){var n=e[t];return delete e[t],n}));n(),c.forEach((function(t,n){e[t]=r[n]}))}function A(t,n,o,s,l,c,u){var d=void 0,h={},b=void 0===n?"undefined":e(n),_=E?function(e){var r=u||s.type||g.getJSONType(n);E(Object.assign(e||h,{keypath:t,value:n,cyclic:o,stateObj:s,promisesData:l,resolvingTypesonPromise:c,awaitingTypesonPromise:f(n,x)},void 0!==r?{type:r}:{}))}:null;if(b in{string:1,boolean:1,number:1,undefined:1})return void 0===n||"number"===b&&(isNaN(n)||n===-1/0||n===1/0)?(d=O(t,n,s,l,!1,c,_))!==n&&(h={replaced:d}):d=n,_&&_(),d;if(null===n)return _&&_(),n;if(o&&!s.iterateIn&&!s.iterateUnsetNumeric){var C=w.indexOf(n);if(!(C<0))return y[t]="#",_&&_({cyclicKeypath:k[C]}),"#"+k[C];!0===o&&(w.push(n),k.push(t))}var T=p(n),S=i(n),$=(T||S)&&(!a.length||s.replaced)||s.iterateIn?n:O(t,n,s,l,T||S,null,_),M=void 0;if($!==n?(d=$,h={replaced:$}):S||"array"===s.iterateIn?(M=new Array(n.length),h={clone:M}):T||"object"===s.iterateIn?h={clone:M={}}:""===t&&f(n,x)?(l.push([t,n,o,s,void 0,void 0,s.type]),d=n):d=n,_&&_(),m.iterateNone)return M||d;if(!M)return d;if(s.iterateIn){var I=function(e){var r={ownKeys:n.hasOwnProperty(e)};D(s,r,(function(){var r=t+(t?".":"")+v(e),i=A(r,n[e],!!o,s,l,c);f(i,x)?l.push([r,i,!!o,s,M,e,s.type]):void 0!==i&&(M[e]=i)}))};for(var P in n)I(P);_&&_({endIterateIn:!0,end:!0})}else r(n).forEach((function(e){var r=t+(t?".":"")+v(e);D(s,{ownKeys:!0},(function(){var t=A(r,n[e],!!o,s,l,c);f(t,x)?l.push([r,t,!!o,s,M,e,s.type]):void 0!==t&&(M[e]=t)}))})),_&&_({endIterateOwn:!0,end:!0});if(s.iterateUnsetNumeric){for(var N=n.length,L=function(e){if(!(e in n)){var r=t+(t?".":"")+e;D(s,{ownKeys:!1},(function(){var t=A(r,void 0,!!o,s,l,c);f(t,x)?l.push([r,t,!!o,s,M,e,s.type]):void 0!==t&&(M[e]=t)}))}},j=0;j<N;j++)L(j);_&&_({endIterateUnsetNumeric:!0,end:!0})}return M}function O(e,t,n,r,i,o,c){for(var u=i?a:s,d=u.length;d--;){var f=u[d];if(f.test(t,n)){var p=f.type;if(l[p]){var h=y[e];y[e]=h?[p].concat(h):p}return Object.assign(n,{type:p,replaced:!0}),!b&&f.replaceAsync||f.replace?(c&&c({replacing:!0}),A(e,f[b||!f.replaceAsync?"replace":"replaceAsync"](t,n),C&&"readonly",n,r,o,p)):(c&&c({typeDetected:!0}),A(e,t,C&&"readonly",n,r,o,p))}}return t}};this.encapsulateSync=function(e,t,n){return _(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.encapsulateAsync=function(e,t,n){return _(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))};var C=this.revive=function(e,n){var a=(n=Object.assign({sync:!0},o,n)).sync,s=e&&e.$types,c=!0;if(!s)return e;if(!0===s)return e.$;s.$&&p(s.$)&&(e=e.$,s=s.$,c=!1);var d=[],h={},g=function e(n,o,a,u,g,m){if(!c||"$types"!==n){var b=s[n];if(i(o)||p(o)){var x=i(o)?new Array(o.length):{};for(r(o).forEach((function(t){var r=e(n+(n?".":"")+v(t),o[t],a||x,u,x,t);f(r,w)?x[t]=void 0:void 0!==r&&(x[t]=r)})),o=x;d.length;){var k=t(d[0],4),_=k[0],C=k[1],E=k[2],T=k[3],S=y(_,C);if(f(S,w))E[T]=void 0;else{if(void 0===S)break;E[T]=S}d.splice(0,1)}}if(!b)return o;if("#"===b){var D=y(a,o.substr(1));return void 0===D&&d.push([a,o.substr(1),g,m]),D}var A=u.sync;return[].concat(b).reduce((function(e,t){var n=l[t];if(!n)throw new Error("Unregistered type: "+t);return n[A&&n.revive?"revive":!A&&n.reviveAsync?"reviveAsync":"revive"](e,h)}),o)}}("",e,null,n);return u(g=f(g,w)?void 0:g)?a&&n.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():g:!a&&n.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():a?g:Promise.resolve(g)};this.reviveSync=function(e,t){return C(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.reviveAsync=function(e,t){return C(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))},this.register=function(e,t){return t=t||{},[].concat(e).forEach((function e(n){if(i(n))return n.map(e);n&&r(n).forEach((function(e){if("#"===e)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(g.JSON_TYPES.includes(e))throw new TypeError("Plain JSON object types are reserved as type names");var r=n[e],o=r.testPlainObjects?a:s,c=o.filter((function(t){return t.type===e}));if(c.length&&(o.splice(o.indexOf(c[0]),1),delete l[e],delete d[e]),r){if("function"==typeof r){var u=r;r={test:function(e){return e&&e.constructor===u},replace:function(e){return m({},e)},revive:function(e){return m(Object.create(u.prototype),e)}}}else i(r)&&(r={test:r[0],replace:r[1],revive:r[2]});var f={type:e,test:r.test.bind(r)};r.replace&&(f.replace=r.replace.bind(r)),r.replaceAsync&&(f.replaceAsync=r.replaceAsync.bind(r));var p="number"==typeof t.fallback?t.fallback:t.fallback?0:1/0;if(r.testPlainObjects?a.splice(p,0,f):s.splice(p,0,f),r.revive||r.reviveAsync){var h={};r.revive&&(h.revive=r.revive.bind(r)),r.reviveAsync&&(h.reviveAsync=r.reviveAsync.bind(r)),l[e]=h}d[e]=r}}))})),this}}function m(e,t){return r(t).map((function(n){e[n]=t[n]})),e}function v(e){return e.replace(/~/g,"~0").replace(/\./g,"~1")}function b(e){return e.replace(/~1/g,".").replace(/~0/g,"~")}function y(e,t){if(""===t)return e;var n=t.indexOf(".");if(n>-1){var r=e[b(t.substr(0,n))];return void 0===r?void 0:y(r,t.substr(n+1))}return e[b(t)]}function w(){}function x(e){this.p=new Promise(e)}return x.prototype.then=function(e,t){var n=this;return new x((function(r,i){n.p.then((function(t){r(e?e(t):t)}),(function(e){n.p.catch((function(e){return t?t(e):Promise.reject(e)})).then(r,i)}))}))},x.prototype.catch=function(e){return this.then(null,e)},x.resolve=function(e){return new x((function(t){t(e)}))},x.reject=function(e){return new x((function(t,n){n(e)}))},["all","race"].map((function(e){x[e]=function(t){return new x((function(n,r){Promise[e](t.map((function(e){return e.p}))).then(n,r)}))}})),g.Undefined=w,g.Promise=x,g.isThenable=u,g.toStringTag=d,g.hasConstructorOf=f,g.isObject=h,g.isPlainObject=p,g.isUserObject=function e(t){if(!t||"Object"!==d(t))return!1;var n=a(t);return!n||f(t,Object)||e(n)},g.escapeKeyPathComponent=v,g.unescapeKeyPathComponent=b,g.getByKeyPath=y,g.getJSONType=function(t){return null===t?"null":i(t)?"array":void 0===t?"undefined":e(t)},g.JSON_TYPES=["null","boolean","number","string","array","object"],g}()})),la=aa((function(e,t){e.exports=function(){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},r=Object.keys,i=Array.isArray,o={}.toString,a=Object.getPrototypeOf,s={}.hasOwnProperty,l=s.toString,c=["type","replaced","iterateIn","iterateUnsetNumeric"];function u(e,t){return g.isObject(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function d(e){return o.call(e).slice(8,-1)}function f(t,n){if(!t||"object"!==(void 0===t?"undefined":e(t)))return!1;var r=a(t);if(!r)return!1;var i=s.call(r,"constructor")&&r.constructor;return"function"!=typeof i?null===n:"function"==typeof i&&null!==n&&l.call(i)===l.call(n)}function p(e){return!(!e||"Object"!==d(e))&&(!a(e)||f(e,Object))}function h(t){return t&&"object"===(void 0===t?"undefined":e(t))}function g(o){var a=[],s=[],l={},d=this.types={},b=this.stringify=function(e,t,n,r){r=Object.assign({},o,r,{stringification:!0});var a=_(e,null,r);return i(a)?JSON.stringify(a[0],t,n):a.then((function(e){return JSON.stringify(e,t,n)}))};this.stringifySync=function(e,t,n,r){return b(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.stringifyAsync=function(e,t,n,r){return b(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))};var k=this.parse=function(e,t,n){return n=Object.assign({},o,n,{parse:!0}),C(JSON.parse(e,t),n)};this.parseSync=function(e,t,n){return k(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.parseAsync=function(e,t,n){return k(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))},this.specialTypeNames=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)},this.rootTypeName=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)};var _=this.encapsulate=function(u,d,m){var b=(m=Object.assign({sync:!0},o,m)).sync,y={},w=[],k=[],_=[],C=!(m&&"cyclic"in m)||m.cyclic,E=m.encapsulateObserver,T=A("",u,C,d||{},_);function S(e){var t=Object.values(y);if(m.iterateNone)return t.length?t[0]:g.getJSONType(e);if(t.length){if(m.returnTypeNames)return[].concat(n(new Set(t)));e&&p(e)&&!e.hasOwnProperty("$types")?e.$types=y:e={$:e,$types:{$:y}}}else h(e)&&e.hasOwnProperty("$types")&&(e={$:e,$types:!0});return!m.returnTypeNames&&e}return _.length?b&&m.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(function e(n,r){return Promise.all(r.map((function(e){return e[1].p}))).then((function(i){return Promise.all(i.map((function(i){var o=[],a=r.splice(0,1)[0],s=t(a,7),l=s[0],c=s[2],u=s[3],d=s[4],p=s[5],h=s[6],g=A(l,i,c,u,o,!0,h),m=f(g,x);return l&&m?g.p.then((function(t){return d[p]=t,e(n,o)})):(l?d[p]=g:n=m?g.p:g,e(n,o))})))})).then((function(){return n}))}(T,_)).then(S):!b&&m.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():m.stringification&&b?[S(T)]:b?S(T):Promise.resolve(S(T));function D(e,t,n){Object.assign(e,t);var r=c.map((function(t){var n=e[t];return delete e[t],n}));n(),c.forEach((function(t,n){e[t]=r[n]}))}function A(t,n,o,s,l,c,u){var d=void 0,h={},b=void 0===n?"undefined":e(n),_=E?function(e){var r=u||s.type||g.getJSONType(n);E(Object.assign(e||h,{keypath:t,value:n,cyclic:o,stateObj:s,promisesData:l,resolvingTypesonPromise:c,awaitingTypesonPromise:f(n,x)},void 0!==r?{type:r}:{}))}:null;if(b in{string:1,boolean:1,number:1,undefined:1})return void 0===n||"number"===b&&(isNaN(n)||n===-1/0||n===1/0)?(d=O(t,n,s,l,!1,c,_))!==n&&(h={replaced:d}):d=n,_&&_(),d;if(null===n)return _&&_(),n;if(o&&!s.iterateIn&&!s.iterateUnsetNumeric){var C=w.indexOf(n);if(!(C<0))return y[t]="#",_&&_({cyclicKeypath:k[C]}),"#"+k[C];!0===o&&(w.push(n),k.push(t))}var T=p(n),S=i(n),$=(T||S)&&(!a.length||s.replaced)||s.iterateIn?n:O(t,n,s,l,T||S,null,_),M=void 0;if($!==n?(d=$,h={replaced:$}):S||"array"===s.iterateIn?(M=new Array(n.length),h={clone:M}):T||"object"===s.iterateIn?h={clone:M={}}:""===t&&f(n,x)?(l.push([t,n,o,s,void 0,void 0,s.type]),d=n):d=n,_&&_(),m.iterateNone)return M||d;if(!M)return d;if(s.iterateIn){var I=function(e){var r={ownKeys:n.hasOwnProperty(e)};D(s,r,(function(){var r=t+(t?".":"")+v(e),i=A(r,n[e],!!o,s,l,c);f(i,x)?l.push([r,i,!!o,s,M,e,s.type]):void 0!==i&&(M[e]=i)}))};for(var P in n)I(P);_&&_({endIterateIn:!0,end:!0})}else r(n).forEach((function(e){var r=t+(t?".":"")+v(e);D(s,{ownKeys:!0},(function(){var t=A(r,n[e],!!o,s,l,c);f(t,x)?l.push([r,t,!!o,s,M,e,s.type]):void 0!==t&&(M[e]=t)}))})),_&&_({endIterateOwn:!0,end:!0});if(s.iterateUnsetNumeric){for(var N=n.length,L=function(e){if(!(e in n)){var r=t+(t?".":"")+e;D(s,{ownKeys:!1},(function(){var t=A(r,void 0,!!o,s,l,c);f(t,x)?l.push([r,t,!!o,s,M,e,s.type]):void 0!==t&&(M[e]=t)}))}},j=0;j<N;j++)L(j);_&&_({endIterateUnsetNumeric:!0,end:!0})}return M}function O(e,t,n,r,i,o,c){for(var u=i?a:s,d=u.length;d--;){var f=u[d];if(f.test(t,n)){var p=f.type;if(l[p]){var h=y[e];y[e]=h?[p].concat(h):p}return Object.assign(n,{type:p,replaced:!0}),!b&&f.replaceAsync||f.replace?(c&&c({replacing:!0}),A(e,f[b||!f.replaceAsync?"replace":"replaceAsync"](t,n),C&&"readonly",n,r,o,p)):(c&&c({typeDetected:!0}),A(e,t,C&&"readonly",n,r,o,p))}}return t}};this.encapsulateSync=function(e,t,n){return _(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.encapsulateAsync=function(e,t,n){return _(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))};var C=this.revive=function(e,n){var a=(n=Object.assign({sync:!0},o,n)).sync,s=e&&e.$types,c=!0;if(!s)return e;if(!0===s)return e.$;s.$&&p(s.$)&&(e=e.$,s=s.$,c=!1);var d=[],h={},g=function e(n,o,a,u,g,m){if(!c||"$types"!==n){var b=s[n];if(i(o)||p(o)){var x=i(o)?new Array(o.length):{};for(r(o).forEach((function(t){var r=e(n+(n?".":"")+v(t),o[t],a||x,u,x,t);f(r,w)?x[t]=void 0:void 0!==r&&(x[t]=r)})),o=x;d.length;){var k=t(d[0],4),_=k[0],C=k[1],E=k[2],T=k[3],S=y(_,C);if(f(S,w))E[T]=void 0;else{if(void 0===S)break;E[T]=S}d.splice(0,1)}}if(!b)return o;if("#"===b){var D=y(a,o.substr(1));return void 0===D&&d.push([a,o.substr(1),g,m]),D}var A=u.sync;return[].concat(b).reduce((function(e,t){var n=l[t];if(!n)throw new Error("Unregistered type: "+t);return n[A&&n.revive?"revive":!A&&n.reviveAsync?"reviveAsync":"revive"](e,h)}),o)}}("",e,null,n);return u(g=f(g,w)?void 0:g)?a&&n.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():g:!a&&n.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():a?g:Promise.resolve(g)};this.reviveSync=function(e,t){return C(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.reviveAsync=function(e,t){return C(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))},this.register=function(e,t){return t=t||{},[].concat(e).forEach((function e(n){if(i(n))return n.map(e);n&&r(n).forEach((function(e){if("#"===e)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(g.JSON_TYPES.includes(e))throw new TypeError("Plain JSON object types are reserved as type names");var r=n[e],o=r.testPlainObjects?a:s,c=o.filter((function(t){return t.type===e}));if(c.length&&(o.splice(o.indexOf(c[0]),1),delete l[e],delete d[e]),r){if("function"==typeof r){var u=r;r={test:function(e){return e&&e.constructor===u},replace:function(e){return m({},e)},revive:function(e){return m(Object.create(u.prototype),e)}}}else i(r)&&(r={test:r[0],replace:r[1],revive:r[2]});var f={type:e,test:r.test.bind(r)};r.replace&&(f.replace=r.replace.bind(r)),r.replaceAsync&&(f.replaceAsync=r.replaceAsync.bind(r));var p="number"==typeof t.fallback?t.fallback:t.fallback?0:1/0;if(r.testPlainObjects?a.splice(p,0,f):s.splice(p,0,f),r.revive||r.reviveAsync){var h={};r.revive&&(h.revive=r.revive.bind(r)),r.reviveAsync&&(h.reviveAsync=r.reviveAsync.bind(r)),l[e]=h}d[e]=r}}))})),this}}function m(e,t){return r(t).map((function(n){e[n]=t[n]})),e}function v(e){return e.replace(/~/g,"~0").replace(/\./g,"~1")}function b(e){return e.replace(/~1/g,".").replace(/~0/g,"~")}function y(e,t){if(""===t)return e;var n=t.indexOf(".");if(n>-1){var r=e[b(t.substr(0,n))];return void 0===r?void 0:y(r,t.substr(n+1))}return e[b(t)]}function w(){}function x(e){this.p=new Promise(e)}x.prototype.then=function(e,t){var n=this;return new x((function(r,i){n.p.then((function(t){r(e?e(t):t)}),(function(e){n.p.catch((function(e){return t?t(e):Promise.reject(e)})).then(r,i)}))}))},x.prototype.catch=function(e){return this.then(null,e)},x.resolve=function(e){return new x((function(t){t(e)}))},x.reject=function(e){return new x((function(t,n){n(e)}))},["all","race"].map((function(e){x[e]=function(t){return new x((function(n,r){Promise[e](t.map((function(e){return e.p}))).then(n,r)}))}})),g.Undefined=w,g.Promise=x,g.isThenable=u,g.toStringTag=d,g.hasConstructorOf=f,g.isObject=h,g.isPlainObject=p,g.isUserObject=function e(t){if(!t||"Object"!==d(t))return!1;var n=a(t);return!n||f(t,Object)||e(n)},g.escapeKeyPathComponent=v,g.unescapeKeyPathComponent=b,g.getByKeyPath=y,g.getJSONType=function(t){return null===t?"null":i(t)?"array":void 0===t?"undefined":e(t)},g.JSON_TYPES=["null","boolean","number","string","array","object"];for(var k={userObject:{test:function(e,t){return g.isUserObject(e)},replace:function(e){return Object.assign({},e)},revive:function(e){return e}}},_=[[{sparseArrays:{testPlainObjects:!0,test:function(e){return Array.isArray(e)},replace:function(e,t){return t.iterateUnsetNumeric=!0,e}}},{sparseUndefined:{test:function(e,t){return void 0===e&&!1===t.ownKeys},replace:function(e){return null},revive:function(e){}}}],{undef:{test:function(e,t){return void 0===e&&(t.ownKeys||!("ownKeys"in t))},replace:function(e){return null},revive:function(e){return new g.Undefined}}}],C={StringObject:{test:function(t){return"String"===g.toStringTag(t)&&"object"===(void 0===t?"undefined":e(t))},replace:function(e){return String(e)},revive:function(e){return new String(e)}},BooleanObject:{test:function(t){return"Boolean"===g.toStringTag(t)&&"object"===(void 0===t?"undefined":e(t))},replace:function(e){return Boolean(e)},revive:function(e){return new Boolean(e)}},NumberObject:{test:function(t){return"Number"===g.toStringTag(t)&&"object"===(void 0===t?"undefined":e(t))},replace:function(e){return Number(e)},revive:function(e){return new Number(e)}}},E=[{nan:{test:function(e){return"number"==typeof e&&isNaN(e)},replace:function(e){return"NaN"},revive:function(e){return NaN}}},{infinity:{test:function(e){return e===1/0},replace:function(e){return"Infinity"},revive:function(e){return 1/0}}},{negativeInfinity:{test:function(e){return e===-1/0},replace:function(e){return"-Infinity"},revive:function(e){return-1/0}}}],T={date:{test:function(e){return"Date"===g.toStringTag(e)},replace:function(e){var t=e.getTime();return isNaN(t)?"NaN":t},revive:function(e){return"NaN"===e?new Date(NaN):new Date(e)}}},S={regexp:{test:function(e){return"RegExp"===g.toStringTag(e)},replace:function(e){return{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}},revive:function(e){var t=e.source,n=e.flags;return new RegExp(t,n)}}},D={map:{test:function(e){return"Map"===g.toStringTag(e)},replace:function(e){return Array.from(e.entries())},revive:function(e){return new Map(e)}}},A={set:{test:function(e){return"Set"===g.toStringTag(e)},replace:function(e){return Array.from(e.values())},revive:function(e){return new Set(e)}}},O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$=new Uint8Array(256),M=0;M<O.length;M++)$[O.charCodeAt(M)]=M;var I=function(e,t,n){for(var r=new Uint8Array(e,t,n),i=r.length,o="",a=0;a<i;a+=3)o+=O[r[a]>>2],o+=O[(3&r[a])<<4|r[a+1]>>4],o+=O[(15&r[a+1])<<2|r[a+2]>>6],o+=O[63&r[a+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},P=function(e){var t=e.length,n=.75*e.length,r=0,i=void 0,o=void 0,a=void 0,s=void 0;"="===e[e.length-1]&&(n--,"="===e[e.length-2]&&n--);for(var l=new ArrayBuffer(n),c=new Uint8Array(l),u=0;u<t;u+=4)i=$[e.charCodeAt(u)],o=$[e.charCodeAt(u+1)],a=$[e.charCodeAt(u+2)],s=$[e.charCodeAt(u+3)],c[r++]=i<<2|o>>4,c[r++]=(15&o)<<4|a>>2,c[r++]=(3&a)<<6|63&s;return l},N={arraybuffer:{test:function(e){return"ArrayBuffer"===g.toStringTag(e)},replace:function(e,t){t.buffers||(t.buffers=[]);var n=t.buffers.indexOf(e);return n>-1?{index:n}:(t.buffers.push(e),I(e))},revive:function(t,n){if(n.buffers||(n.buffers=[]),"object"===(void 0===t?"undefined":e(t)))return n.buffers[t.index];var r=P(t);return n.buffers.push(r),r}}},L="undefined"==typeof self?oa:self,j={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((function(e){var t=e,n=L[t];n&&(j[e.toLowerCase()]={test:function(e){return g.toStringTag(e)===t},replace:function(e,t){var n=e.buffer,r=e.byteOffset,i=e.length;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,length:i}:(t.buffers.push(n),{encoded:I(n),byteOffset:r,length:i})},revive:function(e,t){t.buffers||(t.buffers=[]);var r=e.byteOffset,i=e.length,o=e.encoded,a=e.index,s=void 0;return"index"in e?s=t.buffers[a]:(s=P(o),t.buffers.push(s)),new n(s,r,i)}})}));var R={dataview:{test:function(e){return"DataView"===g.toStringTag(e)},replace:function(e,t){var n=e.buffer,r=e.byteOffset,i=e.byteLength;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,byteLength:i}:(t.buffers.push(n),{encoded:I(n),byteOffset:r,byteLength:i})},revive:function(e,t){t.buffers||(t.buffers=[]);var n=e.byteOffset,r=e.byteLength,i=e.encoded,o=e.index,a=void 0;return"index"in e?a=t.buffers[o]:(a=P(i),t.buffers.push(a)),new DataView(a,n,r)}}},B={IntlCollator:{test:function(e){return g.hasConstructorOf(e,Intl.Collator)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function(e){return g.hasConstructorOf(e,Intl.DateTimeFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function(e){return g.hasConstructorOf(e,Intl.NumberFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.NumberFormat(e.locale,e)}}};function F(e){for(var t=new Uint16Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}var U={file:{test:function(e){return"File"===g.toStringTag(e)},replace:function(e){var t=new XMLHttpRequest;if(t.open("GET",URL.createObjectURL(e),!1),"undefined"!=typeof TextEncoder&&t.overrideMimeType("text/plain; charset=utf-16le"),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return t.send(),{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function(e){var t=e.name,n=e.type,r=e.stringContents,i=e.lastModified,o=F(r);return new File([o],t,{type:n,lastModified:i})},replaceAsync:function(e){return new g.Promise((function(t,n){if(e.isClosed)n(new Error("The File is closed"));else{var r=new FileReader;r.addEventListener("load",(function(){t({type:e.type,stringContents:r.result,name:e.name,lastModified:e.lastModified})})),r.addEventListener("error",(function(){n(r.error)})),r.readAsText(e,"UTF-16")}}))}}};return[k,_,C,E,T,S,{imagedata:{test:function(e){return"ImageData"===g.toStringTag(e)},replace:function(e){return{array:Array.from(e.data),width:e.width,height:e.height}},revive:function(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},{imagebitmap:{test:function(e){return"ImageBitmap"===g.toStringTag(e)||e&&e.dataset&&"ImageBitmap"===e.dataset.toStringTag},replace:function(e){var t=document.createElement("canvas");return t.getContext("2d").drawImage(e,0,0),t.toDataURL()},revive:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=document.createElement("img");return r.onload=function(){n.drawImage(r,0,0)},r.src=e,t},reviveAsync:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=document.createElement("img");return r.onload=function(){n.drawImage(r,0,0)},r.src=e,createImageBitmap(t)}}},U,{file:U.file,filelist:{test:function(e){return"FileList"===g.toStringTag(e)},replace:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e.item(n);return t},revive:function(e){function t(){this._files=arguments[0],this.length=this._files.length}return t.prototype.item=function(e){return this._files[e]},t.prototype[Symbol.toStringTag]="FileList",new t(e)}}},{blob:{test:function(e){return"Blob"===g.toStringTag(e)},replace:function(e){var t=new XMLHttpRequest;if(t.open("GET",URL.createObjectURL(e),!1),"undefined"!=typeof TextEncoder&&t.overrideMimeType("text/plain; charset=utf-16le"),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return t.send(),{type:e.type,stringContents:t.responseText}},revive:function(e){var t=e.type,n=e.stringContents;return new Blob([F(n)],{type:t})},replaceAsync:function(e){return new g.Promise((function(t,n){if(e.isClosed)n(new Error("The Blob is closed"));else{var r=new FileReader;r.addEventListener("load",(function(){t({type:e.type,stringContents:r.result})})),r.addEventListener("error",(function(){n(r.error)})),r.readAsText(e,"UTF-16")}}))}}}].concat("function"==typeof Map?D:[],"function"==typeof Set?A:[],"function"==typeof ArrayBuffer?N:[],"function"==typeof Uint8Array?j:[],"function"==typeof DataView?R:[],"undefined"!=typeof Intl?B:[])}()})),ca="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ua=new Uint8Array(256),da=0;da<ca.length;da++)ua[ca.charCodeAt(da)]=da;var fa=function(e,t,n){null==n&&(n=e.byteLength);for(var r=new Uint8Array(e,t||0,n),i=r.length,o="",a=0;a<i;a+=3)o+=ca[r[a]>>2],o+=ca[(3&r[a])<<4|r[a+1]>>4],o+=ca[(15&r[a+1])<<2|r[a+2]>>6],o+=ca[63&r[a+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},pa=function(e){var t,n,r,i,o=e.length,a=.75*e.length,s=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);for(var l=new ArrayBuffer(a),c=new Uint8Array(l),u=0;u<o;u+=4)t=ua[e.charCodeAt(u)],n=ua[e.charCodeAt(u+1)],r=ua[e.charCodeAt(u+2)],i=ua[e.charCodeAt(u+3)],c[s++]=t<<2|n>>4,c[s++]=(15&n)<<4|r>>2,c[s++]=(3&r)<<6|63&i;return l},ha="undefined"==typeof self?global:self,ga={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((function(e){var t=e,n=ha[t];n&&(ga[e.toLowerCase()+"2"]={test:function(e){return sa.toStringTag(e)===t},replace:function(e){return{buffer:e.buffer,byteOffset:e.byteOffset,length:e.length}},revive:function(e){var t=e.buffer,r=e.byteOffset,i=e.length;return new n(t,r,i)}})}));var ma={arraybuffer:{test:function(e){return"ArrayBuffer"===sa.toStringTag(e)},replace:function(e){return fa(e,0,e.byteLength)},revive:function(e){return pa(e)}}},va=(new sa).register(la),ba="FileReaderSync"in self,ya=[],wa=0;va.register([ma,ga,{blob2:{test:function(e){return"Blob"===sa.toStringTag(e)},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(ba){var t=ia(e,"binary"),n=fa(t,0,t.byteLength);return{type:e.type,data:n}}ya.push(e);var r={type:e.type,data:{start:wa,end:wa+e.size}};return console.log("b.size: "+e.size),wa+=e.size,r},finalize:function(e,t){e.data=fa(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([pa(n)],{type:t})}}}]),va.mustFinalize=function(){return ya.length>0},va.finalize=function(e){return ea(void 0,void 0,void 0,(function(){var t,n,r,i,o,a,s,l,c,u;return ta(this,(function(d){switch(d.label){case 0:return[4,ra(new Blob(ya),"binary")];case 1:if(t=d.sent(),e)for(n=0,r=e;n<r.length;n++)if((i=r[n]).$types)for(s in o=i.$types,(a=o.$)&&(o=o.$),o)l=o[s],(c=va.types[l])&&c.finalize&&(u=Zo.getByKeyPath(i,a?"$."+s:s),c.finalize(u,t.slice(u.start,u.end)));return ya=[],[2]}}))}))};function xa(e,t){return ea(this,void 0,void 0,(function(){function n(){return ea(this,void 0,void 0,(function(){var n,c,u,d,f,p,h,g,m;return ta(this,(function(v){switch(v.label){case 0:return[4,Promise.all(e.tables.map((function(e){return e.count()})))];case 1:(n=v.sent()).forEach((function(e,t){return i[t].rowCount=e})),l.totalRows=n.reduce((function(e,t){return e+t})),c=JSON.stringify(a,void 0,o?2:void 0),u=c.lastIndexOf("]"),d=c.substring(0,u),r.push(d),f=t.filter,p=function(n){var i,a,c,u,d,p,h,g,m,v,b;return ta(this,(function(y){switch(y.label){case 0:i=e.table(n),a=i.schema.primKey,c=!!a.keyPath,u=t.numRowsPerChunk||2e3,d=c?{tableName:i.name,inbound:!0,rows:[]}:{tableName:i.name,inbound:!1,rows:[]},p=JSON.stringify(d,void 0,o?2:void 0),o&&(p=p.split("\n").join("\n    ")),h=p.lastIndexOf("]"),r.push(p.substring(0,h)),g=null,m=0,v=!0,b=function(){var e,t,d,p,h,b,y,w;return ta(this,(function(x){switch(x.label){case 0:return s&&Zo.ignoreTransaction((function(){return s(l)})),[4,(e=null==g?i.limit(u):i.where(":id").above(g).limit(u)).toArray()];case 1:return 0===(t=x.sent()).length?[2,"break"]:(null!=g&&m>0&&(r.push(","),o&&r.push("\n      ")),v=t.length===u,c?(d=f?t.filter((function(e){return f(n,e)})):t,p=d.map((function(e){return va.encapsulate(e)})),va.mustFinalize()?[4,Zo.waitFor(va.finalize(p))]:[3,3]):[3,4]);case 2:x.sent(),x.label=3;case 3:return w=JSON.stringify(p,void 0,o?2:void 0),o&&(w=w.split("\n").join("\n      ")),r.push(new Blob([w.substring(1,w.length-1)])),m=d.length,g=t.length>0?Zo.getByKeyPath(t[t.length-1],a.keyPath):null,[3,8];case 4:return[4,e.primaryKeys()];case 5:return h=x.sent(),b=h.map((function(e,n){return[e,t[n]]})),f&&(b=b.filter((function(e){var t=e[0],r=e[1];return f(n,r,t)}))),y=b.map((function(e){return va.encapsulate(e)})),va.mustFinalize()?[4,Zo.waitFor(va.finalize(y))]:[3,7];case 6:x.sent(),x.label=7;case 7:w=JSON.stringify(y,void 0,o?2:void 0),o&&(w=w.split("\n").join("\n      ")),r.push(new Blob([w.substring(1,w.length-1)])),m=b.length,g=h.length>0?h[h.length-1]:null,x.label=8;case 8:return l.completedRows+=t.length,[2]}}))},y.label=1;case 1:return v?[5,b()]:[3,3];case 2:return"break"===y.sent()?[3,3]:[3,1];case 3:return r.push(p.substr(h)),l.completedTables+=1,l.completedTables<l.totalTables&&r.push(","),[2]}}))},h=0,g=i,v.label=2;case 2:return h<g.length?(m=g[h].name,[5,p(m)]):[3,5];case 3:v.sent(),v.label=4;case 4:return h++,[3,2];case 5:return r.push(c.substr(u)),l.done=!0,s&&Zo.ignoreTransaction((function(){return s(l)})),[2]}}))}))}var r,i,o,a,s,l;return ta(this,(function(c){switch(c.label){case 0:t=t||{},r=[],i=e.tables.map((function(e){return{name:e.name,schema:na(e),rowCount:0}})),o=t.prettyJson,a={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:i,data:[]}},s=t.progressCallback,l={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},c.label=1;case 1:return c.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return c.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:c.sent(),c.label=5;case 5:return[3,7];case 6:return va.finalize(),[7];case 7:return s&&Zo.ignoreTransaction((function(){return s(l)})),[2,new Blob(r,{type:"text/json"})]}}))}))}var ka=function(){},_a=aa((function(e,t){!function(e){var t="object"==typeof process&&process.env?process.env:self;e.parser=function(e){return new j(e)},e.CParser=j,e.CStream=R,e.createStream=function(e){return new R(e)},e.MAX_BUFFER_LENGTH=10485760,e.DEBUG="debug"===t.CDEBUG,e.INFO="debug"===t.CDEBUG||"info"===t.CDEBUG,e.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var n,r={textNode:void 0,numberNode:""},i=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e})),o=0;for(var a in e.STATE={BEGIN:o++,VALUE:o++,OPEN_OBJECT:o++,CLOSE_OBJECT:o++,OPEN_ARRAY:o++,CLOSE_ARRAY:o++,TEXT_ESCAPE:o++,STRING:o++,BACKSLASH:o++,END:o++,OPEN_KEY:o++,CLOSE_KEY:o++,TRUE:o++,TRUE2:o++,TRUE3:o++,FALSE:o++,FALSE2:o++,FALSE3:o++,FALSE4:o++,NULL:o++,NULL2:o++,NULL3:o++,NUMBER_DECIMAL_POINT:o++,NUMBER_DIGIT:o++},e.STATE)e.STATE[e.STATE[a]]=a;o=e.STATE;const s=9,l=10,c=13,u=32,d=34,f=43,p=44,h=45,g=46,m=48,v=57,b=58,y=69,w=91,x=92,k=93,_=97,C=98,E=101,T=102,S=108,D=110,A=114,O=115,$=116,M=117,I=123,P=125;function N(e){for(var t in r)e[t]=r[t]}Object.create||(Object.create=function(e){function t(){this.__proto__=e}return t.prototype=e,new t}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t});var L=/[\\"\n]/g;function j(t){if(!(this instanceof j))return new j(t);var n=this;N(n),n.bufferCheckPosition=e.MAX_BUFFER_LENGTH,n.q=n.c=n.p="",n.opt=t||{},n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.state=o.BEGIN,n.stack=new Array,n.position=n.column=0,n.line=1,n.slashed=!1,n.unicodeI=0,n.unicodeS=null,n.depth=0,B(n,"onready")}j.prototype={end:function(){K(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return H(n,"Cannot write after close. Assign an onready handler.");if(null===t)return K(n);var i=0,a=t.charCodeAt(0),s=n.p;e.DEBUG&&console.log("write -> ["+t+"]");for(;a&&(s=a,n.c=a=t.charCodeAt(i++),s!==a?n.p=s:s=n.p,a);)switch(e.DEBUG&&console.log(i,a,e.STATE[n.state]),n.position++,a===l?(n.line++,n.column=0):n.column++,n.state){case o.BEGIN:a===I?n.state=o.OPEN_OBJECT:a===w?n.state=o.OPEN_ARRAY:Y(a)||H(n,"Non-whitespace before {[.");continue;case o.OPEN_KEY:case o.OPEN_OBJECT:if(Y(a))continue;if(n.state===o.OPEN_KEY)n.stack.push(o.CLOSE_KEY);else{if(a===P){B(n,"onopenobject"),this.depth++,B(n,"oncloseobject"),this.depth--,n.state=n.stack.pop()||o.VALUE;continue}n.stack.push(o.CLOSE_OBJECT)}a===d?n.state=o.STRING:H(n,'Malformed object key should start with "');continue;case o.CLOSE_KEY:case o.CLOSE_OBJECT:if(Y(a))continue;n.state,o.CLOSE_KEY;a===b?(n.state===o.CLOSE_OBJECT?(n.stack.push(o.CLOSE_OBJECT),U(n,"onopenobject"),this.depth++):U(n,"onkey"),n.state=o.VALUE):a===P?(F(n,"oncloseobject"),this.depth--,n.state=n.stack.pop()||o.VALUE):a===p?(n.state===o.CLOSE_OBJECT&&n.stack.push(o.CLOSE_OBJECT),U(n),n.state=o.OPEN_KEY):H(n,"Bad object");continue;case o.OPEN_ARRAY:case o.VALUE:if(Y(a))continue;if(n.state===o.OPEN_ARRAY){if(B(n,"onopenarray"),this.depth++,n.state=o.VALUE,a===k){B(n,"onclosearray"),this.depth--,n.state=n.stack.pop()||o.VALUE;continue}n.stack.push(o.CLOSE_ARRAY)}a===d?n.state=o.STRING:a===I?n.state=o.OPEN_OBJECT:a===w?n.state=o.OPEN_ARRAY:a===$?n.state=o.TRUE:a===T?n.state=o.FALSE:a===D?n.state=o.NULL:a===h?n.numberNode+="-":m<=a&&a<=v?(n.numberNode+=String.fromCharCode(a),n.state=o.NUMBER_DIGIT):H(n,"Bad value");continue;case o.CLOSE_ARRAY:if(a===p)n.stack.push(o.CLOSE_ARRAY),U(n,"onvalue"),n.state=o.VALUE;else if(a===k)F(n,"onclosearray"),this.depth--,n.state=n.stack.pop()||o.VALUE;else{if(Y(a))continue;H(n,"Bad array")}continue;case o.STRING:void 0===n.textNode&&(n.textNode="");var c=i-1,u=n.slashed,N=n.unicodeI;e:for(;;){for(e.DEBUG&&console.log(i,a,e.STATE[n.state],u);N>0;)if(n.unicodeS+=String.fromCharCode(a),a=t.charCodeAt(i++),n.position++,4===N?(n.textNode+=String.fromCharCode(parseInt(n.unicodeS,16)),N=0,c=i-1):N++,!a)break e;if(a===d&&!u){n.state=n.stack.pop()||o.VALUE,n.textNode+=t.substring(c,i-1),n.position+=i-1-c;break}if(a===x&&!u&&(u=!0,n.textNode+=t.substring(c,i-1),n.position+=i-1-c,a=t.charCodeAt(i++),n.position++,!a))break;if(u){if(u=!1,a===D?n.textNode+="\n":a===A?n.textNode+="\r":a===$?n.textNode+="\t":a===T?n.textNode+="\f":a===C?n.textNode+="\b":a===M?(N=1,n.unicodeS=""):n.textNode+=String.fromCharCode(a),a=t.charCodeAt(i++),n.position++,c=i-1,a)continue;break}L.lastIndex=i;var j=L.exec(t);if(null===j){i=t.length+1,n.textNode+=t.substring(c,i-1),n.position+=i-1-c;break}if(i=j.index+1,!(a=t.charCodeAt(j.index))){n.textNode+=t.substring(c,i-1),n.position+=i-1-c;break}}n.slashed=u,n.unicodeI=N;continue;case o.TRUE:a===A?n.state=o.TRUE2:H(n,"Invalid true started with t"+a);continue;case o.TRUE2:a===M?n.state=o.TRUE3:H(n,"Invalid true started with tr"+a);continue;case o.TRUE3:a===E?(B(n,"onvalue",!0),n.state=n.stack.pop()||o.VALUE):H(n,"Invalid true started with tru"+a);continue;case o.FALSE:a===_?n.state=o.FALSE2:H(n,"Invalid false started with f"+a);continue;case o.FALSE2:a===S?n.state=o.FALSE3:H(n,"Invalid false started with fa"+a);continue;case o.FALSE3:a===O?n.state=o.FALSE4:H(n,"Invalid false started with fal"+a);continue;case o.FALSE4:a===E?(B(n,"onvalue",!1),n.state=n.stack.pop()||o.VALUE):H(n,"Invalid false started with fals"+a);continue;case o.NULL:a===M?n.state=o.NULL2:H(n,"Invalid null started with n"+a);continue;case o.NULL2:a===S?n.state=o.NULL3:H(n,"Invalid null started with nu"+a);continue;case o.NULL3:a===S?(B(n,"onvalue",null),n.state=n.stack.pop()||o.VALUE):H(n,"Invalid null started with nul"+a);continue;case o.NUMBER_DECIMAL_POINT:a===g?(n.numberNode+=".",n.state=o.NUMBER_DIGIT):H(n,"Leading zero not followed by .");continue;case o.NUMBER_DIGIT:m<=a&&a<=v?n.numberNode+=String.fromCharCode(a):a===g?(-1!==n.numberNode.indexOf(".")&&H(n,"Invalid number has two dots"),n.numberNode+="."):a===E||a===y?(-1===n.numberNode.indexOf("e")&&-1===n.numberNode.indexOf("E")||H(n,"Invalid number has two exponential"),n.numberNode+="e"):a===f||a===h?(s!==E&&s!==y&&H(n,"Invalid symbol in number"),n.numberNode+=String.fromCharCode(a)):(z(n),i--,n.state=n.stack.pop()||o.VALUE);continue;default:H(n,"Unknown state: "+n.state)}n.position>=n.bufferCheckPosition&&function(t){var n=Math.max(e.MAX_BUFFER_LENGTH,10),i=0;for(var o in r){var a=void 0===t[o]?0:t[o].length;if(a>n)switch(o){case"text":closeText(t);break;default:H(t,"Max buffer length exceeded: "+o)}i=Math.max(i,a)}t.bufferCheckPosition=e.MAX_BUFFER_LENGTH-i+t.position}(n);return n},resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{n=ka}catch(e){n=function(){}}function R(e){if(!(this instanceof R))return new R(e);this._parser=new j(e),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var t=this;n.apply(t),this._parser.onend=function(){t.emit("end")},this._parser.onerror=function(e){t.emit("error",e),t._parser.error=null},i.forEach((function(e){Object.defineProperty(t,"on"+e,{get:function(){return t._parser["on"+e]},set:function(n){if(!n)return t.removeAllListeners(e),t._parser["on"+e]=n,n;t.on(e,n)},enumerable:!0,configurable:!1})}))}function B(t,n,r){e.INFO&&console.log("-- emit",n,r),t[n]&&t[n](r)}function F(e,t,n){U(e),B(e,t,n)}function U(e,t){e.textNode=function(e,t){if(void 0===t)return t;e.trim&&(t=t.trim());e.normalize&&(t=t.replace(/\s+/g," "));return t}(e.opt,e.textNode),void 0!==e.textNode&&B(e,t||"onvalue",e.textNode),e.textNode=void 0}function z(e){e.numberNode&&B(e,"onvalue",parseFloat(e.numberNode)),e.numberNode=""}function H(e,t){return U(e),t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c,t=new Error(t),e.error=t,B(e,"onerror",t),e}function K(e){return e.state===o.VALUE&&0===e.depth||H(e,"Unexpected end"),U(e),e.c="",e.closed=!0,B(e,"onend"),j.call(e,e.opt),e}function Y(e){return e===c||e===l||e===u||e===s}R.prototype=Object.create(n.prototype,{constructor:{value:R}}),R.prototype.write=function(e){e=new Buffer(e);for(var t=0;t<e.length;t++){var n=e[t];if(this.bytes_remaining>0){for(var r=0;r<this.bytes_remaining;r++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+r]=e[r];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,t=t+r-1,this._parser.write(this.string),this.emit("data",this.string)}else if(0===this.bytes_remaining&&n>=128){if(n>=194&&n<=223&&(this.bytes_in_sequence=2),n>=224&&n<=239&&(this.bytes_in_sequence=3),n>=240&&n<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+t>e.length){for(var i=0;i<=e.length-1-t;i++)this.temp_buffs[this.bytes_in_sequence][i]=e[t+i];return this.bytes_remaining=t+this.bytes_in_sequence-e.length,!0}this.string=e.slice(t,t+this.bytes_in_sequence).toString(),t=t+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string)}else{for(var o=t;o<e.length&&!(e[o]>=128);o++);this.string=e.slice(t,o).toString(),this._parser.write(this.string),this.emit("data",this.string),t=o-1}}},R.prototype.end=function(e){return e&&e.length&&this._parser.write(e.toString()),this._parser.end(),!0},R.prototype.on=function(e,t){var r=this;return r._parser["on"+e]||-1===i.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),n.prototype.on.call(r,e,t)},R.prototype.destroy=function(){N(this._parser),this.emit("close")}}(t)}));function Ca(e){var t=0,n=function(e){var t,n,r,i=_a.parser(),o=0,a=[],s=!1,l=!1;return i.onopenobject=function(i){var s={incomplete:!0};t||(t=s),n&&(a.push([r,n,l]),e&&(l?n.push(s):n[r]=s)),n=s,r=i,l=!1,++o},i.onkey=function(e){return r=e},i.onvalue=function(e){return l?n.push(e):n[r]=e},i.oncloseobject=function(){var t;if(delete n.incomplete,r=null,0==--o)s=!0;else{var i=n;t=a.pop(),r=t[0],n=t[1],l=t[2],e||(l?n.push(i):n[r]=i)}},i.onopenarray=function(){var i=[];i.incomplete=!0,t||(t=i),n&&(a.push([r,n,l]),e&&(l?n.push(i):n[r]=i)),n=i,l=!0,r=null,++o},i.onclosearray=function(){var t;if(delete n.incomplete,r=null,0==--o)s=!0;else{var i=n;t=a.pop(),r=t[0],n=t[1],l=t[2],e||(l?n.push(i):n[r]=i)}},{write:function(e){return i.write(e),t},done:function(){return s}}}(!0),r={pullAsync:function(i){return ea(this,void 0,void 0,(function(){var o,a,s;return ta(this,(function(l){switch(l.label){case 0:return o=e.slice(t,t+i),t+=i,[4,ra(o,"text")];case 1:return a=l.sent(),s=n.write(a),r.result=s||{},[2,s]}}))}))},pullSync:function(i){var o=e.slice(t,t+i);t+=i;var a=ia(o,"text"),s=n.write(a);return r.result=s||{},s},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}function Ea(e,t,n){return ea(this,void 0,void 0,(function(){function r(){return ea(this,void 0,void 0,(function(){var t,r,a,d;return ta(this,(function(f){switch(f.label){case 0:t=function(t){var r,i,o,a,s,d,f,p,h,g,m,v;return ta(this,(function(b){switch(b.label){case 0:if(!t.rows)return[2,"break"];if(!t.rows.incomplete&&0===t.rows.length)return[2,"continue"];if(c&&Zo.ignoreTransaction((function(){return c(u)})),r=t.tableName,i=e.table(r),o=l.tables.filter((function(e){return e.name===r}))[0].schema,!i){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table "+t.tableName+" is missing in installed database")}if(!n.acceptChangedPrimaryKey&&o.split(",")[0]!=i.schema.primKey.src)throw new Error("Primary key differs for table "+t.tableName+". ");for(a=t.rows,s=[],d=0;d<a.length&&!(f=a[d]).incomplete;d++)s.push(va.revive(f));return p=n.filter,h=p?t.inbound?s.filter((function(e){return p(r,e)})):s.filter((function(e){var t=e[0],n=e[1];return p(r,n,t)})):s,g=t.inbound?[void 0,h]:[h.map((function(e){return e[0]})),s.map((function(e){return e[1]}))],m=g[0],v=g[1],n.clearTablesBeforeImport?[4,i.clear()]:[3,2];case 1:b.sent(),b.label=2;case 2:return n.overwriteValues?[4,i.bulkPut(v,m)]:[3,4];case 3:return b.sent(),[3,6];case 4:return[4,i.bulkAdd(v,m)];case 5:b.sent(),b.label=6;case 6:return u.completedRows+=s.length,s.incomplete||(u.completedTables+=1),a.splice(0,s.length),[2]}}))},r=0,a=l.data,f.label=1;case 1:return r<a.length?(d=a[r],[5,t(d)]):[3,4];case 2:if("break"===f.sent())return[3,4];f.label=3;case 3:return r++,[3,1];case 4:for(;l.data.length>0&&l.data[0].rows&&!l.data[0].rows.incomplete;)l.data.splice(0,1);return o.done()||o.eof()?[3,8]:s?(o.pullSync(i),[3,7]):[3,5];case 5:return[4,Zo.waitFor(o.pullAsync(i))];case 6:f.sent(),f.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}}))}))}var i,o,a,s,l,c,u;return ta(this,(function(d){switch(d.label){case 0:return i=(n=n||{}).chunkSizeBytes||1048576,[4,Ta(t,i)];case 1:if(o=d.sent(),a=o.result,s="FileReaderSync"in self,l=a.data,!n.acceptNameDiff&&e.name!==l.databaseName)throw new Error("Name differs. Current database name is "+e.name+" but export is "+l.databaseName);if(!n.acceptVersionDiff&&e.verno!==l.databaseVersion)throw new Error("Database version differs. Current database is in version "+e.verno+" but export is "+l.databaseVersion);return c=n.progressCallback,u={done:!1,completedRows:0,completedTables:0,totalRows:l.tables.reduce((function(e,t){return e+t.rowCount}),0),totalTables:l.tables.length},c&&Zo.ignoreTransaction((function(){return c(u)})),n.noTransaction?[4,r()]:[3,3];case 2:return d.sent(),[3,5];case 3:return[4,e.transaction("rw",e.tables,r)];case 4:d.sent(),d.label=5;case 5:return u.done=!0,c&&Zo.ignoreTransaction((function(){return c(u)})),[2]}}))}))}function Ta(e,t){return ea(this,void 0,void 0,(function(){var n,r;return ta(this,(function(i){switch(i.label){case 0:n="slice"in e?Ca(e):e,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(!(r=n.result)||"dexie"!=r.formatName)throw new Error("Given file is not a dexie export");if(r.formatVersion>1)throw new Error("Format version "+r.formatVersion+" not supported");if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}}))}))}Zo.prototype.export=function(e){return xa(this,e)},Zo.prototype.import=function(e,t){return Ea(this,e,t)},Zo.import=function(e,t){return function(e,t){return ea(this,void 0,void 0,(function(){var n,r,i,o;return ta(this,(function(a){switch(a.label){case 0:return n=(t=t||{}).chunkSizeBytes||1048576,[4,Ta(e,n)];case 1:return r=a.sent(),i=r.result.data,(o=new Zo(i.databaseName)).version(i.databaseVersion).stores(function(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var i=r[n];t[i.name]=i.schema}return t}(i)),[4,Ea(o,r,t)];case 2:return a.sent(),[2,o]}}))}))}(e,t)};const Sa=[{color:Nt.RED,text:"Red"},{color:Nt.ORANGE,text:"Orange"},{color:Nt.YELLOW,text:"Yellow"},{color:Nt.GREEN,text:"Green"},{color:Nt.TEAL,text:"Teal"},{color:Nt.BLUE,text:"Blue"},{color:Nt.PURPLE,text:"Purple"}];class Da{constructor(e){this.id=Vt(),this.title=e,this.isArchived=!1,this.isStarred=!1,this.lastViewTime=(new Date).getTime(),this.color=this.getRandomColor(),this.lists=new Array,this.labels=Sa,Object.defineProperties(this,{lists:{value:[],enumerable:!1,writable:!0}})}getRandomColor(){return Math.floor(Math.random()*It.length)}setLabels(e){this.labels=e}setLastViewTime(e){this.lastViewTime=e}setTitle(e){this.title=e}swapLists(e){this.lists[e.from].index=e.to,this.lists[e.to].index=e.from;let t=this.lists[e.from];this.lists[e.from]=this.lists[e.to],this.lists[e.to]=t}toggleBoardArchive(){this.isArchived=!this.isArchived}toggleBoardStar(){this.isStarred=!this.isStarred}}class Aa{constructor(e,t){this.id=Vt(),this.checklist=new Array,this.created=(new Date).getTime(),this.description="",this.index=e.cards.length,this.label=null,this.listId=e.id,this.log=new Array,this.title=t}addToChecklist(e){this.checklist.push({checked:!1,text:e})}deleteFromChecklist(e){this.checklist.splice(e,1)}deleteTimeEntry(e){this.log.splice(e,1)}setComplete(e){this.isComplete=e}setDueDate(e){this.due=e}setDescription(e){this.description=e}setLabel(e){this.label=e}setPriority(e){this.priority=e}setTitle(e){this.title=e}trackTime(e){this.log.push({duration:e,date:(new Date).getTime()})}}class Oa{constructor(e,t){this.id=Vt(),this.title="New List",this.index=t,this.boardId=e,this.cards=new Array,Object.defineProperties(this,{cards:{value:[],enumerable:!1,writable:!0}})}deleteCard(e){let t=this.cards.findIndex(t=>t.id===e);t>-1&&this.cards.splice(t,1)}setTitle(e){this.title=e}}class $a{constructor(){this.id=1,this.theme="dark",this.maxCards=5,this.dueFilter="all",this.listFilter="",this.selectedBoards=["all"]}}class Ma extends Zo{constructor(){super("nimboDB");let e=this;e.version(1).stores({boards:"&id, title",cards:"&id, title, listId, index",lists:"&id, boardId, index",settings:"&id"}),e.boards.mapToClass(Da),e.cards.mapToClass(Aa),e.lists.mapToClass(Oa),e.settings.mapToClass($a)}}const Ia=Pe(new class{constructor(){this.db=new Ma,this.boards=new Array,this.selectedCardId=null,this.settings=new $a,this.showCommandPalette=!1}async init(){this.boards=await this.db.boards.toArray();let e=await Promise.all(this.boards.map(e=>this.db.lists.where({boardId:e.id}).toArray()));for(let t=0;t<e.length;t++){this.boards[t].lists=e[t].sort((e,t)=>e.index-t.index);let n=await Promise.all(this.boards[t].lists.map(e=>this.db.cards.where({listId:e.id}).toArray()));for(let e=0;e<this.boards[t].lists.length;e++)this.boards[t].lists[e].cards=n[e].sort((e,t)=>e.index-t.index)}let t=await this.db.settings.toArray();return 0===t.length?await this.updateSettings(this.settings):this.settings=t[0],!0}openPalette(){this.showCommandPalette=!0}closePalette(){this.showCommandPalette=!1}async addNewCard(e,t){let n=this.boards.findIndex(t=>t.id===e.boardId);if(n>-1){let r=this.boards[n].lists.findIndex(t=>t.id===e.id);if(r>-1){let i=new Aa(e,t);this.boards[n].lists[r].cards=[...this.boards[n].lists[r].cards,i],await this.db.cards.add(i)}}this.update()}async addNewList(e,t=null){let n=this.boards.findIndex(t=>t.id===e);if(n>-1){let r=new Oa(e,this.boards[n].lists.length);if(null!=t){let e={};this.boards[n].lists.splice(t+1,0,r),this.boards[n].lists=this.boards[n].lists;for(let t=0;t<this.boards[n].lists.length;t++)this.boards[n].lists[t].index=t,e[this.boards[n].lists[t].id]=t;await this.updateListIndexes(e)}else this.boards[n].lists=[...this.boards[n].lists,r];await this.db.lists.add(r)}this.update()}async createBoard(e){let t=new Da(e);return this.boards=[...this.boards,t],await this.db.boards.add(t),this.update(),t.id}async deleteBoard(e){let t=this.boards.findIndex(t=>t.id===e);t>-1&&this.boards.splice(t,1),await this.db.boards.delete(e),this.update()}async deleteCard(e,t){for(let n=0;n<this.boards.length;n++)for(let r=0;r<this.boards[n].lists.length;r++)this.boards[n].lists[r].id===e.id&&(e.deleteCard(t),this.boards[n].lists[r]=e);await this.db.cards.delete(t),this.update()}async deleteList(e,t){let n=this.boards.findIndex(t=>t.id===e);if(n>-1){let e=this.boards[n].lists.findIndex(e=>e.id===t);if(e>-1){let r={};this.boards[n].lists.splice(e,1);for(let e=0;e<this.boards[n].lists.length;e++)this.boards[n].lists[e].index=e,r[this.boards[n].lists[e].id]=e;await this.db.transaction("rw",this.db.lists,this.db.cards,async()=>{await Promise.all([this.db.lists.delete(t),this.db.cards.where({listId:t}).delete()])}),await this.updateListIndexes(r)}}this.update()}async export(){return await xa(this.db)}everything(){return this.boards.map(e=>e.isArchived?[]:[{type:Lt.BOARD,text:e.title,path:"/b/"+e.id},e.lists.map(e=>e.cards.map(e=>({type:Lt.CARD,text:e.title,path:"/c/"+e.id})))]).flat(4)}getBoard(e){let t=this.boards.findIndex(t=>t.id===e);return t>-1?this.boards[t]:null}getCardDetails(e){for(let t=0;t<this.boards.length;t++)for(let n=0;n<this.boards[t].lists.length;n++)for(let r=0;r<this.boards[t].lists[n].cards.length;r++)if(this.boards[t].lists[n].cards[r].id===e)return{board:this.boards[t],list:this.boards[t].lists[n],card:this.boards[t].lists[n].cards[r]};return null}async import(e){try{let t=await function(e){return ea(this,void 0,void 0,(function(){var t;return ta(this,(function(n){switch(n.label){case 0:t=Ca(e),n.label=1;case 1:return t.eof()?[3,3]:[4,t.pullAsync(5120)];case 2:return n.sent(),t.result.data&&t.result.data.data?(delete t.result.data.data,[3,3]):[3,1];case 3:return[2,t.result]}}))}))}(e);if("dexie"==t.formatName&&1==t.formatVersion)return await this.db.import(e,{clearTablesBeforeImport:!0}),this.update(),!0}catch(e){}}async importTrelloBoard(e){let t=new Da(e.name);t.lastViewTime=new Date(e.dateLastView).getTime(),t.isStarred=e.starred,t.isArchived=e.closed;let n=[],r=[];for(let n=0;n<e.lists.length;n++){let i=new Oa(t.id,n);i.setTitle(e.lists[n].name);for(let t=0;t<e.cards.length;t++)if(e.lists[n].id===e.cards[t].idList){let n=new Aa(i,e.cards[t].name);n.description=e.cards[t].desc,n.due=e.cards[t].due?new Date(e.cards[t].due).getTime():null,n.isComplete=e.cards[t].dueComplete,i.cards.push(n)}r.push(i)}for(let e=0;e<r.length;e++)n=n.concat(r[e].cards);return await this.db.transaction("rw",this.db.boards,this.db.lists,this.db.cards,async()=>{await Promise.all([this.db.boards.add(t),this.db.lists.bulkAdd(r),this.db.cards.bulkAdd(n)])}),this.update(),t.id}async moveCard(e){let t=this.boards.findIndex(t=>t.id===e.boardId);if(t>-1){let n=this.boards[t].lists.findIndex(t=>t.id===e.from.list),r=this.boards[t].lists.findIndex(t=>t.id===e.to.list);if(n>-1&&r>-1){let i,o={};if(e.from.list!=e.to.list){let a;i=this.boards[t].lists[n].cards.splice(e.from.index,1)[0],a=i.listId,i.listId=this.boards[t].lists[r].id,i.index=e.to.index;for(let e=0;e<this.boards[t].lists[n].cards.length;e++)this.boards[t].lists[n].cards[e].index=e,o[this.boards[t].lists[n].cards[e].id]=e;this.boards[t].lists[r].cards.splice(e.to.index,0,i);for(let e=0;e<this.boards[t].lists[r].cards.length;e++)this.boards[t].lists[r].cards[e].index=e,o[this.boards[t].lists[r].cards[e].id]=e}else if(e.from.index!=e.to.index){i=this.boards[t].lists[n].cards.splice(e.from.index,1)[0],i.index=e.to.index,this.boards[t].lists[n].cards.splice(e.to.index,0,i);for(let e=0;e<this.boards[t].lists[n].cards.length;e++)this.boards[t].lists[n].cards[e].index=e,o[this.boards[t].lists[n].cards[e].id]=e}await this.updateCardIndexes(i,o)}}}async refresh(){await this.init()}setChannel(e){this.channel=e}setSelectedCard(e){this.selectedCardId=e}async swapLists(e,t){let n=this.boards.findIndex(t=>t.id===e);n>-1&&(this.boards[n].swapLists(t),await this.db.transaction("rw",this.db.lists,async()=>{let[n,r]=await Promise.all([this.db.lists.get({boardId:e,index:t.from}),this.db.lists.get({boardId:e,index:t.to})]);n.index=t.to,r.index=t.from,await this.db.lists.bulkPut([n,r])})),this.update()}async toggleBoardArchive(e){let t=this.boards.findIndex(t=>t.id===e);t>-1&&(this.boards[t].toggleBoardArchive(),await this.db.boards.update(e,{isArchived:this.boards[t].isArchived})),this.update()}async toggleBoardStar(e){let t=this.boards.findIndex(t=>t.id===e);t>-1&&(this.boards[t].toggleBoardStar(),await this.db.boards.update(e,{isStarred:this.boards[t].isStarred})),this.update()}async toggleTheme(){let e="dark"===this.settings.theme?"light":"dark";this.settings.theme=e,await this.updateSettings(this.settings),this.update()}update(){this.channel.postMessage("update")}async updateBoardTitle(e,t){let n=this.boards.findIndex(t=>t.id===e);n>-1&&(this.boards[n].setTitle(t),await this.db.boards.update(e,{title:t})),this.update()}async updateCard(e,t){for(let t=0;t<this.boards.length;t++)for(let n=0;n<this.boards[t].lists.length;n++)for(let r=0;r<this.boards[t].lists[n].cards.length;r++)this.boards[t].lists[n].cards[r].id===e.id&&(this.boards[t].lists[n].cards[r]=e);await this.db.cards.update(e.id,{[t]:e[t]}),this.update()}async updateCardIndexes(e,t){await this.db.transaction("rw",this.db.cards,async()=>{await this.db.cards.update(e.id,{listId:e.listId}),await this.db.cards.where("id").anyOf(Object.keys(t)).modify(e=>{e.index=t[e.id]})}),this.update()}async updateLabels(e,t){let n=this.boards.findIndex(t=>t.id===e);n>-1&&(this.boards[n].setLabels(t),await this.db.boards.update(e,{labels:t})),this.update()}async updateListIndexes(e){await this.db.lists.where("id").anyOf(Object.keys(e)).modify(t=>{t.index=e[t.id]})}async updateListTitle(e,t,n){let r=this.boards.findIndex(t=>t.id===e);if(r>-1){let e=this.boards[r].lists.findIndex(e=>e.id===t);e>-1&&(this.boards[r].lists[e].setTitle(n),await this.db.lists.update(t,{title:n}))}this.update()}async updateSettings(e){await this.db.settings.put(e),this.settings=e,this.update()}async updateViewTime(e){let t=this.boards.findIndex(t=>t.id===e);if(t>-1){let n=(new Date).getTime();this.boards[t].setLastViewTime(n),await this.db.boards.update(e,{lastViewTime:n})}this.update()}async zenCards(){let e=new Date;e.setHours(23,59,59,999);let t=(e=>{let t=new Date(e),n={};return t.setDate(e.getDate()+1),n.tomorrow=t.getTime(),t.setDate(e.getDate()+7),n.week=t.getTime(),t.setDate(e.getDate()+30),n.month=t.getTime(),n})(e),n=this.settings.selectedBoards.includes("all"),r=this.settings.listFilter.split(",").map(e=>e.toLowerCase()),i=this.boards.filter(e=>n||this.settings.selectedBoards.includes(e.id)).map(e=>e.lists.filter(e=>0===r.length||r.some(t=>e.title.toLowerCase().includes(t))).map(e=>e.id)).reduce((e,t)=>e.concat(t),[]),o=await this.db.cards.where("listId").anyOf(i).filter(n=>"all"===this.settings.dueFilter||("overdue"===this.settings.dueFilter?n.isComplete&&n.due&&e.getTime()>n.due:"tomorrow"===this.settings.dueFilter?!n.isComplete&&n.due&&n.due<t.tomorrow:"week"===this.settings.dueFilter?!n.isComplete&&n.due&&n.due<t.week:"month"===this.settings.dueFilter?!n.isComplete&&n.due&&n.due<t.month:void 0)).toArray(),a=o.filter(e=>e.due&&!e.isComplete);a.sort((e,t)=>e.due-t.due);let s=o.filter(e=>null===e.due||void 0===e.due),l=s.filter(e=>e.priority in Pt);l.sort((e,t)=>e.priority-t.priority);let c=s.filter(e=>!(e.priority in Pt));return c.sort((e,t)=>e.created-t.created),o=a.concat(l,c),o.slice(0,this.settings.maxCards)}});function Pa(){return(Pa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Na(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var La=Na(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ja=Na(/Edge/i),Ra=Na(/firefox/i),Ba=Na(/safari/i)&&!Na(/chrome/i)&&!Na(/android/i),Fa=Na(/iP(ad|od|hone)/i),Ua=Na(/chrome/i)&&Na(/android/i),za={capture:!1,passive:!1};function Ha(e,t,n){e.addEventListener(t,n,!La&&za)}function Ka(e,t,n){e.removeEventListener(t,n,!La&&za)}function Ya(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function qa(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Va(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&Ya(e,t):Ya(e,t))||r&&e===n)return e;if(e===n)break}while(e=qa(e))}return null}var Wa,Ga=/\s+/g;function Xa(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(Ga," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(Ga," ")}}function Ja(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function Za(e,t){var n="";if("string"==typeof e)n=e;else do{var r=Ja(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Qa(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function es(){return document.scrollingElement||document.documentElement}function ts(e,t,n,r,i){if(e.getBoundingClientRect||e===window){var o,a,s,l,c,u,d;if(e!==window&&e!==es()?(a=(o=e.getBoundingClientRect()).top,s=o.left,l=o.bottom,c=o.right,u=o.height,d=o.width):(a=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!La))do{if(i&&i.getBoundingClientRect&&("none"!==Ja(i,"transform")||n&&"static"!==Ja(i,"position"))){var f=i.getBoundingClientRect();a-=f.top+parseInt(Ja(i,"border-top-width")),s-=f.left+parseInt(Ja(i,"border-left-width")),l=a+o.height,c=s+o.width;break}}while(i=i.parentNode);if(r&&e!==window){var p=Za(i||e),h=p&&p.a,g=p&&p.d;p&&(l=(a/=g)+(u/=g),c=(s/=h)+(d/=h))}return{top:a,left:s,bottom:l,right:c,width:d,height:u}}}function ns(e,t,n){for(var r=ss(e,!0),i=ts(e)[t];r;){var o=ts(r)[n];if(!("top"===n||"left"===n?i>=o:i<=o))return r;if(r===es())break;r=ss(r,!1)}return!1}function rs(e,t,n){for(var r=0,i=0,o=e.children;i<o.length;){if("none"!==o[i].style.display&&o[i]!==fl.ghost&&o[i]!==fl.dragged&&Va(o[i],n.draggable,e,!1)){if(r===t)return o[i];r++}i++}return null}function is(e,t){for(var n=e.lastElementChild;n&&(n===fl.ghost||"none"===Ja(n,"display")||t&&!Ya(n,t));)n=n.previousElementSibling;return n||null}function os(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===fl.clone||t&&!Ya(e,t)||n++;return n}function as(e){var t=0,n=0,r=es();if(e)do{var i=Za(e);t+=e.scrollLeft*i.a,n+=e.scrollTop*i.d}while(e!==r&&(e=e.parentNode));return[t,n]}function ss(e,t){if(!e||!e.getBoundingClientRect)return es();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Ja(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return es();if(r||t)return n;r=!0}}}while(n=n.parentNode);return es()}function ls(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function cs(e,t){return function(){if(!Wa){var n=arguments,r=this;1===n.length?e.call(r,n[0]):e.apply(r,n),Wa=setTimeout((function(){Wa=void 0}),t)}}}function us(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function ds(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function fs(e,t){Ja(e,"position","absolute"),Ja(e,"top",t.top),Ja(e,"left",t.left),Ja(e,"width",t.width),Ja(e,"height",t.height)}function ps(e){Ja(e,"position",""),Ja(e,"top",""),Ja(e,"left",""),Ja(e,"width",""),Ja(e,"height","")}var hs="Sortable"+(new Date).getTime(),gs=[],ms={initializeByDefault:!0},vs={mount:function(e){for(var t in ms)ms.hasOwnProperty(t)&&!(t in e)&&(e[t]=ms[t]);gs.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=e+"Global";gs.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][i]&&t[r.pluginName][i](Pa({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](Pa({sortable:t},n)))}))},initializePlugins:function(e,t,n,r){for(var i in gs.forEach((function(r){var i=r.pluginName;if(e.options[i]||r.initializeByDefault){var o=new r(e,t,e.options);o.sortable=e,o.options=e.options,e[i]=o,Object.assign(n,o.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var o=this.modifyOption(e,i,e.options[i]);void 0!==o&&(e.options[i]=o)}},getEventProperties:function(e,t){var n={};return gs.forEach((function(r){"function"==typeof r.eventProperties&&Object.assign(n,r.eventProperties.call(t[r.pluginName],e))})),n},modifyOption:function(e,t,n){var r;return gs.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[t]&&(r=i.optionListeners[t].call(e[i.pluginName],n))})),r}};function bs(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,o=e.cloneEl,a=e.toEl,s=e.fromEl,l=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,h=e.extraEventProperties;if(t=t||n&&n[hs]){var g,m=t.options,v="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||La||ja?(g=document.createEvent("Event")).initEvent(r,!0,!0):g=new CustomEvent(r,{bubbles:!0,cancelable:!0}),g.to=a||n,g.from=s||n,g.item=i||n,g.clone=o,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=u,g.newDraggableIndex=d,g.originalEvent=f,g.pullMode=p?p.lastPutMode:void 0;var b=Pa({},h,vs.getEventProperties(r,t));for(var y in b)g[y]=b[y];n&&n.dispatchEvent(g),m[v]&&m[v].call(t,g)}}var ys=function(e,t,n){var r=void 0===n?{}:n,i=r.evt,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}(r,["evt"]);vs.pluginEvent.bind(fl)(e,t,Pa({dragEl:xs,parentEl:ks,ghostEl:_s,rootEl:Cs,nextEl:Es,lastDownEl:Ts,cloneEl:Ss,cloneHidden:Ds,dragStarted:Us,putSortable:Ps,activeSortable:fl.active,originalEvent:i,oldIndex:As,oldDraggableIndex:$s,newIndex:Os,newDraggableIndex:Ms,hideGhostForTarget:sl,unhideGhostForTarget:ll,cloneNowHidden:function(){Ds=!0},cloneNowShown:function(){Ds=!1},dispatchSortableEvent:function(e){ws({sortable:t,name:e,originalEvent:i})}},o))};function ws(e){bs(Pa({putSortable:Ps,cloneEl:Ss,targetEl:xs,rootEl:Cs,oldIndex:As,oldDraggableIndex:$s,newIndex:Os,newDraggableIndex:Ms},e))}var xs,ks,_s,Cs,Es,Ts,Ss,Ds,As,Os,$s,Ms,Is,Ps,Ns,Ls,js,Rs,Bs,Fs,Us,zs,Hs,Ks,Ys,qs=!1,Vs=!1,Ws=[],Gs=!1,Xs=!1,Js=[],Zs=!1,Qs=[],el="undefined"!=typeof document,tl=Fa,nl=ja||La?"cssFloat":"float",rl=el&&!Ua&&!Fa&&"draggable"in document.createElement("div"),il=function(){if(el){if(La)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),ol=function(e,t){var n=Ja(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=rs(e,0,t),o=rs(e,1,t),a=i&&Ja(i),s=o&&Ja(o),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ts(i).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ts(o).width;return"flex"===n.display?"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal":"grid"===n.display?n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":i&&a.float&&"none"!==a.float?!o||"both"!==s.clear&&s.clear!==("left"===a.float?"left":"right")?"horizontal":"vertical":i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=r&&"none"===n[nl]||o&&"none"===n[nl]&&l+c>r)?"vertical":"horizontal"},al=function(e){function t(e,n){return function(r,i,o,a){if(null==e&&(n||r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,i,o,a),n)(r,i,o,a);var s=(n?r:i).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},r=e.group;r&&"object"==typeof r||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},sl=function(){!il&&_s&&Ja(_s,"display","none")},ll=function(){!il&&_s&&Ja(_s,"display","")};el&&document.addEventListener("click",(function(e){if(Vs)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Vs=!1,!1}),!0);var cl,ul=function(e){if(xs){var t=(i=(e=e.touches?e.touches[0]:e).clientX,o=e.clientY,Ws.some((function(e){if(!is(e)){var t=ts(e),n=e[hs].options.emptyInsertThreshold;return n&&i>=t.left-n&&i<=t.right+n&&o>=t.top-n&&o<=t.bottom+n?a=e:void 0}})),a);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[hs]._onDragOver(n)}}var i,o,a},dl=function(e){xs&&xs.parentNode[hs]._isOutsideThisEl(e.target)};function fl(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=Object.assign({},t),e[hs]=this;var n,r,i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ol(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==fl.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var o in vs.initializePlugins(this,e,i),i)!(o in t)&&(t[o]=i[o]);for(var a in al(t),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&rl,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Ha(e,"pointerdown",this._onTapStart):(Ha(e,"mousedown",this._onTapStart),Ha(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ha(e,"dragover",this),Ha(e,"dragenter",this)),Ws.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Object.assign(this,(r=[],{captureAnimationState:function(){r=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(e){if("none"!==Ja(e,"display")&&void 0!==e){r.push({target:e,rect:ts(e)});var t=Pa({},r[r.length-1].rect);if(e.thisAnimationDuration){var n=Za(e,!0);n&&(t.top-=n.f,t.left-=n.e)}e.fromRect=t}}))},addAnimationState:function(e){r.push(e)},removeAnimationState:function(e){r.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(r,{target:e}),1)},animateAll:function(e){var t=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof e&&e());var i=!1,o=0;r.forEach((function(e){var n=0,r=e.target,a=r.fromRect,s=ts(r),l=r.prevFromRect,c=r.prevToRect,u=e.rect,d=Za(r,!0);d&&(s.top-=d.f,s.left-=d.e),r.toRect=s,r.thisAnimationDuration&&ls(l,s)&&!ls(a,s)&&(u.top-s.top)/(u.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(n=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(u,l,c,t.options)),ls(s,a)||(r.prevFromRect=a,r.prevToRect=s,n||(n=t.options.animation),t.animate(r,u,s,n)),n&&(i=!0,o=Math.max(o,n),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout((function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null}),n),r.thisAnimationDuration=n)})),clearTimeout(n),i?n=setTimeout((function(){"function"==typeof e&&e()}),o):"function"==typeof e&&e(),r=[]},animate:function(e,t,n,r){if(r){Ja(e,"transition",""),Ja(e,"transform","");var i=Za(this.el),o=(t.left-n.left)/(i&&i.a||1),a=(t.top-n.top)/(i&&i.d||1);e.animatingX=!!o,e.animatingY=!!a,Ja(e,"transform","translate3d("+o+"px,"+a+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),Ja(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),Ja(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Ja(e,"transition",""),Ja(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}))}function pl(e,t,n,r,i,o,a,s){var l,c,u=e[hs],d=u.options.onMove;return!window.CustomEvent||La||ja?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=i||t,l.relatedRect=o||ts(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),d&&(c=d.call(u,l,a)),c}function hl(e){e.draggable=!1}function gl(){Zs=!1}function ml(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function vl(e){return setTimeout(e,0)}function bl(e){return clearTimeout(e)}fl.prototype={constructor:fl,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(zs=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,xs):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,i=r.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=r.filter;if(function(e){Qs.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&Qs.push(r)}}(n),!xs&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||r.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!Ba||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=Va(s,r.draggable,n,!1))&&s.animated||Ts===s)){if(As=os(s),$s=os(s,r.draggable),"function"==typeof c){if(c.call(this,e,s,this))return ws({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),ys("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(r){if(r=Va(l,r.trim(),n,!1))return ws({sortable:t,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),ys("filter",t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());r.handle&&!Va(l,r.handle,n,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(e,t,n){var r,i=this,o=i.el,a=i.options,s=o.ownerDocument;if(n&&!xs&&n.parentNode===o){var l=ts(n);if(Cs=o,ks=(xs=n).parentNode,Es=xs.nextSibling,Ts=n,Is=a.group,fl.dragged=xs,Bs=(Ns={target:xs,clientX:(t||e).clientX,clientY:(t||e).clientY}).clientX-l.left,Fs=Ns.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,xs.style["will-change"]="all",r=function(){ys("delayEnded",i,{evt:e}),fl.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!Ra&&i.nativeDraggable&&(xs.draggable=!0),i._triggerDragStart(e,t),ws({sortable:i,name:"choose",originalEvent:e}),Xa(xs,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){Qa(xs,e.trim(),hl)})),Ha(s,"dragover",ul),Ha(s,"mousemove",ul),Ha(s,"touchmove",ul),Ha(s,"mouseup",i._onDrop),Ha(s,"touchend",i._onDrop),Ha(s,"touchcancel",i._onDrop),Ra&&this.nativeDraggable&&(this.options.touchStartThreshold=4,xs.draggable=!0),ys("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(ja||La))r();else{if(fl.eventCanceled)return void this._onDrop();Ha(s,"mouseup",i._disableDelayedDrag),Ha(s,"touchend",i._disableDelayedDrag),Ha(s,"touchcancel",i._disableDelayedDrag),Ha(s,"mousemove",i._delayedDragTouchMoveHandler),Ha(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&Ha(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(r,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){xs&&hl(xs),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Ka(e,"mouseup",this._disableDelayedDrag),Ka(e,"touchend",this._disableDelayedDrag),Ka(e,"touchcancel",this._disableDelayedDrag),Ka(e,"mousemove",this._delayedDragTouchMoveHandler),Ka(e,"touchmove",this._delayedDragTouchMoveHandler),Ka(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?Ha(document,this.options.supportPointer?"pointermove":t?"touchmove":"mousemove",this._onTouchMove):(Ha(xs,"dragend",this),Ha(Cs,"dragstart",this._onDragStart));try{document.selection?vl((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(qs=!1,Cs&&xs){ys("dragStarted",this,{evt:t}),this.nativeDraggable&&Ha(document,"dragover",dl);var n=this.options;!e&&Xa(xs,n.dragClass,!1),Xa(xs,n.ghostClass,!0),fl.active=this,e&&this._appendGhost(),ws({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ls){this._lastX=Ls.clientX,this._lastY=Ls.clientY,sl();for(var e=document.elementFromPoint(Ls.clientX,Ls.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ls.clientX,Ls.clientY))!==t;)t=e;if(xs.parentNode[hs]._isOutsideThisEl(e),t)do{if(t[hs]&&t[hs]._onDragOver({clientX:Ls.clientX,clientY:Ls.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break;e=t}while(t=t.parentNode);ll()}},_onTouchMove:function(e){if(Ns){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,i=e.touches?e.touches[0]:e,o=_s&&Za(_s,!0),a=_s&&o&&o.a,s=_s&&o&&o.d,l=tl&&Ys&&as(Ys),c=(i.clientX-Ns.clientX+r.x)/(a||1)+(l?l[0]-Js[0]:0)/(a||1),u=(i.clientY-Ns.clientY+r.y)/(s||1)+(l?l[1]-Js[1]:0)/(s||1);if(!fl.active&&!qs){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(_s){o?(o.e+=c-(js||0),o.f+=u-(Rs||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix("+o.a+","+o.b+","+o.c+","+o.d+","+o.e+","+o.f+")";Ja(_s,"webkitTransform",d),Ja(_s,"mozTransform",d),Ja(_s,"msTransform",d),Ja(_s,"transform",d),js=c,Rs=u,Ls=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!_s){var e=this.options.fallbackOnBody?document.body:Cs,t=ts(xs,!0,tl,!0,e),n=this.options;if(tl){for(Ys=e;"static"===Ja(Ys,"position")&&"none"===Ja(Ys,"transform")&&Ys!==document;)Ys=Ys.parentNode;Ys!==document.body&&Ys!==document.documentElement?(Ys===document&&(Ys=es()),t.top+=Ys.scrollTop,t.left+=Ys.scrollLeft):Ys=es(),Js=as(Ys)}Xa(_s=xs.cloneNode(!0),n.ghostClass,!1),Xa(_s,n.fallbackClass,!0),Xa(_s,n.dragClass,!0),Ja(_s,"transition",""),Ja(_s,"transform",""),Ja(_s,"box-sizing","border-box"),Ja(_s,"margin",0),Ja(_s,"top",t.top),Ja(_s,"left",t.left),Ja(_s,"width",t.width),Ja(_s,"height",t.height),Ja(_s,"opacity","0.8"),Ja(_s,"position",tl?"absolute":"fixed"),Ja(_s,"zIndex","100000"),Ja(_s,"pointerEvents","none"),fl.ghost=_s,e.appendChild(_s),Ja(_s,"transform-origin",Bs/parseInt(_s.style.width)*100+"% "+Fs/parseInt(_s.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,i=n.options;ys("dragStart",this,{evt:e}),fl.eventCanceled?this._onDrop():(ys("setupClone",this),fl.eventCanceled||((Ss=ds(xs)).draggable=!1,Ss.style["will-change"]="",this._hideClone(),Xa(Ss,this.options.chosenClass,!1),fl.clone=Ss),n.cloneId=vl((function(){ys("clone",n),fl.eventCanceled||(n.options.removeCloneOnHide||Cs.insertBefore(Ss,xs),n._hideClone(),ws({sortable:n,name:"clone"}))})),!t&&Xa(xs,i.dragClass,!0),t?(Vs=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Ka(document,"mouseup",n._onDrop),Ka(document,"touchend",n._onDrop),Ka(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,xs)),Ha(document,"drop",n),Ja(xs,"transform","translateZ(0)")),qs=!0,n._dragStartId=vl(n._dragStarted.bind(n,t,e)),Ha(document,"selectstart",n),Us=!0,Ba&&Ja(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,i,o=this.el,a=e.target,s=this.options,l=s.group,c=fl.active,u=Is===l,d=s.sort,f=Ps||c,p=this,h=!1;if(!Zs){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=Va(a,s.draggable,o,!0),D("dragOver"),fl.eventCanceled)return h;if(xs.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||p._ignoreWhileAnimating===a)return O(!1);if(Vs=!1,c&&!s.disabled&&(u?d||(r=!Cs.contains(xs)):Ps===this||(this.lastPutMode=Is.checkPull(this,c,xs,e))&&l.checkPut(this,c,xs,e))){if(i="vertical"===this._getDirection(e,a),t=ts(xs),D("dragOverValid"),fl.eventCanceled)return h;if(r)return ks=Cs,A(),this._hideClone(),D("revert"),fl.eventCanceled||(Es?Cs.insertBefore(xs,Es):Cs.appendChild(xs)),O(!0);var g=is(o,s.draggable);if(!g||function(e,t,n){var r=ts(is(n.el,n.options.draggable));return t?e.clientX>r.right+10||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+10}(e,i,this)&&!g.animated){if(g===xs)return O(!1);if(g&&o===e.target&&(a=g),a&&(n=ts(a)),!1!==pl(Cs,o,xs,t,a,n,e,!!a))return A(),o.appendChild(xs),ks=o,$(),O(!0)}else if(a.parentNode===o){n=ts(a);var m,v,b,y=xs.parentNode!==o,w=!function(e,t,n){var r=n?e.left:e.top,i=n?t.left:t.top;return r===i||(n?e.right:e.bottom)===(n?t.right:t.bottom)||r+(n?e.width:e.height)/2===i+(n?t.width:t.height)/2}(xs.animated&&xs.toRect||t,a.animated&&a.toRect||n,i),x=i?"top":"left",k=ns(a,"top","top")||ns(xs,"top","top"),_=k?k.scrollTop:void 0;if(zs!==a&&(v=n[x],Gs=!1,Xs=!w&&s.invertSwap||y),0!==(m=function(e,t,n,r,i,o,a,s){var l=r?e.clientY:e.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!a)if(s&&Ks<c*i){if(!Gs&&(1===Hs?l>u+c*o/2:l<d-c*o/2)&&(Gs=!0),Gs)f=!0;else if(1===Hs?l<u+Ks:l>d-Ks)return-Hs}else if(l>u+c*(1-i)/2&&l<d-c*(1-i)/2)return function(e){return os(xs)<os(e)?1:-1}(t);return(f=f||a)&&(l<u+c*o/2||l>d-c*o/2)?l>u+c/2?1:-1:0}(e,a,n,i,w?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,Xs,zs===a))){var C=os(xs);do{b=ks.children[C-=m]}while(b&&("none"===Ja(b,"display")||b===_s))}if(0===m||b===a)return O(!1);zs=a,Hs=m;var E=a.nextElementSibling,T=!1,S=pl(Cs,o,xs,t,a,n,e,T=1===m);if(!1!==S)return 1!==S&&-1!==S||(T=1===S),Zs=!0,setTimeout(gl,30),A(),T&&!E?o.appendChild(xs):a.parentNode.insertBefore(xs,T?E:a),k&&us(k,0,_-k.scrollTop),ks=xs.parentNode,void 0===v||Xs||(Ks=Math.abs(v-ts(a)[x])),$(),O(!0)}if(o.contains(xs))return O(!1)}return!1}function D(s,l){ys(s,p,Pa({evt:e,isOwner:u,axis:i?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:d,fromSortable:f,target:a,completed:O,onMove:function(n,r){return pl(Cs,o,xs,t,n,ts(n),e,r)},changed:$},l))}function A(){D("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function O(t){return D("dragOverCompleted",{insertion:t}),t&&(u?c._hideClone():c._showClone(p),p!==f&&(Xa(xs,Ps?Ps.options.ghostClass:c.options.ghostClass,!1),Xa(xs,s.ghostClass,!0)),Ps!==p&&p!==fl.active?Ps=p:p===fl.active&&Ps&&(Ps=null),f===p&&(p._ignoreWhileAnimating=a),p.animateAll((function(){D("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(a===xs&&!xs.animated||a===o&&!a.animated)&&(zs=null),s.dragoverBubble||e.rootEl||a===document||(xs.parentNode[hs]._isOutsideThisEl(e.target),!t&&ul(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function $(){Os=os(xs),Ms=os(xs,s.draggable),ws({sortable:p,name:"change",toEl:o,newIndex:Os,newDraggableIndex:Ms,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ka(document,"mousemove",this._onTouchMove),Ka(document,"touchmove",this._onTouchMove),Ka(document,"pointermove",this._onTouchMove),Ka(document,"dragover",ul),Ka(document,"mousemove",ul),Ka(document,"touchmove",ul)},_offUpEvents:function(){var e=this.el.ownerDocument;Ka(e,"mouseup",this._onDrop),Ka(e,"touchend",this._onDrop),Ka(e,"pointerup",this._onDrop),Ka(e,"touchcancel",this._onDrop),Ka(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;Os=os(xs),Ms=os(xs,n.draggable),ys("drop",this,{evt:e}),ks=xs&&xs.parentNode,Os=os(xs),Ms=os(xs,n.draggable),fl.eventCanceled||(qs=!1,Xs=!1,Gs=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),bl(this.cloneId),bl(this._dragStartId),this.nativeDraggable&&(Ka(document,"drop",this),Ka(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ba&&Ja(document.body,"user-select",""),Ja(xs,"transform",""),e&&(Us&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),_s&&_s.parentNode&&_s.parentNode.removeChild(_s),(Cs===ks||Ps&&"clone"!==Ps.lastPutMode)&&Ss&&Ss.parentNode&&Ss.parentNode.removeChild(Ss),xs&&(this.nativeDraggable&&Ka(xs,"dragend",this),hl(xs),xs.style["will-change"]="",Us&&!qs&&Xa(xs,Ps?Ps.options.ghostClass:this.options.ghostClass,!1),Xa(xs,this.options.chosenClass,!1),ws({sortable:this,name:"unchoose",toEl:ks,newIndex:null,newDraggableIndex:null,originalEvent:e}),Cs!==ks?(Os>=0&&(ws({rootEl:ks,name:"add",toEl:ks,fromEl:Cs,originalEvent:e}),ws({sortable:this,name:"remove",toEl:ks,originalEvent:e}),ws({rootEl:ks,name:"sort",toEl:ks,fromEl:Cs,originalEvent:e}),ws({sortable:this,name:"sort",toEl:ks,originalEvent:e})),Ps&&Ps.save()):Os!==As&&Os>=0&&(ws({sortable:this,name:"update",toEl:ks,originalEvent:e}),ws({sortable:this,name:"sort",toEl:ks,originalEvent:e})),fl.active&&(null!=Os&&-1!==Os||(Os=As,Ms=$s),ws({sortable:this,name:"end",toEl:ks,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){ys("nulling",this),Cs=xs=ks=_s=Es=Ss=Ts=Ds=Ns=Ls=Us=Os=Ms=As=$s=zs=Hs=Ps=Is=fl.dragged=fl.ghost=fl.clone=fl.active=null,Qs.forEach((function(e){e.checked=!0})),Qs.length=js=Rs=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":xs&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,i=n.length,o=this.options;r<i;r++)Va(e=n[r],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||ml(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach((function(e,r){var i=n.children[r];Va(i,this.options.draggable,n,!1)&&(t[e]=i)}),this),e.forEach((function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Va(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=vs.modifyOption(this,e,t);n[e]=void 0!==r?r:t,"group"===e&&al(n)},destroy:function(){ys("destroy",this);var e=this.el;e[hs]=null,Ka(e,"mousedown",this._onTapStart),Ka(e,"touchstart",this._onTapStart),Ka(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ka(e,"dragover",this),Ka(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Ws.splice(Ws.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ds){if(ys("hideClone",this),fl.eventCanceled)return;Ja(Ss,"display","none"),this.options.removeCloneOnHide&&Ss.parentNode&&Ss.parentNode.removeChild(Ss),Ds=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Ds){if(ys("showClone",this),fl.eventCanceled)return;xs.parentNode!=Cs||this.options.group.revertClone?Es?Cs.insertBefore(Ss,Es):Cs.appendChild(Ss):Cs.insertBefore(Ss,xs),this.options.group.revertClone&&this.animate(xs,Ss),Ja(Ss,"display",""),Ds=!1}}else this._hideClone()}},el&&Ha(document,"touchmove",(function(e){(fl.active||qs)&&e.cancelable&&e.preventDefault()})),fl.utils={on:Ha,off:Ka,css:Ja,find:Qa,is:function(e,t){return!!Va(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:cs,closest:Va,toggleClass:Xa,clone:ds,index:os,nextTick:vl,cancelNextTick:bl,detectDirection:ol,getChild:rs},fl.get=function(e){return e[hs]},fl.mount=function(){var e=[].slice.call(arguments);e[0].constructor===Array&&(e=e[0]),e.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not "+{}.toString.call(e);e.utils&&(fl.utils=Pa({},fl.utils,e.utils)),vs.mount(e)}))},fl.create=function(e,t){return new fl(e,t)},fl.version="1.12.0";var yl,wl,xl,kl,_l,Cl=[],El=[],Tl=!1,Sl=!1,Dl=!1;function Al(e,t){El.forEach((function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)}))}function Ol(){Cl.forEach((function(e){e!==xl&&e.parentNode&&e.parentNode.removeChild(e)}))}var $l=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,i=e.dispatchSortableEvent,o=e.unhideGhostForTarget;if(t){var a=n||e.activeSortable;(0,e.hideGhostForTarget)();var s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,l=document.elementFromPoint(s.clientX,s.clientY);o(),a&&!a.el.contains(l)&&(i("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Ml(){}function Il(){}Ml.prototype={startIndex:null,dragStart:function(e){this.startIndex=e.oldDraggableIndex},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=rs(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:$l},Object.assign(Ml,{pluginName:"revertOnSpill"}),Il.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:$l},Object.assign(Il,{pluginName:"removeOnSpill"});var Pl,Nl,Ll,jl,Rl,Bl,Fl=[],Ul=!1;function zl(){Fl.forEach((function(e){clearInterval(e.pid)})),Fl=[]}function Hl(){clearInterval(Bl)}var Kl=cs((function(e,t,n,r){if(t.scroll){var i,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=es(),u=!1;Nl!==n&&(Nl=n,zl(),i=t.scrollFn,!0===(Pl=t.scroll)&&(Pl=ss(n,!0)));var d=0,f=Pl;do{var p=f,h=ts(p),g=h.top,m=h.bottom,v=h.left,b=h.right,y=h.width,w=h.height,x=void 0,k=void 0,_=p.scrollWidth,C=p.scrollHeight,E=Ja(p),T=p.scrollLeft,S=p.scrollTop;p===c?(x=y<_&&("auto"===E.overflowX||"scroll"===E.overflowX||"visible"===E.overflowX),k=w<C&&("auto"===E.overflowY||"scroll"===E.overflowY||"visible"===E.overflowY)):(x=y<_&&("auto"===E.overflowX||"scroll"===E.overflowX),k=w<C&&("auto"===E.overflowY||"scroll"===E.overflowY));var D=x&&(Math.abs(b-o)<=s&&T+y<_)-(Math.abs(v-o)<=s&&!!T),A=k&&(Math.abs(m-a)<=s&&S+w<C)-(Math.abs(g-a)<=s&&!!S);if(!Fl[d])for(var O=0;O<=d;O++)Fl[O]||(Fl[O]={});Fl[d].vx==D&&Fl[d].vy==A&&Fl[d].el===p||(Fl[d].el=p,Fl[d].vx=D,Fl[d].vy=A,clearInterval(Fl[d].pid),0==D&&0==A||(u=!0,Fl[d].pid=setInterval(function(){r&&0===this.layer&&fl.active._onTouchMove(Rl);var t=Fl[this.layer].vy?Fl[this.layer].vy*l:0,n=Fl[this.layer].vx?Fl[this.layer].vx*l:0;"function"==typeof i&&"continue"!==i.call(fl.dragged.parentNode[hs],n,t,e,Rl,Fl[this.layer].el)||us(Fl[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==c&&(f=ss(f,!1)));Ul=u}}),30);function Yl(e,t,n){const r=e.slice();return r[16]=t[n],r}function ql(e,t){let n,r,i,o,a,s;function l(...e){return t[10](t[16],...e)}return r=new un({props:{c:t[16],isFocused:t[4].selectedCardId===t[16].id}}),{key:e,first:null,c(){n=C("div"),Se(r.$$.fragment),i=S(),$(n,"class","card-container bg-white hover:bg-light-100-50 dark:bg-dark-100 dark:hover:bg-dark-100-50 mb-2 rounded-sm"),this.first=n},m(e,t){x(e,n,t),De(r,n,null),w(n,i),o=!0,a||(s=A(n,"click",l),a=!0)},p(e,n){t=e;const i={};1&n&&(i.c=t[16]),17&n&&(i.isFocused=t[4].selectedCardId===t[16].id),r.$set(i)},i(e){o||(me(r.$$.fragment,e),o=!0)},o(e){ve(r.$$.fragment,e),o=!1},d(e){e&&k(n),Ae(r),a=!1,s()}}}function Vl(e){let t,n,r,i,a,s,l,c,u,d,f,p,h,g,m,v,b,y,_,E=[],T=new Map;i=new mn({props:{isOpen:e[3],index:e[0].index,hasMore:e[1]}}),i.$on("emit",e[6]),c=new At({props:{content:e[0].title}}),c.$on("updateTitle",e[8]);let D=e[0].cards;const M=e=>e[16].id;for(let t=0;t<D.length;t+=1){let n=Yl(e,D,t),r=M(n);T.set(r,E[t]=ql(r,n))}return{c(){t=C("div"),n=C("div"),r=C("div"),Se(i.$$.fragment),a=S(),s=C("div"),l=C("div"),Se(c.$$.fragment),u=S(),d=C("button"),d.innerHTML='<svg class="w-6 h-6 mr-1" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>',f=S(),p=C("div");for(let e=0;e<E.length;e+=1)E[e].c();g=S(),m=C("div"),v=C("input"),$(r,"class","relative inline-block text-left mt-6"),$(n,"class","flex absolute top-0 right-0 mt-3 mr-2 cursor-pointer"),$(l,"class","flex min-w-0 flex-grow"),$(d,"type","button"),$(d,"class","text-light opacity-75 hover:opacity-100"),$(d,"aria-haspopup","true"),$(d,"aria-expanded","true"),$(s,"class","flex items-center"),$(p,"class","cards h-full mt-2 pr-1 overflow-y-auto"),$(p,"data-list",h=e[0].id),$(v,"class","bg-transparent inline-block w-full focus:bg-white dark:focus:bg-dark-100 p-2 rounded-sm border border-transparent focus:border-indigo-500 placeholder-light dark:placeholder-dark"),$(v,"type","text"),$(v,"placeholder","Add a card..."),$(m,"class","w-full mt-2"),$(t,"class","flex flex-col list bg-light-200 dark:bg-dark-200 h-auto max-h-full relative w-80 rounded mr-4 text-light dark:text-dark p-2 shadow")},m(o,h){x(o,t,h),w(t,n),w(n,r),De(i,r,null),w(t,a),w(t,s),w(s,l),De(c,l,null),w(s,u),w(s,d),w(t,f),w(t,p);for(let e=0;e<E.length;e+=1)E[e].m(p,null);e[11](p),w(t,g),w(t,m),w(m,v),b=!0,y||(_=[A(d,"click",e[9]),A(v,"keyup",O(e[7]))],y=!0)},p(e,[t]){const n={};8&t&&(n.isOpen=e[3]),1&t&&(n.index=e[0].index),2&t&&(n.hasMore=e[1]),i.$set(n);const r={};if(1&t&&(r.content=e[0].title),c.$set(r),49&t){const n=e[0].cards;he(),E=Ce(E,t,M,1,e,n,T,p,ke,ql,null,Yl),ge()}(!b||1&t&&h!==(h=e[0].id))&&$(p,"data-list",h)},i(e){if(!b){me(i.$$.fragment,e),me(c.$$.fragment,e);for(let e=0;e<D.length;e+=1)me(E[e]);b=!0}},o(e){ve(i.$$.fragment,e),ve(c.$$.fragment,e);for(let e=0;e<E.length;e+=1)ve(E[e]);b=!1},d(n){n&&k(t),Ae(i),Ae(c);for(let e=0;e<E.length;e+=1)E[e].d();e[11](null),y=!1,o(_)}}}function Wl(e,t,n){let r;c(e,Ia,e=>n(4,r=e));var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let o,a,{list:s}=t,{hasMore:l}=t,u=!1;const d=W(),f=(e,t)=>{d("cardEdit",{cardId:e,listIndex:t})},p=()=>{clearTimeout(a),a=window.setTimeout(()=>{let e=o.querySelectorAll(".card");e.length&&e[e.length-1].scrollIntoView({behavior:"smooth",block:"end"})},100)};q(()=>{fl.create(o,{group:"cardList",draggable:".card-container",ghostClass:"card--ghost",chosenClass:"card--chosen",dragClass:"card--drag",onEnd:e=>i(void 0,void 0,void 0,(function*(){yield r.moveCard({boardId:s.boardId,from:{list:e.from.dataset.list,index:e.oldDraggableIndex},to:{list:e.to.dataset.list,index:e.newDraggableIndex}}),Ia.set(r)}))})});return e.$$set=e=>{"list"in e&&n(0,s=e.list),"hasMore"in e&&n(1,l=e.hasMore)},[s,l,o,u,r,f,e=>i(void 0,void 0,void 0,(function*(){"move"===e.detail[0]?(yield r.swapLists(s.boardId,e.detail[1]),Ia.set(r)):"create"===e.detail[0]?d("create",e.detail[1]):"delete"===e.detail[0]&&d("delete",{message:"Are you sure you want to delete this list?",onConfirm(){r.deleteList(s.boardId,s.id),Ia.set(r)}}),n(3,u=!1)})),e=>i(void 0,void 0,void 0,(function*(){"Enter"==e.key&&(e.target.value&&(yield r.addNewCard(s,e.target.value),Ia.set(r),p()),e.target.value="")})),e=>i(void 0,void 0,void 0,(function*(){yield r.updateListTitle(s.boardId,s.id,e.detail)})),e=>n(3,u=!u),(e,t)=>f(e.id,s.index),function(e){Z[e?"unshift":"push"](()=>{o=e,n(2,o)})}]}fl.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?Ha(document,"dragover",this._handleAutoScroll):Ha(document,this.options.supportPointer?"pointermove":t.touches?"touchmove":"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?Ka(document,"dragover",this._handleAutoScroll):(Ka(document,"pointermove",this._handleFallbackAutoScroll),Ka(document,"touchmove",this._handleFallbackAutoScroll),Ka(document,"mousemove",this._handleFallbackAutoScroll)),Hl(),zl(),clearTimeout(Wa),Wa=void 0},nulling:function(){Rl=Nl=Pl=Ul=Bl=Ll=jl=null,Fl.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(r,i);if(Rl=e,t||ja||La||Ba){Kl(e,this.options,o,t);var a=ss(o,!0);!Ul||Bl&&r===Ll&&i===jl||(Bl&&Hl(),Bl=setInterval((function(){var o=ss(document.elementFromPoint(r,i),!0);o!==a&&(a=o,zl()),Kl(e,n.options,o,t)}),10),Ll=r,jl=i)}else{if(!this.options.bubbleScroll||ss(o,!0)===es())return void zl();Kl(e,this.options,ss(o,!1),!1)}}},Object.assign(e,{pluginName:"scroll",initializeByDefault:!0})}),fl.mount(Il,Ml),fl.mount(new function(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){cl=e.dragEl},dragOverValid:function(e){var t=e.completed,n=e.target,r=e.changed,i=e.cancel;if(e.activeSortable.options.swap){var o=this.options;if(n&&n!==this.sortable.el){var a=cl;!1!==(0,e.onMove)(n)?(Xa(n,o.swapClass,!0),cl=n):cl=null,a&&a!==cl&&Xa(a,o.swapClass,!1)}r(),t(!0),i()}},drop:function(e){var t,n,r,i,o,a,s=e.activeSortable,l=e.putSortable,c=e.dragEl,u=l||this.sortable,d=this.options;cl&&Xa(cl,d.swapClass,!1),cl&&(d.swap||l&&l.options.swap)&&c!==cl&&(u.captureAnimationState(),u!==s&&s.captureAnimationState(),a=(n=cl).parentNode,(o=(t=c).parentNode)&&a&&!o.isEqualNode(n)&&!a.isEqualNode(t)&&(r=os(t),i=os(n),o.isEqualNode(a)&&r<i&&i++,o.insertBefore(n,o.children[r]),a.insertBefore(t,a.children[i])),u.animateAll(),u!==s&&s.animateAll())},nulling:function(){cl=null}},Object.assign(e,{pluginName:"swap",eventProperties:function(){return{swapItem:cl}}})}),fl.mount(new function(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?Ha(document,"pointerup",this._deselectMultiDrag):(Ha(document,"mouseup",this._deselectMultiDrag),Ha(document,"touchend",this._deselectMultiDrag)),Ha(document,"keydown",this._checkKeyDown),Ha(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,n){var r="";Cl.length&&wl===e?Cl.forEach((function(e,t){r+=(t?", ":"")+e.textContent})):r=n.textContent,t.setData("Text",r)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){xl=e.dragEl},delayEnded:function(){this.isMultiDrag=~Cl.indexOf(xl)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var r=0;r<Cl.length;r++)El.push(ds(Cl[r])),El[r].sortableIndex=Cl[r].sortableIndex,El[r].draggable=!1,El[r].style["will-change"]="",Xa(El[r],this.options.selectedClass,!1),Cl[r]===xl&&Xa(El[r],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.dispatchSortableEvent,n=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Cl.length&&wl===e.sortable&&(Al(!0,e.rootEl),t("clone"),n()))},showClone:function(e){var t=e.cloneNowShown,n=e.cancel;this.isMultiDrag&&(Al(!1,e.rootEl),El.forEach((function(e){Ja(e,"display","")})),t(),_l=!1,n())},hideClone:function(e){var t=this,n=e.cloneNowHidden,r=e.cancel;this.isMultiDrag&&(El.forEach((function(e){Ja(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),n(),_l=!0,r())},dragStartGlobal:function(e){!this.isMultiDrag&&wl&&wl.multiDrag._deselectMultiDrag(),Cl.forEach((function(e){e.sortableIndex=os(e)})),Cl=Cl.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),Dl=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){Cl.forEach((function(e){e!==xl&&Ja(e,"position","absolute")}));var r=ts(xl,!1,!0,!0);Cl.forEach((function(e){e!==xl&&fs(e,r)})),Sl=!0,Tl=!0}n.animateAll((function(){Sl=!1,Tl=!1,t.options.animation&&Cl.forEach((function(e){ps(e)})),t.options.sort&&Ol()}))}},dragOver:function(e){var t=e.completed,n=e.cancel;Sl&&~Cl.indexOf(e.target)&&(t(!1),n())},revert:function(e){var t=e.fromSortable,n=e.rootEl,r=e.sortable,i=e.dragRect;Cl.length>1&&(Cl.forEach((function(e){r.addAnimationState({target:e,rect:Sl?ts(e):i}),ps(e),e.fromRect=i,t.removeAnimationState(e)})),Sl=!1,function(e,t){Cl.forEach((function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)}))}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,r=e.activeSortable,i=e.parentEl,o=e.putSortable,a=this.options;if(e.insertion){if(n&&r._hideClone(),Tl=!1,a.animation&&Cl.length>1&&(Sl||!n&&!r.options.sort&&!o)){var s=ts(xl,!1,!0,!0);Cl.forEach((function(e){e!==xl&&(fs(e,s),i.appendChild(e))})),Sl=!0}if(!n)if(Sl||Ol(),Cl.length>1){var l=_l;r._showClone(t),r.options.animation&&!_l&&l&&El.forEach((function(e){r.addAnimationState({target:e,rect:kl}),e.fromRect=kl,e.thisAnimationDuration=null}))}else r._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,r=e.activeSortable;if(Cl.forEach((function(e){e.thisAnimationDuration=null})),r.options.animation&&!n&&r.multiDrag.isMultiDrag){kl=Object.assign({},t);var i=Za(xl,!0);kl.top-=i.f,kl.left-=i.e}},dragOverAnimationComplete:function(){Sl&&(Sl=!1,Ol())},drop:function(e){var t=e.originalEvent,n=e.rootEl,r=e.parentEl,i=e.sortable,o=e.dispatchSortableEvent,a=e.oldIndex,s=e.putSortable,l=s||this.sortable;if(t){var c=this.options,u=r.children;if(!Dl)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Xa(xl,c.selectedClass,!~Cl.indexOf(xl)),~Cl.indexOf(xl))Cl.splice(Cl.indexOf(xl),1),yl=null,bs({sortable:i,rootEl:n,name:"deselect",targetEl:xl,originalEvt:t});else{if(Cl.push(xl),bs({sortable:i,rootEl:n,name:"select",targetEl:xl,originalEvt:t}),t.shiftKey&&yl&&i.el.contains(yl)){var d,f,p=os(yl),h=os(xl);if(~p&&~h&&p!==h)for(h>p?(f=p,d=h):(f=h,d=p+1);f<d;f++)~Cl.indexOf(u[f])||(Xa(u[f],c.selectedClass,!0),Cl.push(u[f]),bs({sortable:i,rootEl:n,name:"select",targetEl:u[f],originalEvt:t}))}else yl=xl;wl=l}if(Dl&&this.isMultiDrag){if((r[hs].options.sort||r!==n)&&Cl.length>1){var g=ts(xl),m=os(xl,":not(."+this.options.selectedClass+")");if(!Tl&&c.animation&&(xl.thisAnimationDuration=null),l.captureAnimationState(),!Tl&&(c.animation&&(xl.fromRect=g,Cl.forEach((function(e){if(e.thisAnimationDuration=null,e!==xl){var t=Sl?ts(e):g;e.fromRect=t,l.addAnimationState({target:e,rect:t})}}))),Ol(),Cl.forEach((function(e){u[m]?r.insertBefore(e,u[m]):r.appendChild(e),m++})),a===os(xl))){var v=!1;Cl.forEach((function(e){e.sortableIndex===os(e)||(v=!0)})),v&&o("update")}Cl.forEach((function(e){ps(e)})),l.animateAll()}wl=l}(n===r||s&&"clone"!==s.lastPutMode)&&El.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=Dl=!1,El.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Ka(document,"pointerup",this._deselectMultiDrag),Ka(document,"mouseup",this._deselectMultiDrag),Ka(document,"touchend",this._deselectMultiDrag),Ka(document,"keydown",this._checkKeyDown),Ka(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==Dl&&Dl||wl!==this.sortable||e&&Va(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;Cl.length;){var t=Cl[0];Xa(t,this.options.selectedClass,!1),Cl.shift(),bs({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Object.assign(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[hs];t&&t.options.multiDrag&&!~Cl.indexOf(e)&&(wl&&wl!==t&&(wl.multiDrag._deselectMultiDrag(),wl=t),Xa(e,t.options.selectedClass,!0),Cl.push(e))},deselect:function(e){var t=e.parentNode[hs],n=Cl.indexOf(e);t&&t.options.multiDrag&&~n&&(Xa(e,t.options.selectedClass,!1),Cl.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return Cl.forEach((function(r){var i;t.push({multiDragElement:r,index:r.sortableIndex}),i=Sl&&r!==xl?-1:Sl?os(r,":not(."+e.options.selectedClass+")"):os(r),n.push({multiDragElement:r,index:i})})),{items:[].concat(Cl),clones:[].concat(El),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})});class Gl extends $e{constructor(e){super(),Oe(this,e,Wl,Vl,s,{list:0,hasMore:1})}}const Xl=e=>({isOpen:1&e}),Jl=e=>({isOpen:e[0]});function Zl(e){let t,n,r,i,a,s,l,c;const d=e[4].default,h=u(d,e,e[3],Jl);return{c(){t=C("div"),n=C("div"),h&&h.c(),$(n,"class","bg-light-200 mt-24 w-3/4 md:w-2/3 xl:w-1/2 mx-auto rounded py-2 shadow-lg dark:bg-dark-200"),$(t,"class","fixed w-full top-0 left-0 h-screen z-10 bg-dark-300-75")},m(o,a){x(o,t,a),w(t,n),h&&h.m(n,null),s=!0,l||(c=[p(r=e[1].call(null,n)),p(i=e[2].call(null,t))],l=!0)},p(e,t){h&&h.p&&9&t&&f(h,d,e,e[3],t,Xl,Jl)},i(e){s||(me(h,e),oe(()=>{a||(a=ye(t,Ot,{duration:175},!0)),a.run(1)}),s=!0)},o(e){ve(h,e),a||(a=ye(t,Ot,{duration:175},!1)),a.run(0),s=!1},d(e){e&&k(t),h&&h.d(e),e&&a&&a.end(),l=!1,o(c)}}}function Ql(e){let t,n,r=e[0]&&Zl(e);return{c(){r&&r.c(),t=D()},m(e,i){r&&r.m(e,i),x(e,t,i),n=!0},p(e,[n]){e[0]?r?(r.p(e,n),1&n&&me(r,1)):(r=Zl(e),r.c(),me(r,1),r.m(t.parentNode,t)):r&&(he(),ve(r,1,1,()=>{r=null}),ge())},i(e){n||(me(r),n=!0)},o(e){ve(r),n=!1},d(e){r&&r.d(e),e&&k(t)}}}function ec(e,t,n){let{$$slots:r={},$$scope:i}=t,{isOpen:o}=t;const a=W();return e.$$set=e=>{"isOpen"in e&&n(0,o=e.isOpen),"$$scope"in e&&n(3,i=e.$$scope)},[o,e=>Ht(e,()=>{a("close")}),()=>{const e=e=>{"Escape"===e.key&&a("close")};return window.addEventListener("keydown",e),{destroy(){window.removeEventListener("keydown",e)}}},i,r]}class tc extends $e{constructor(e){super(),Oe(this,e,ec,Ql,s,{isOpen:0})}}function nc(e){let t,n,r,i,a,s,l,c,u,d;return{c(){t=C("div"),n=C("h3"),r=T(e[1]),i=S(),a=C("div"),s=C("button"),s.textContent="Close",l=S(),c=C("button"),c.textContent="Confirm",$(n,"class","text-2xl text-light dark:text-dark mb-4"),$(s,"class","mt-4 mr-2 text-light dark:text-white hover:text-white border border-gray-500 w-40 hover:bg-gray-500 text-xl font-bold py-2 px-4 rounded"),$(c,"class","mt-4 bg-indigo-600 w-40 hover:bg-indigo-700 text-white text-xl font-bold py-2 px-4 rounded"),$(a,"class","flex justify-end"),$(t,"class","p-4")},m(o,f){x(o,t,f),w(t,n),w(n,r),w(t,i),w(t,a),w(a,s),w(a,l),w(a,c),u||(d=[A(s,"click",e[2]),A(c,"click",e[3])],u=!0)},p(e,t){2&t&&M(r,e[1])},d(e){e&&k(t),u=!1,o(d)}}}function rc(e){let t,n;return t=new tc({props:{isOpen:e[0],$$slots:{default:[nc]},$$scope:{ctx:e}}}),t.$on("close",e[2]),{c(){Se(t.$$.fragment)},m(e,r){De(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.isOpen=e[0]),130&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(me(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function ic(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let{isConfirmModalOpen:i}=t,{modalMessage:o}=t,{onConfirm:a}=t;const s=W();return e.$$set=e=>{"isConfirmModalOpen"in e&&n(0,i=e.isConfirmModalOpen),"modalMessage"in e&&n(1,o=e.modalMessage),"onConfirm"in e&&n(4,a=e.onConfirm)},[i,o,e=>{s("close")},e=>r(void 0,void 0,void 0,(function*(){yield a(),s("close")})),a]}class oc extends $e{constructor(e){super(),Oe(this,e,ic,rc,s,{isConfirmModalOpen:0,modalMessage:1,onConfirm:4})}}const ac=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],sc={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:e=>"undefined"!=typeof console&&console.warn(e),getWeek:e=>{const t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},lc={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:e=>{const t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},cc=(e,t=2)=>("000"+e).slice(-1*t),uc=e=>!0===e?1:0;function dc(e,t){let n;return function(){clearTimeout(n),n=setTimeout(()=>e.apply(this,arguments),t)}}const fc=e=>e instanceof Array?e:[e];function pc(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function hc(e,t,n){const r=window.document.createElement(e);return t=t||"",n=n||"",r.className=t,void 0!==n&&(r.textContent=n),r}function gc(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function mc(e,t){const n=hc("div","numInputWrapper"),r=hc("input","numInput "+e),i=hc("span","arrowUp"),o=hc("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?r.type="number":(r.type="text",r.pattern="\\d*"),void 0!==t)for(const e in t)r.setAttribute(e,t[e]);return n.appendChild(r),n.appendChild(i),n.appendChild(o),n}function vc(e){try{if("function"==typeof e.composedPath){return e.composedPath()[0]}return e.target}catch(t){return e.target}}const bc=()=>{},yc=(e,t,n)=>n.months[t?"shorthand":"longhand"][e],wc={D:bc,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:(e,t)=>{e.setHours(parseFloat(t))},H:(e,t)=>{e.setHours(parseFloat(t))},J:(e,t)=>{e.setDate(parseFloat(t))},K:(e,t,n)=>{e.setHours(e.getHours()%12+12*uc(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:(e,t)=>{e.setSeconds(parseFloat(t))},U:(e,t)=>new Date(1e3*parseFloat(t)),W:function(e,t,n){const r=parseInt(t),i=new Date(e.getFullYear(),0,2+7*(r-1),0,0,0,0);return i.setDate(i.getDate()-i.getDay()+n.firstDayOfWeek),i},Y:(e,t)=>{e.setFullYear(parseFloat(t))},Z:(e,t)=>new Date(t),d:(e,t)=>{e.setDate(parseFloat(t))},h:(e,t)=>{e.setHours(parseFloat(t))},i:(e,t)=>{e.setMinutes(parseFloat(t))},j:(e,t)=>{e.setDate(parseFloat(t))},l:bc,m:(e,t)=>{e.setMonth(parseFloat(t)-1)},n:(e,t)=>{e.setMonth(parseFloat(t)-1)},s:(e,t)=>{e.setSeconds(parseFloat(t))},u:(e,t)=>new Date(parseFloat(t)),w:bc,y:(e,t)=>{e.setFullYear(2e3+parseFloat(t))}},xc={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},kc={Z:e=>e.toISOString(),D:function(e,t,n){return t.weekdays.shorthand[kc.w(e,t,n)]},F:function(e,t,n){return yc(kc.n(e,t,n)-1,!1,t)},G:function(e,t,n){return cc(kc.h(e,t,n))},H:e=>cc(e.getHours()),J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:(e,t)=>t.amPM[uc(e.getHours()>11)],M:function(e,t){return yc(e.getMonth(),!0,t)},S:e=>cc(e.getSeconds()),U:e=>e.getTime()/1e3,W:function(e,t,n){return n.getWeek(e)},Y:e=>cc(e.getFullYear(),4),d:e=>cc(e.getDate()),h:e=>e.getHours()%12?e.getHours()%12:12,i:e=>cc(e.getMinutes()),j:e=>e.getDate(),l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:e=>cc(e.getMonth()+1),n:e=>e.getMonth()+1,s:e=>e.getSeconds(),u:e=>e.getTime(),w:e=>e.getDay(),y:e=>String(e.getFullYear()).substring(2)},_c=({config:e=sc,l10n:t=lc,isMobile:n=!1})=>(r,i,o)=>{const a=o||t;return void 0===e.formatDate||n?i.split("").map((t,n,i)=>kc[t]&&"\\"!==i[n-1]?kc[t](r,a,e):"\\"!==t?t:"").join(""):e.formatDate(r,i,a)},Cc=({config:e=sc,l10n:t=lc})=>(n,r,i,o)=>{if(0!==n&&!n)return;const a=o||t;let s;const l=n;if(n instanceof Date)s=new Date(n.getTime());else if("string"!=typeof n&&void 0!==n.toFixed)s=new Date(n);else if("string"==typeof n){const t=r||(e||sc).dateFormat,o=String(n).trim();if("today"===o)s=new Date,i=!0;else if(/Z$/.test(o)||/GMT$/.test(o))s=new Date(n);else if(e&&e.parseDate)s=e.parseDate(n,t);else{s=e&&e.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);let r,i=[];for(let e=0,o=0,l="";e<t.length;e++){const c=t[e],u="\\"===c,d="\\"===t[e-1]||u;if(xc[c]&&!d){l+=xc[c];const e=new RegExp(l).exec(n);e&&(r=!0)&&i["Y"!==c?"push":"unshift"]({fn:wc[c],val:e[++o]})}else u||(l+=".");i.forEach(({fn:e,val:t})=>s=e(s,t,a)||s)}s=r?s:void 0}}if(s instanceof Date&&!isNaN(s.getTime()))return!0===i&&s.setHours(0,0,0,0),s;e.errorHandler(new Error("Invalid date provided: "+l))};function Ec(e,t,n=!0){return!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}const Tc=864e5;"function"!=typeof Object.assign&&(Object.assign=function(e,...t){if(!e)throw TypeError("Cannot convert undefined or null to object");for(const n of t)n&&Object.keys(n).forEach(t=>e[t]=n[t]);return e});function Sc(e,t){const n={config:Object.assign(Object.assign({},sc),Ac.defaultConfig),l10n:lc};function r(e){return e.bind(n)}function i(){const e=n.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==n.calendarContainer&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),void 0!==n.daysContainer){const t=(n.days.offsetWidth+1)*e.showMonths;n.daysContainer.style.width=t+"px",n.calendarContainer.style.width=t+(void 0!==n.weekWrapper?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}}))}function o(e){if(0===n.selectedDates.length){const e=void 0!==n.config.minDate?new Date(n.config.minDate.getTime()):new Date,{hours:t,minutes:r,seconds:i}=l();e.setHours(t,r,i,0),n.setDate(e,!1)}void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();const t="keydown"===e.type,r=vc(e),i=r;void 0!==n.amPM&&r===n.amPM&&(n.amPM.textContent=n.l10n.amPM[uc(n.amPM.textContent===n.l10n.amPM[0])]);const o=parseFloat(i.getAttribute("min")),a=parseFloat(i.getAttribute("max")),s=parseFloat(i.getAttribute("step")),l=parseInt(i.value,10),c=e.delta||(t?38===e.which?1:-1:0);let u=l+s*c;if(void 0!==i.value&&2===i.value.length){const e=i===n.hourElement,t=i===n.minuteElement;u<o?(u=a+u+uc(!e)+(uc(e)&&uc(!n.amPM)),t&&g(void 0,-1,n.hourElement)):u>a&&(u=i===n.hourElement?u-a-uc(!n.amPM):o,t&&g(void 0,1,n.hourElement)),n.amPM&&e&&(1===s?u+l===23:Math.abs(u-l)>s)&&(n.amPM.textContent=n.l10n.amPM[uc(n.amPM.textContent===n.l10n.amPM[0])]),i.value=cc(u)}}(e);const t=n._input.value;a(),Z(),n._input.value!==t&&n._debouncedChange()}function a(){if(void 0===n.hourElement||void 0===n.minuteElement)return;let e=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,t=(parseInt(n.minuteElement.value,10)||0)%60,r=void 0!==n.secondElement?(parseInt(n.secondElement.value,10)||0)%60:0;var i,o;void 0!==n.amPM&&(i=e,o=n.amPM.textContent,e=i%12+12*uc(o===n.l10n.amPM[1]));const a=void 0!==n.config.minTime||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&0===Ec(n.latestSelectedDateObj,n.config.minDate,!0);if(void 0!==n.config.maxTime||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&0===Ec(n.latestSelectedDateObj,n.config.maxDate,!0)){const i=void 0!==n.config.maxTime?n.config.maxTime:n.config.maxDate;e=Math.min(e,i.getHours()),e===i.getHours()&&(t=Math.min(t,i.getMinutes())),t===i.getMinutes()&&(r=Math.min(r,i.getSeconds()))}if(a){const i=void 0!==n.config.minTime?n.config.minTime:n.config.minDate;e=Math.max(e,i.getHours()),e===i.getHours()&&(t=Math.max(t,i.getMinutes())),t===i.getMinutes()&&(r=Math.max(r,i.getSeconds()))}c(e,t,r)}function s(e){const t=e||n.latestSelectedDateObj;t&&c(t.getHours(),t.getMinutes(),t.getSeconds())}function l(){let e=n.config.defaultHour,t=n.config.defaultMinute,r=n.config.defaultSeconds;if(void 0!==n.config.minDate){const i=n.config.minDate.getHours(),o=n.config.minDate.getMinutes();e=Math.max(e,i),e===i&&(t=Math.max(o,t)),e===i&&t===o&&(r=n.config.minDate.getSeconds())}if(void 0!==n.config.maxDate){const i=n.config.maxDate.getHours(),o=n.config.maxDate.getMinutes();e=Math.min(e,i),e===i&&(t=Math.min(o,t)),e===i&&t===o&&(r=n.config.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:r}}function c(e,t,r){void 0!==n.latestSelectedDateObj&&n.latestSelectedDateObj.setHours(e%24,t,r||0,0),n.hourElement&&n.minuteElement&&!n.isMobile&&(n.hourElement.value=cc(n.config.time_24hr?e:(12+e)%12+12*uc(e%12==0)),n.minuteElement.value=cc(t),void 0!==n.amPM&&(n.amPM.textContent=n.l10n.amPM[uc(e>=12)]),void 0!==n.secondElement&&(n.secondElement.value=cc(r)))}function u(e){const t=vc(e),n=parseInt(t.value)+(e.delta||0);(n/1e3>1||"Enter"===e.key&&!/[^\d]/.test(n.toString()))&&O(n)}function d(e,t,r,i){return t instanceof Array?t.forEach(t=>d(e,t,r,i)):e instanceof Array?e.forEach(e=>d(e,t,r,i)):(e.addEventListener(t,r,i),void n._handlers.push({element:e,event:t,handler:r,options:i}))}function f(){V("onChange")}function p(e,t){const r=void 0!==e?n.parseDate(e):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),i=n.currentYear,o=n.currentMonth;try{void 0!==r&&(n.currentYear=r.getFullYear(),n.currentMonth=r.getMonth())}catch(e){e.message="Invalid date supplied: "+r,n.config.errorHandler(e)}t&&n.currentYear!==i&&(V("onYearChange"),k()),!t||n.currentYear===i&&n.currentMonth===o||V("onMonthChange"),n.redraw()}function h(e){const t=vc(e);~t.className.indexOf("arrow")&&g(e,t.classList.contains("arrowUp")?1:-1)}function g(e,t,n){const r=e&&vc(e),i=n||r&&r.parentNode&&r.parentNode.firstChild,o=W("increment");o.delta=t,i&&i.dispatchEvent(o)}function m(e,t,r,i){const o=$(t,!0),a=hc("span","flatpickr-day "+e,t.getDate().toString());return a.dateObj=t,a.$i=i,a.setAttribute("aria-label",n.formatDate(t,n.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===Ec(t,n.now)&&(n.todayDateElem=a,a.classList.add("today"),a.setAttribute("aria-current","date")),o?(a.tabIndex=-1,G(t)&&(a.classList.add("selected"),n.selectedDateElem=a,"range"===n.config.mode&&(pc(a,"startRange",n.selectedDates[0]&&0===Ec(t,n.selectedDates[0],!0)),pc(a,"endRange",n.selectedDates[1]&&0===Ec(t,n.selectedDates[1],!0)),"nextMonthDay"===e&&a.classList.add("inRange")))):a.classList.add("flatpickr-disabled"),"range"===n.config.mode&&function(e){return!("range"!==n.config.mode||n.selectedDates.length<2)&&(Ec(e,n.selectedDates[0])>=0&&Ec(e,n.selectedDates[1])<=0)}(t)&&!G(t)&&a.classList.add("inRange"),n.weekNumbers&&1===n.config.showMonths&&"prevMonthDay"!==e&&r%7==1&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(t)+"</span>"),V("onDayCreate",a),a}function v(e){e.focus(),"range"===n.config.mode&&N(e)}function b(e){const t=e>0?0:n.config.showMonths-1,r=e>0?n.config.showMonths:-1;for(let i=t;i!=r;i+=e){const t=n.daysContainer.children[i],r=e>0?0:t.children.length-1,o=e>0?t.children.length:-1;for(let n=r;n!=o;n+=e){const e=t.children[n];if(-1===e.className.indexOf("hidden")&&$(e.dateObj))return e}}}function y(e,t){const r=M(document.activeElement||document.body),i=void 0!==e?e:r?document.activeElement:void 0!==n.selectedDateElem&&M(n.selectedDateElem)?n.selectedDateElem:void 0!==n.todayDateElem&&M(n.todayDateElem)?n.todayDateElem:b(t>0?1:-1);void 0===i?n._input.focus():r?function(e,t){const r=-1===e.className.indexOf("Month")?e.dateObj.getMonth():n.currentMonth,i=t>0?n.config.showMonths:-1,o=t>0?1:-1;for(let a=r-n.currentMonth;a!=i;a+=o){const i=n.daysContainer.children[a],s=r-n.currentMonth===a?e.$i+t:t<0?i.children.length-1:0,l=i.children.length;for(let n=s;n>=0&&n<l&&n!=(t>0?l:-1);n+=o){const r=i.children[n];if(-1===r.className.indexOf("hidden")&&$(r.dateObj)&&Math.abs(e.$i-n)>=Math.abs(t))return v(r)}}n.changeMonth(o),y(b(o),0)}(i,t):v(i)}function w(e,t){const r=(new Date(e,t,1).getDay()-n.l10n.firstDayOfWeek+7)%7,i=n.utils.getDaysInMonth((t-1+12)%12,e),o=n.utils.getDaysInMonth(t,e),a=window.document.createDocumentFragment(),s=n.config.showMonths>1,l=s?"prevMonthDay hidden":"prevMonthDay",c=s?"nextMonthDay hidden":"nextMonthDay";let u=i+1-r,d=0;for(;u<=i;u++,d++)a.appendChild(m(l,new Date(e,t-1,u),u,d));for(u=1;u<=o;u++,d++)a.appendChild(m("",new Date(e,t,u),u,d));for(let i=o+1;i<=42-r&&(1===n.config.showMonths||d%7!=0);i++,d++)a.appendChild(m(c,new Date(e,t+1,i%o),i,d));const f=hc("div","dayContainer");return f.appendChild(a),f}function x(){if(void 0===n.daysContainer)return;gc(n.daysContainer),n.weekNumbers&&gc(n.weekNumbers);const e=document.createDocumentFragment();for(let t=0;t<n.config.showMonths;t++){const r=new Date(n.currentYear,n.currentMonth,1);r.setMonth(n.currentMonth+t),e.appendChild(w(r.getFullYear(),r.getMonth()))}n.daysContainer.appendChild(e),n.days=n.daysContainer.firstChild,"range"===n.config.mode&&1===n.selectedDates.length&&N()}function k(){if(n.config.showMonths>1||"dropdown"!==n.config.monthSelectorType)return;const e=function(e){return!(void 0!==n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&e<n.config.minDate.getMonth())&&!(void 0!==n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()&&e>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(let t=0;t<12;t++){if(!e(t))continue;const r=hc("option","flatpickr-monthDropdown-month");r.value=new Date(n.currentYear,t).getMonth().toString(),r.textContent=yc(t,n.config.shorthandCurrentMonth,n.l10n),r.tabIndex=-1,n.currentMonth===t&&(r.selected=!0),n.monthsDropdownContainer.appendChild(r)}}function _(){const e=hc("div","flatpickr-month"),t=window.document.createDocumentFragment();let r;n.config.showMonths>1||"static"===n.config.monthSelectorType?r=hc("span","cur-month"):(n.monthsDropdownContainer=hc("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),d(n.monthsDropdownContainer,"change",e=>{const t=vc(e),r=parseInt(t.value,10);n.changeMonth(r-n.currentMonth),V("onMonthChange")}),k(),r=n.monthsDropdownContainer);const i=mc("cur-year",{tabindex:"-1"}),o=i.getElementsByTagName("input")[0];o.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&o.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(o.setAttribute("max",n.config.maxDate.getFullYear().toString()),o.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());const a=hc("div","flatpickr-current-month");return a.appendChild(r),a.appendChild(i),t.appendChild(a),e.appendChild(t),{container:e,yearElement:o,monthElement:r}}function C(){gc(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(let e=n.config.showMonths;e--;){const e=_();n.yearElements.push(e.yearElement),n.monthElements.push(e.monthElement),n.monthNav.appendChild(e.container)}n.monthNav.appendChild(n.nextMonthNav)}function E(){n.weekdayContainer?gc(n.weekdayContainer):n.weekdayContainer=hc("div","flatpickr-weekdays");for(let e=n.config.showMonths;e--;){const e=hc("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(e)}return T(),n.weekdayContainer}function T(){if(!n.weekdayContainer)return;const e=n.l10n.firstDayOfWeek;let t=[...n.l10n.weekdays.shorthand];e>0&&e<t.length&&(t=[...t.splice(e,t.length),...t.splice(0,e)]);for(let e=n.config.showMonths;e--;)n.weekdayContainer.children[e].innerHTML=`\n      <span class='flatpickr-weekday'>\n        ${t.join("</span><span class='flatpickr-weekday'>")}\n      </span>\n      `}function S(e,t=!0){const r=t?e:e-n.currentMonth;r<0&&!0===n._hidePrevMonthArrow||r>0&&!0===n._hideNextMonthArrow||(n.currentMonth+=r,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,V("onYearChange"),k()),x(),V("onMonthChange"),X())}function D(e){return!(!n.config.appendTo||!n.config.appendTo.contains(e))||n.calendarContainer.contains(e)}function A(e){if(n.isOpen&&!n.config.inline){const t=vc(e),r=D(t),i=t===n.input||t===n.altInput||n.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(n.input)||~e.path.indexOf(n.altInput)),a="blur"===e.type?i&&e.relatedTarget&&!D(e.relatedTarget):!i&&!r&&!D(e.relatedTarget),s=!n.config.ignoredFocusElements.some(e=>e.contains(t));a&&s&&(void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement&&""!==n.input.value&&void 0!==n.input.value&&o(),n.close(),n.config&&"range"===n.config.mode&&1===n.selectedDates.length&&(n.clear(!1),n.redraw()))}}function O(e){if(!e||n.config.minDate&&e<n.config.minDate.getFullYear()||n.config.maxDate&&e>n.config.maxDate.getFullYear())return;const t=e,r=n.currentYear!==t;n.currentYear=t||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),r&&(n.redraw(),V("onYearChange"),k())}function $(e,t=!0){var r;const i=n.parseDate(e,void 0,t);if(n.config.minDate&&i&&Ec(i,n.config.minDate,void 0!==t?t:!n.minDateHasTime)<0||n.config.maxDate&&i&&Ec(i,n.config.maxDate,void 0!==t?t:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&0===n.config.disable.length)return!0;if(void 0===i)return!1;const o=!!n.config.enable,a=null!==(r=n.config.enable)&&void 0!==r?r:n.config.disable;for(let e,t=0;t<a.length;t++){if(e=a[t],"function"==typeof e&&e(i))return o;if(e instanceof Date&&void 0!==i&&e.getTime()===i.getTime())return o;if("string"==typeof e){const t=n.parseDate(e,void 0,!0);return t&&t.getTime()===i.getTime()?o:!o}if("object"==typeof e&&void 0!==i&&e.from&&e.to&&i.getTime()>=e.from.getTime()&&i.getTime()<=e.to.getTime())return o}return!o}function M(e){return void 0!==n.daysContainer&&(-1===e.className.indexOf("hidden")&&-1===e.className.indexOf("flatpickr-disabled")&&n.daysContainer.contains(e))}function I(e){!(e.target===n._input)||!(n.selectedDates.length>0||n._input.value.length>0)||e.relatedTarget&&D(e.relatedTarget)||n.setDate(n._input.value,!0,e.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function P(t){const r=vc(t),i=n.config.wrap?e.contains(r):r===n._input,s=n.config.allowInput,l=n.isOpen&&(!s||!i),c=n.config.inline&&i&&!s;if(13===t.keyCode&&i){if(s)return n.setDate(n._input.value,!0,r===n.altInput?n.config.altFormat:n.config.dateFormat),r.blur();n.open()}else if(D(r)||l||c){const e=!!n.timeContainer&&n.timeContainer.contains(r);switch(t.keyCode){case 13:e?(t.preventDefault(),o(),z()):H(t);break;case 27:t.preventDefault(),z();break;case 8:case 46:i&&!n.config.allowInput&&(t.preventDefault(),n.clear());break;case 37:case 39:if(e||i)n.hourElement&&n.hourElement.focus();else if(t.preventDefault(),void 0!==n.daysContainer&&(!1===s||document.activeElement&&M(document.activeElement))){const e=39===t.keyCode?1:-1;t.ctrlKey?(t.stopPropagation(),S(e),y(b(1),0)):y(void 0,e)}break;case 38:case 40:t.preventDefault();const a=40===t.keyCode?1:-1;n.daysContainer&&void 0!==r.$i||r===n.input||r===n.altInput?t.ctrlKey?(t.stopPropagation(),O(n.currentYear-a),y(b(1),0)):e||y(void 0,7*a):r===n.currentYearElement?O(n.currentYear-a):n.config.enableTime&&(!e&&n.hourElement&&n.hourElement.focus(),o(t),n._debouncedChange());break;case 9:if(e){const e=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter(e=>e),i=e.indexOf(r);if(-1!==i){const r=e[i+(t.shiftKey?-1:1)];t.preventDefault(),(r||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(r)&&t.shiftKey&&(t.preventDefault(),n._input.focus())}}if(void 0!==n.amPM&&r===n.amPM)switch(t.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],a(),Z();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],a(),Z()}(i||D(r))&&V("onKeyDown",t)}function N(e){if(1!==n.selectedDates.length||e&&(!e.classList.contains("flatpickr-day")||e.classList.contains("flatpickr-disabled")))return;const t=e?e.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),r=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),i=Math.min(t,n.selectedDates[0].getTime()),o=Math.max(t,n.selectedDates[0].getTime());let a=!1,s=0,l=0;for(let e=i;e<o;e+=Tc)$(new Date(e),!0)||(a=a||e>i&&e<o,e<r&&(!s||e>s)?s=e:e>r&&(!l||e<l)&&(l=e));for(let i=0;i<n.config.showMonths;i++){const o=n.daysContainer.children[i];for(let i=0,f=o.children.length;i<f;i++){const f=o.children[i],p=f.dateObj.getTime(),h=s>0&&p<s||l>0&&p>l;h?(f.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(e=>{f.classList.remove(e)})):a&&!h||(["startRange","inRange","endRange","notAllowed"].forEach(e=>{f.classList.remove(e)}),void 0!==e&&(e.classList.add(t<=n.selectedDates[0].getTime()?"startRange":"endRange"),r<t&&p===r?f.classList.add("startRange"):r>t&&p===r&&f.classList.add("endRange"),p>=s&&(0===l||p<=l)&&(u=r,d=t,(c=p)>Math.min(u,d)&&c<Math.max(u,d))&&f.classList.add("inRange")))}}var c,u,d}function L(){!n.isOpen||n.config.static||n.config.inline||F()}function j(e){return t=>{const r=n.config[`_${e}Date`]=n.parseDate(t,n.config.dateFormat),i=n.config[`_${"min"===e?"max":"min"}Date`];void 0!==r&&(n["min"===e?"minDateHasTime":"maxDateHasTime"]=r.getHours()>0||r.getMinutes()>0||r.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter(e=>$(e)),n.selectedDates.length||"min"!==e||s(r),Z()),n.daysContainer&&(U(),void 0!==r?n.currentYearElement[e]=r.getFullYear().toString():n.currentYearElement.removeAttribute(e),n.currentYearElement.disabled=!!i&&void 0!==r&&i.getFullYear()===r.getFullYear())}}function R(){return n.config.wrap?e.querySelector("[data-input]"):e}function B(){"object"!=typeof n.config.locale&&void 0===Ac.l10ns[n.config.locale]&&n.config.errorHandler(new Error("flatpickr: invalid locale "+n.config.locale)),n.l10n=Object.assign(Object.assign({},Ac.l10ns.default),"object"==typeof n.config.locale?n.config.locale:"default"!==n.config.locale?Ac.l10ns[n.config.locale]:void 0),xc.K=`(${n.l10n.amPM[0]}|${n.l10n.amPM[1]}|${n.l10n.amPM[0].toLowerCase()}|${n.l10n.amPM[1].toLowerCase()})`;void 0===Object.assign(Object.assign({},t),JSON.parse(JSON.stringify(e.dataset||{}))).time_24hr&&void 0===Ac.defaultConfig.time_24hr&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=_c(n),n.parseDate=Cc({config:n.config,l10n:n.l10n})}function F(e){if("function"==typeof n.config.position)return void n.config.position(n,e);if(void 0===n.calendarContainer)return;V("onPreCalendarPosition");const t=e||n._positionElement,r=Array.prototype.reduce.call(n.calendarContainer.children,(e,t)=>e+t.offsetHeight,0),i=n.calendarContainer.offsetWidth,o=n.config.position.split(" "),a=o[0],s=o.length>1?o[1]:null,l=t.getBoundingClientRect(),c=window.innerHeight-l.bottom,u="above"===a||"below"!==a&&c<r&&l.top>r,d=window.pageYOffset+l.top+(u?-r-2:t.offsetHeight+2);if(pc(n.calendarContainer,"arrowTop",!u),pc(n.calendarContainer,"arrowBottom",u),n.config.inline)return;let f=window.pageXOffset+l.left,p=!1,h=!1;"center"===s?(f-=(i-l.width)/2,p=!0):"right"===s&&(f-=i-l.width,h=!0),pc(n.calendarContainer,"arrowLeft",!p&&!h),pc(n.calendarContainer,"arrowCenter",p),pc(n.calendarContainer,"arrowRight",h);const g=window.document.body.offsetWidth-(window.pageXOffset+l.right),m=f+i>window.document.body.offsetWidth,v=g+i>window.document.body.offsetWidth;if(pc(n.calendarContainer,"rightMost",m),!n.config.static)if(n.calendarContainer.style.top=d+"px",m)if(v){const e=function(){let e=null;for(let t=0;t<document.styleSheets.length;t++){const n=document.styleSheets[t];try{n.cssRules}catch(e){continue}e=n;break}return null!=e?e:function(){const e=document.createElement("style");return document.head.appendChild(e),e.sheet}()}();if(void 0===e)return;const t=window.document.body.offsetWidth,r=Math.max(0,t/2-i/2),o=".flatpickr-calendar.centerMost:before",a=".flatpickr-calendar.centerMost:after",s=e.cssRules.length,c=`{left:${l.left}px;right:auto;}`;pc(n.calendarContainer,"rightMost",!1),pc(n.calendarContainer,"centerMost",!0),e.insertRule(`${o},${a}${c}`,s),n.calendarContainer.style.left=r+"px",n.calendarContainer.style.right="auto"}else n.calendarContainer.style.left="auto",n.calendarContainer.style.right=g+"px";else n.calendarContainer.style.left=f+"px",n.calendarContainer.style.right="auto"}function U(){n.config.noCalendar||n.isMobile||(k(),X(),x())}function z(){n._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(n.close,0):n.close()}function H(e){e.preventDefault(),e.stopPropagation();const t=function e(t,n){return n(t)?t:t.parentNode?e(t.parentNode,n):void 0}(vc(e),e=>e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed"));if(void 0===t)return;const r=t,i=n.latestSelectedDateObj=new Date(r.dateObj.getTime()),o=(i.getMonth()<n.currentMonth||i.getMonth()>n.currentMonth+n.config.showMonths-1)&&"range"!==n.config.mode;if(n.selectedDateElem=r,"single"===n.config.mode)n.selectedDates=[i];else if("multiple"===n.config.mode){const e=G(i);e?n.selectedDates.splice(parseInt(e),1):n.selectedDates.push(i)}else"range"===n.config.mode&&(2===n.selectedDates.length&&n.clear(!1,!1),n.latestSelectedDateObj=i,n.selectedDates.push(i),0!==Ec(i,n.selectedDates[0],!0)&&n.selectedDates.sort((e,t)=>e.getTime()-t.getTime()));if(a(),o){const e=n.currentYear!==i.getFullYear();n.currentYear=i.getFullYear(),n.currentMonth=i.getMonth(),e&&(V("onYearChange"),k()),V("onMonthChange")}if(X(),x(),Z(),o||"range"===n.config.mode||1!==n.config.showMonths?void 0!==n.selectedDateElem&&void 0===n.hourElement&&n.selectedDateElem&&n.selectedDateElem.focus():v(r),void 0!==n.hourElement&&void 0!==n.hourElement&&n.hourElement.focus(),n.config.closeOnSelect){const e="single"===n.config.mode&&!n.config.enableTime,t="range"===n.config.mode&&2===n.selectedDates.length&&!n.config.enableTime;(e||t)&&z()}f()}n.parseDate=Cc({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=d,n._setHoursFromDate=s,n._positionCalendar=F,n.changeMonth=S,n.changeYear=O,n.clear=function(e=!0,t=!0){n.input.value="",void 0!==n.altInput&&(n.altInput.value="");void 0!==n.mobileInput&&(n.mobileInput.value="");n.selectedDates=[],n.latestSelectedDateObj=void 0,!0===t&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth());if(!0===n.config.enableTime){const{hours:e,minutes:t,seconds:n}=l();c(e,t,n)}n.redraw(),e&&V("onChange")},n.close=function(){n.isOpen=!1,n.isMobile||(void 0!==n.calendarContainer&&n.calendarContainer.classList.remove("open"),void 0!==n._input&&n._input.classList.remove("active"));V("onClose")},n._createElement=hc,n.destroy=function(){void 0!==n.config&&V("onDestroy");for(let e=n._handlers.length;e--;){const t=n._handlers[e];t.element.removeEventListener(t.event,t.handler,t.options)}if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){const e=n.calendarContainer.parentNode;if(e.lastChild&&e.removeChild(e.lastChild),e.parentNode){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);e.parentNode.removeChild(e)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput);n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly"));["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(e=>{try{delete n[e]}catch(e){}})},n.isEnabled=$,n.jumpToDate=p,n.open=function(e,t=n._positionElement){if(!0===n.isMobile){if(e){e.preventDefault();const t=vc(e);t&&t.blur()}return void 0!==n.mobileInput&&(n.mobileInput.focus(),n.mobileInput.click()),void V("onOpen")}if(n._input.disabled||n.config.inline||!n.config.clickOpens)return;const r=n.isOpen;n.isOpen=!0,r||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),V("onOpen"),F(t));!0===n.config.enableTime&&!0===n.config.noCalendar&&(!1!==n.config.allowInput||void 0!==e&&n.timeContainer.contains(e.relatedTarget)||setTimeout(()=>n.hourElement.select(),50))},n.redraw=U,n.set=function(e,t){if(null!==e&&"object"==typeof e){Object.assign(n.config,e);for(const t in e)void 0!==K[t]&&K[t].forEach(e=>e())}else n.config[e]=t,void 0!==K[e]?K[e].forEach(e=>e()):ac.indexOf(e)>-1&&(n.config[e]=fc(t));n.redraw(),Z(!0)},n.setDate=function(e,t=!1,r=n.config.dateFormat){if(0!==e&&!e||e instanceof Array&&0===e.length)return n.clear(t);Y(e,r),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),p(void 0,t),s(),0===n.selectedDates.length&&n.clear(!1);Z(t),t&&V("onChange")},n.toggle=function(e){if(!0===n.isOpen)return n.close();n.open(e)};const K={locale:[B,T],showMonths:[C,i,E],minDate:[p],maxDate:[p]};function Y(e,t){let r=[];if(e instanceof Array)r=e.map(e=>n.parseDate(e,t));else if(e instanceof Date||"number"==typeof e)r=[n.parseDate(e,t)];else if("string"==typeof e)switch(n.config.mode){case"single":case"time":r=[n.parseDate(e,t)];break;case"multiple":r=e.split(n.config.conjunction).map(e=>n.parseDate(e,t));break;case"range":r=e.split(n.l10n.rangeSeparator).map(e=>n.parseDate(e,t))}else n.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));n.selectedDates=n.config.allowInvalidPreload?r:r.filter(e=>e instanceof Date&&$(e,!1)),"range"===n.config.mode&&n.selectedDates.sort((e,t)=>e.getTime()-t.getTime())}function q(e){return e.slice().map(e=>"string"==typeof e||"number"==typeof e||e instanceof Date?n.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:n.parseDate(e.from,void 0),to:n.parseDate(e.to,void 0)}:e).filter(e=>e)}function V(e,t){if(void 0===n.config)return;const r=n.config[e];if(void 0!==r&&r.length>0)for(let e=0;r[e]&&e<r.length;e++)r[e](n.selectedDates,n.input.value,n,t);"onChange"===e&&(n.input.dispatchEvent(W("change")),n.input.dispatchEvent(W("input")))}function W(e){const t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function G(e){for(let t=0;t<n.selectedDates.length;t++)if(0===Ec(n.selectedDates[t],e))return""+t;return!1}function X(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach((e,t)=>{const r=new Date(n.currentYear,n.currentMonth,1);r.setMonth(n.currentMonth+t),n.config.showMonths>1||"static"===n.config.monthSelectorType?n.monthElements[t].textContent=yc(r.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=r.getMonth().toString(),e.value=r.getFullYear().toString()}),n._hidePrevMonthArrow=void 0!==n.config.minDate&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=void 0!==n.config.maxDate&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function J(e){return n.selectedDates.map(t=>n.formatDate(t,e)).filter((e,t,r)=>"range"!==n.config.mode||n.config.enableTime||r.indexOf(e)===t).join("range"!==n.config.mode?n.config.conjunction:n.l10n.rangeSeparator)}function Z(e=!0){void 0!==n.mobileInput&&n.mobileFormatStr&&(n.mobileInput.value=void 0!==n.latestSelectedDateObj?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=J(n.config.dateFormat),void 0!==n.altInput&&(n.altInput.value=J(n.config.altFormat)),!1!==e&&V("onValueUpdate")}function Q(e){const t=vc(e),r=n.prevMonthNav.contains(t),i=n.nextMonthNav.contains(t);r||i?S(r?-1:1):n.yearElements.indexOf(t)>=0?t.select():t.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):t.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}return function(){n.element=n.input=e,n.isOpen=!1,function(){const i=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],o=Object.assign(Object.assign({},JSON.parse(JSON.stringify(e.dataset||{}))),t),a={};n.config.parseDate=o.parseDate,n.config.formatDate=o.formatDate,Object.defineProperty(n.config,"enable",{get:()=>n.config._enable,set:e=>{n.config._enable=q(e)}}),Object.defineProperty(n.config,"disable",{get:()=>n.config._disable,set:e=>{n.config._disable=q(e)}});const s="time"===o.mode;if(!o.dateFormat&&(o.enableTime||s)){const e=Ac.defaultConfig.dateFormat||sc.dateFormat;a.dateFormat=o.noCalendar||s?"H:i"+(o.enableSeconds?":S":""):e+" H:i"+(o.enableSeconds?":S":"")}if(o.altInput&&(o.enableTime||s)&&!o.altFormat){const e=Ac.defaultConfig.altFormat||sc.altFormat;a.altFormat=o.noCalendar||s?"h:i"+(o.enableSeconds?":S K":" K"):e+` h:i${o.enableSeconds?":S":""} K`}Object.defineProperty(n.config,"minDate",{get:()=>n.config._minDate,set:j("min")}),Object.defineProperty(n.config,"maxDate",{get:()=>n.config._maxDate,set:j("max")});const l=e=>t=>{n.config["min"===e?"_minTime":"_maxTime"]=n.parseDate(t,"H:i:S")};Object.defineProperty(n.config,"minTime",{get:()=>n.config._minTime,set:l("min")}),Object.defineProperty(n.config,"maxTime",{get:()=>n.config._maxTime,set:l("max")}),"time"===o.mode&&(n.config.noCalendar=!0,n.config.enableTime=!0);Object.assign(n.config,a,o);for(let e=0;e<i.length;e++)n.config[i[e]]=!0===n.config[i[e]]||"true"===n.config[i[e]];ac.filter(e=>void 0!==n.config[e]).forEach(e=>{n.config[e]=fc(n.config[e]||[]).map(r)}),n.isMobile=!n.config.disableMobile&&!n.config.inline&&"single"===n.config.mode&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(let e=0;e<n.config.plugins.length;e++){const t=n.config.plugins[e](n)||{};for(const e in t)ac.indexOf(e)>-1?n.config[e]=fc(t[e]).map(r).concat(n.config[e]):void 0===o[e]&&(n.config[e]=t[e])}o.altInputClass||(n.config.altInputClass=R().className+" "+n.config.altInputClass);V("onParseConfig")}(),B(),function(){if(n.input=R(),!n.input)return void n.config.errorHandler(new Error("Invalid input element specified"));n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=hc(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling));n.config.allowInput||n._input.setAttribute("readonly","readonly");n._positionElement=n.config.positionElement||n._input}(),function(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;const e=n.config.defaultDate||("INPUT"!==n.input.nodeName&&"TEXTAREA"!==n.input.nodeName||!n.input.placeholder||n.input.value!==n.input.placeholder?n.input.value:null);e&&Y(e,n.config.dateFormat);n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]);void 0!==n.config.minTime&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i"));void 0!==n.config.maxTime&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i"));n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}(),n.utils={getDaysInMonth:(e=n.currentMonth,t=n.currentYear)=>1===e&&(t%4==0&&t%100!=0||t%400==0)?29:n.l10n.daysInMonth[e]},n.isMobile||function(){const e=window.document.createDocumentFragment();if(n.calendarContainer=hc("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(e.appendChild((n.monthNav=hc("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=hc("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=hc("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,C(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:()=>n.__hidePrevMonthArrow,set(e){n.__hidePrevMonthArrow!==e&&(pc(n.prevMonthNav,"flatpickr-disabled",e),n.__hidePrevMonthArrow=e)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:()=>n.__hideNextMonthArrow,set(e){n.__hideNextMonthArrow!==e&&(pc(n.nextMonthNav,"flatpickr-disabled",e),n.__hideNextMonthArrow=e)}}),n.currentYearElement=n.yearElements[0],X(),n.monthNav)),n.innerContainer=hc("div","flatpickr-innerContainer"),n.config.weekNumbers){const{weekWrapper:e,weekNumbers:t}=function(){n.calendarContainer.classList.add("hasWeeks");const e=hc("div","flatpickr-weekwrapper");e.appendChild(hc("span","flatpickr-weekday",n.l10n.weekAbbreviation));const t=hc("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}();n.innerContainer.appendChild(e),n.weekNumbers=t,n.weekWrapper=e}n.rContainer=hc("div","flatpickr-rContainer"),n.rContainer.appendChild(E()),n.daysContainer||(n.daysContainer=hc("div","flatpickr-days"),n.daysContainer.tabIndex=-1),x(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),e.appendChild(n.innerContainer)}n.config.enableTime&&e.appendChild(function(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");n.timeContainer=hc("div","flatpickr-time"),n.timeContainer.tabIndex=-1;const e=hc("span","flatpickr-time-separator",":"),t=mc("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=t.getElementsByTagName("input")[0];const r=mc("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});n.minuteElement=r.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=cc(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?n.config.defaultHour:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(n.config.defaultHour)),n.minuteElement.value=cc(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():n.config.defaultMinute),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(t),n.timeContainer.appendChild(e),n.timeContainer.appendChild(r),n.config.time_24hr&&n.timeContainer.classList.add("time24hr");if(n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");const e=mc("flatpickr-second");n.secondElement=e.getElementsByTagName("input")[0],n.secondElement.value=cc(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():n.config.defaultSeconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(hc("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(e)}n.config.time_24hr||(n.amPM=hc("span","flatpickr-am-pm",n.l10n.amPM[uc((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM));return n.timeContainer}());pc(n.calendarContainer,"rangeMode","range"===n.config.mode),pc(n.calendarContainer,"animate",!0===n.config.animate),pc(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(e);const t=void 0!==n.config.appendTo&&void 0!==n.config.appendTo.nodeType;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!t&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):void 0!==n.config.appendTo&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){const e=hc("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(e,n.element),e.appendChild(n.element),n.altInput&&e.appendChild(n.altInput),e.appendChild(n.calendarContainer)}n.config.static||n.config.inline||(void 0!==n.config.appendTo?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}(),function(){n.config.wrap&&["open","close","toggle","clear"].forEach(e=>{Array.prototype.forEach.call(n.element.querySelectorAll(`[data-${e}]`),t=>d(t,"click",n[e]))});if(n.isMobile)return void function(){const e=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=hc("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=e,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr));n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d"));n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d"));n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step")));n.input.type="hidden",void 0!==n.altInput&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch(e){}d(n.mobileInput,"change",e=>{n.setDate(vc(e).value,!1,n.mobileFormatStr),V("onChange"),V("onClose")})}();const e=dc(L,50);n._debouncedChange=dc(f,300),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&d(n.daysContainer,"mouseover",e=>{"range"===n.config.mode&&N(vc(e))});d(window.document.body,"keydown",P),n.config.inline||n.config.static||d(window,"resize",e);void 0!==window.ontouchstart?d(window.document,"touchstart",A):d(window.document,"mousedown",A);d(window.document,"focus",A,{capture:!0}),d(n._input,"focus",n.open),d(n._input,"mousedown",n.open),void 0!==n.daysContainer&&(d(n.monthNav,"click",Q),d(n.monthNav,["keyup","increment"],u),d(n.daysContainer,"click",H));if(void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement){const e=e=>vc(e).select();d(n.timeContainer,["increment"],o),d(n.timeContainer,"blur",o,{capture:!0}),d(n.timeContainer,"click",h),d([n.hourElement,n.minuteElement],["focus","click"],e),void 0!==n.secondElement&&d(n.secondElement,"focus",()=>n.secondElement&&n.secondElement.select()),void 0!==n.amPM&&d(n.amPM,"click",e=>{o(e),f()})}n.config.allowInput&&d(n._input,"blur",I)}(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&s(n.config.noCalendar?n.latestSelectedDateObj||n.config.minDate:void 0),Z(!1)),i();const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&a&&F(),V("onReady")}(),n}function Dc(e,t){const n=Array.prototype.slice.call(e).filter(e=>e instanceof HTMLElement),r=[];for(let e=0;e<n.length;e++){const i=n[e];try{if(null!==i.getAttribute("data-fp-omit"))continue;void 0!==i._flatpickr&&(i._flatpickr.destroy(),i._flatpickr=void 0),i._flatpickr=Sc(i,t||{}),r.push(i._flatpickr)}catch(e){console.error(e)}}return 1===r.length?r[0]:r}"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return Dc(this,e)},HTMLElement.prototype.flatpickr=function(e){return Dc([this],e)});var Ac=function(e,t){return"string"==typeof e?Dc(window.document.querySelectorAll(e),t):e instanceof Node?Dc([e],t):Dc(e,t)};function Oc(e){let t,n,r,i;return{c(){t=C("span"),n=C("input"),$(n,"type","checkbox"),$(n,"class","form-checkbox -mt-1 text-indigo-500 h-4 w-4 border-2 dark:border"),$(t,"class","bg-transparent -mr-2 pl-2 py-1 min-w-0 outline-none pr-4")},m(o,a){x(o,t,a),w(t,n),n.checked=e[0],r||(i=[A(n,"click",e[3]),A(n,"change",e[9])],r=!0)},p(e,t){1&t&&(n.checked=e[0])},d(e){e&&k(t),r=!1,o(i)}}}function $c(t){let n,r,i;return{c(){n=C("button"),n.innerHTML='<svg class="-ml-8 cursor-pointer opacity-50 hover:opacity-100" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"></path></svg>',$(n,"title","Clear date")},m(e,o){x(e,n,o),r||(i=A(n,"click",t[2]),r=!0)},p:e,d(e){e&&k(n),r=!1,i()}}}function Mc(t){let n,r,i,o,a,s,l=t[1]&&Oc(t),c=!t[0]&&t[1]&&$c(t);return{c(){n=C("div"),l&&l.c(),r=S(),i=C("input"),o=S(),c&&c.c(),$(i,"id","flatpickr"),$(i,"class","bg-transparent py-1 pr-4 min-w-0 placeholder-light dark:placeholder-dark placeholder-opacity-100 outline-none"),$(i,"placeholder","Select a date..."),$(n,"class","flex items-center px-1 bg-light-100 dark:bg-dark-200 text-light dark:text-dark rounded"),N(n,"completed",t[0])},m(e,u){x(e,n,u),l&&l.m(n,null),w(n,r),w(n,i),w(n,o),c&&c.m(n,null),a||(s=A(n,"keyup",O(t[8])),a=!0)},p(e,[t]){e[1]?l?l.p(e,t):(l=Oc(e),l.c(),l.m(n,r)):l&&(l.d(1),l=null),!e[0]&&e[1]?c?c.p(e,t):(c=$c(e),c.c(),c.m(n,null)):c&&(c.d(1),c=null),1&t&&N(n,"completed",e[0])},i:e,o:e,d(e){e&&k(n),l&&l.d(),c&&c.d(),a=!1,s()}}}function Ic(e,t,n){let r,i,o,{date:a}=t,{complete:s=!1}=t,l=!1;const c=W(),u=e=>{n(4,r=Ac("#flatpickr",{altInput:!0,altFormat:"M j, Y @ h:S K",defaultDate:e,enableTime:!0,minDate:e&&e<(new Date).getTime()?e:"today",onChange(e,t,n){e.length?c("update",e[0].getTime()):c("update",null)}}))};return q(()=>{u(a),n(7,l=!0)}),e.$$set=e=>{"date"in e&&n(1,a=e.date),"complete"in e&&n(0,s=e.complete)},e.$$.update=()=>{243&e.$$.dirty&&l&&(n(5,i=a),n(6,o=s),i?(u(i),n(4,r._input.disabled=o,r)):r&&r.clear())},[s,a,e=>{r.clear()},e=>{n(0,s=!s),c("complete",s)},r,i,o,l,function(t){X(e,t)},function(){s=this.checked,n(0,s)}]}Ac.defaultConfig={},Ac.l10ns={en:Object.assign({},lc),default:Object.assign({},lc)},Ac.localize=e=>{Ac.l10ns.default=Object.assign(Object.assign({},Ac.l10ns.default),e)},Ac.setDefaults=e=>{Ac.defaultConfig=Object.assign(Object.assign({},Ac.defaultConfig),e)},Ac.parseDate=Cc({}),Ac.formatDate=_c({}),Ac.compareDates=Ec,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(e){return Dc(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=Ac);class Pc extends $e{constructor(e){super(),Oe(this,e,Ic,Mc,s,{date:1,complete:0})}}const Nc=e=>({isOpen:1&e}),Lc=e=>({isOpen:e[0]});function jc(e){let t,n,r,i,o;const a=e[3].default,s=u(a,e,e[2],Lc);return{c(){t=C("div"),s&&s.c(),$(t,"class","absolute mt-2 z-10 rounded bg-light-100 dark:bg-dark-200 text-light dark:text-dark shadow-xl w-auto")},m(a,l){x(a,t,l),s&&s.m(t,null),r=!0,i||(o=p(n=e[1].call(null,t)),i=!0)},p(e,t){s&&s.p&&5&t&&f(s,a,e,e[2],t,Nc,Lc)},i(e){r||(me(s,e),r=!0)},o(e){ve(s,e),r=!1},d(e){e&&k(t),s&&s.d(e),i=!1,o()}}}function Rc(e){let t,n,r=e[0]&&jc(e);return{c(){r&&r.c(),t=D()},m(e,i){r&&r.m(e,i),x(e,t,i),n=!0},p(e,[n]){e[0]?r?(r.p(e,n),1&n&&me(r,1)):(r=jc(e),r.c(),me(r,1),r.m(t.parentNode,t)):r&&(he(),ve(r,1,1,()=>{r=null}),ge())},i(e){n||(me(r),n=!0)},o(e){ve(r),n=!1},d(e){r&&r.d(e),e&&k(t)}}}function Bc(e,t,n){let{$$slots:r={},$$scope:i}=t,{isOpen:o}=t;const a=W();return e.$$set=e=>{"isOpen"in e&&n(0,o=e.isOpen),"$$scope"in e&&n(2,i=e.$$scope)},[o,e=>Ht(e,()=>{o&&a("close")}),i,r]}class Fc extends $e{constructor(e){super(),Oe(this,e,Bc,Rc,s,{isOpen:0})}}function Uc(e,t,n){const r=e.slice();return r[9]=t[n],r}function zc(t){let n;return{c(){n=T("Select a label...")},m(e,t){x(e,n,t)},p:e,d(e){e&&k(n)}}}function Hc(e){let t,n,r,i;return{c(){t=C("span"),n=S(),r=C("span"),i=T(e[3]),$(t,"class","flex-shrink-0 rounded-full w-4 h-4"),N(t,"bg-red-500",e[0]===Nt.RED),N(t,"bg-orange-500",e[0]===Nt.ORANGE),N(t,"bg-yellow-500",e[0]===Nt.YELLOW),N(t,"bg-green-500",e[0]===Nt.GREEN),N(t,"bg-teal-500",e[0]===Nt.TEAL),N(t,"bg-blue-500",e[0]===Nt.BLUE),N(t,"bg-purple-500",e[0]===Nt.PURPLE),$(r,"class","block truncate")},m(e,o){x(e,t,o),x(e,n,o),x(e,r,o),w(r,i)},p(e,n){1&n&&N(t,"bg-red-500",e[0]===Nt.RED),1&n&&N(t,"bg-orange-500",e[0]===Nt.ORANGE),1&n&&N(t,"bg-yellow-500",e[0]===Nt.YELLOW),1&n&&N(t,"bg-green-500",e[0]===Nt.GREEN),1&n&&N(t,"bg-teal-500",e[0]===Nt.TEAL),1&n&&N(t,"bg-blue-500",e[0]===Nt.BLUE),1&n&&N(t,"bg-purple-500",e[0]===Nt.PURPLE),8&n&&M(i,e[3])},d(e){e&&k(t),e&&k(n),e&&k(r)}}}function Kc(e){let t;return{c(){t=C("span"),t.innerHTML='<svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>',$(t,"class","absolute inset-y-0 right-0 flex items-center pr-4")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function Yc(e,t){let n,r,i,o,a,s,l,c,u,d,f,p=t[9].text+"",h=t[0]===t[9].color&&Kc();function g(...e){return t[7](t[9],...e)}return{key:e,first:null,c(){n=C("li"),r=C("div"),i=C("span"),o=S(),a=C("span"),s=T(p),l=S(),h&&h.c(),c=S(),$(i,"class","flex-shrink-0 rounded-full w-4 h-4"),N(i,"bg-red-500",t[9].color==Nt.RED),N(i,"bg-orange-500",t[9].color==Nt.ORANGE),N(i,"bg-yellow-500",t[9].color==Nt.YELLOW),N(i,"bg-green-500",t[9].color==Nt.GREEN),N(i,"bg-teal-500",t[9].color==Nt.TEAL),N(i,"bg-blue-500",t[9].color==Nt.BLUE),N(i,"bg-purple-500",t[9].color==Nt.PURPLE),$(a,"class","font-normal block truncate"),$(r,"class","flex items-center space-x-2"),$(n,"data-label",u=t[9].color),$(n,"role","option"),$(n,"class","hover:bg-light-200 dark:hover:bg-dark-100 dark:hover:bg-dark-100 cursor-pointer select-none relative py-2 pl-3 pr-9"),this.first=n},m(e,t){x(e,n,t),w(n,r),w(r,i),w(r,o),w(r,a),w(a,s),w(n,l),h&&h.m(n,null),w(n,c),d||(f=A(n,"click",g),d=!0)},p(e,r){t=e,2&r&&N(i,"bg-red-500",t[9].color==Nt.RED),2&r&&N(i,"bg-orange-500",t[9].color==Nt.ORANGE),2&r&&N(i,"bg-yellow-500",t[9].color==Nt.YELLOW),2&r&&N(i,"bg-green-500",t[9].color==Nt.GREEN),2&r&&N(i,"bg-teal-500",t[9].color==Nt.TEAL),2&r&&N(i,"bg-blue-500",t[9].color==Nt.BLUE),2&r&&N(i,"bg-purple-500",t[9].color==Nt.PURPLE),2&r&&p!==(p=t[9].text+"")&&M(s,p),t[0]===t[9].color?h||(h=Kc(),h.c(),h.m(n,c)):h&&(h.d(1),h=null),2&r&&u!==(u=t[9].color)&&$(n,"data-label",u)},d(e){e&&k(n),h&&h.d(),d=!1,f()}}}function qc(e){let t,n=[],r=new Map,i=e[1];const o=e=>e[9];for(let t=0;t<i.length;t+=1){let a=Uc(e,i,t),s=o(a);r.set(s,n[t]=Yc(s,a))}return{c(){t=C("ul");for(let e=0;e<n.length;e+=1)n[e].c();$(t,"tabindex","-1"),$(t,"role","listbox"),$(t,"aria-activedescendant","listbox-item-3"),$(t,"class","max-h-56 w-64 rounded py-1 text-base leading-6 shadow-xs overflow-auto focus:outline-none sm:text-sm sm:leading-5")},m(e,r){x(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,i){if(67&i){const a=e[1];n=Ce(n,i,o,1,e,a,r,t,xe,Yc,null,Uc)}},d(e){e&&k(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function Vc(e){let t,n,r,i,o,a,s,l,c,u,d,f;function p(e,t){return e[0]in Nt?Hc:zc}let h=p(e),g=h(e);return c=new Fc({props:{isOpen:e[2],$$slots:{default:[qc]},$$scope:{ctx:e}}}),c.$on("close",e[4]),{c(){t=C("div"),n=C("div"),r=C("span"),i=C("button"),o=C("div"),g.c(),a=S(),s=C("span"),s.innerHTML='<svg class="h-5 w-5" viewBox="0 0 20 20" fill="none" stroke="currentColor"><path d="M7 7l3-3 3 3m0 6l-3 3-3-3" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',l=S(),Se(c.$$.fragment),$(o,"class","flex items-center space-x-2 truncate"),$(s,"class","absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"),$(i,"type","button"),$(i,"aria-haspopup","listbox"),$(i,"aria-expanded","true"),$(i,"class","flex items-center px-1 bg-light-100 dark:bg-dark-200 text-light dark:text-dark rounded cursor-default relative w-64 pl-2 pr-10 py-1 text-left"),$(r,"class","inline-block w-full rounded shadow-sm"),$(n,"class","relative"),$(t,"class","space-y-1")},m(p,h){x(p,t,h),w(t,n),w(n,r),w(r,i),w(i,o),g.m(o,null),w(i,a),w(i,s),w(n,l),De(c,n,null),u=!0,d||(f=A(i,"click",e[5]),d=!0)},p(e,[t]){h===(h=p(e))&&g?g.p(e,t):(g.d(1),g=h(e),g&&(g.c(),g.m(o,null)));const n={};4&t&&(n.isOpen=e[2]),4099&t&&(n.$$scope={dirty:t,ctx:e}),c.$set(n)},i(e){u||(me(c.$$.fragment,e),u=!0)},o(e){ve(c.$$.fragment,e),u=!1},d(e){e&&k(t),g.d(),Ae(c),d=!1,f()}}}function Wc(e,t,n){let r,{selected:i}=t,{labels:o}=t,a=!1;const s=W(),l=e=>{n(0,i=e===i?null:e),s("update",i),n(2,a=!1)};return e.$$set=e=>{"selected"in e&&n(0,i=e.selected),"labels"in e&&n(1,o=e.labels)},e.$$.update=()=>{3&e.$$.dirty&&i in Nt&&n(3,r=o.find(e=>e.color==i).text)},[i,o,a,r,e=>{n(2,a=!1)},()=>{n(2,a=!a)},l,(e,t)=>l(e.color)]}class Gc extends $e{constructor(e){super(),Oe(this,e,Wc,Vc,s,{selected:0,labels:1})}}function Xc(t){let n,r,i,a,s,l,c,u,d,f;return{c(){n=C("div"),r=C("button"),r.textContent="P1",i=S(),a=C("button"),a.textContent="P2",s=S(),l=C("button"),l.textContent="P3",c=S(),u=C("button"),u.textContent="P4",$(r,"class","priority p1"),$(r,"title","Urgent"),N(r,"selected",t[0]==Pt.P1),$(a,"class","priority p2"),$(a,"title","High"),N(a,"selected",t[0]==Pt.P2),$(l,"class","priority p3"),$(l,"title","Normal"),N(l,"selected",t[0]==Pt.P3),$(u,"class","priority p4"),$(u,"title","Low"),N(u,"selected",t[0]==Pt.P4),$(n,"class","flex space-x-2 text-light dark:text-dark rounded-sm")},m(e,o){x(e,n,o),w(n,r),w(n,i),w(n,a),w(n,s),w(n,l),w(n,c),w(n,u),d||(f=[A(r,"click",t[3]),A(a,"click",t[4]),A(l,"click",t[5]),A(u,"click",t[6])],d=!0)},p(e,[t]){1&t&&N(r,"selected",e[0]==Pt.P1),1&t&&N(a,"selected",e[0]==Pt.P2),1&t&&N(l,"selected",e[0]==Pt.P3),1&t&&N(u,"selected",e[0]==Pt.P4)},i:e,o:e,d(e){e&&k(n),d=!1,o(f)}}}function Jc(e,t,n){let r,{selectedPriority:i}=t;const o=W(),a=e=>{n(0,r=r===e?null:e),o("update",r)};return e.$$set=e=>{"selectedPriority"in e&&n(2,i=e.selectedPriority)},e.$$.update=()=>{4&e.$$.dirty&&n(0,r=i)},[r,a,i,e=>a(Pt.P1),e=>a(Pt.P2),e=>a(Pt.P3),e=>a(Pt.P4)]}class Zc extends $e{constructor(e){super(),Oe(this,e,Jc,Xc,s,{selectedPriority:2})}}var Qc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function eu(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return tu(null==t&&n.path)}},n.exports),n.exports}function tu(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var nu=eu((function(e,t){
/*! @license DOMPurify | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.2.2/LICENSE */
e.exports=function(){function e(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var t=Object.hasOwnProperty,n=Object.setPrototypeOf,r=Object.isFrozen,i=Object.getPrototypeOf,o=Object.getOwnPropertyDescriptor,a=Object.freeze,s=Object.seal,l=Object.create,c="undefined"!=typeof Reflect&&Reflect,u=c.apply,d=c.construct;u||(u=function(e,t,n){return e.apply(t,n)}),a||(a=function(e){return e}),s||(s=function(e){return e}),d||(d=function(t,n){return new(Function.prototype.bind.apply(t,[null].concat(e(n))))});var f=k(Array.prototype.forEach),p=k(Array.prototype.pop),h=k(Array.prototype.push),g=k(String.prototype.toLowerCase),m=k(String.prototype.match),v=k(String.prototype.replace),b=k(String.prototype.indexOf),y=k(String.prototype.trim),w=k(RegExp.prototype.test),x=_(TypeError);function k(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return u(e,t,r)}}function _(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(e,n)}}function C(e,t){n&&n(e,null);for(var i=t.length;i--;){var o=t[i];if("string"==typeof o){var a=g(o);a!==o&&(r(t)||(t[i]=a),o=a)}e[o]=!0}return e}function E(e){var n=l(null),r=void 0;for(r in e)u(t,e,[r])&&(n[r]=e[r]);return n}function T(e,t){for(;null!==e;){var n=o(e,t);if(n){if(n.get)return k(n.get);if("function"==typeof n.value)return k(n.value)}e=i(e)}return null}var S=a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),D=a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),A=a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=a(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$=a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),M=a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),I=a(["#text"]),P=a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),N=a(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),L=a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),j=a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),R=s(/\{\{[\s\S]*|[\s\S]*\}\}/gm),B=s(/<%[\s\S]*|[\s\S]*%>/gm),F=s(/^data-[\-\w.\u00B7-\uFFFF]/),U=s(/^aria-[\-\w]+$/),z=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H=s(/^(?:\w+script|data):/i),K=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function q(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var V=function(){return"undefined"==typeof window?null:window},W=function(e,t){if("object"!==(void 0===e?"undefined":Y(e))||"function"!=typeof e.createPolicy)return null;var n=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V(),t=function(e){return G(e)};if(t.version="2.2.6",t.removed=[],!e||!e.document||9!==e.document.nodeType)return t.isSupported=!1,t;var n=e.document,r=e.document,i=e.DocumentFragment,o=e.HTMLTemplateElement,s=e.Node,l=e.Element,c=e.NodeFilter,u=e.NamedNodeMap,d=void 0===u?e.NamedNodeMap||e.MozNamedAttrMap:u,k=e.Text,_=e.Comment,X=e.DOMParser,J=e.trustedTypes,Z=l.prototype,Q=T(Z,"cloneNode"),ee=T(Z,"nextSibling"),te=T(Z,"childNodes"),ne=T(Z,"parentNode");if("function"==typeof o){var re=r.createElement("template");re.content&&re.content.ownerDocument&&(r=re.content.ownerDocument)}var ie=W(J,n),oe=ie&&je?ie.createHTML(""):"",ae=r,se=ae.implementation,le=ae.createNodeIterator,ce=ae.getElementsByTagName,ue=ae.createDocumentFragment,de=n.importNode,fe={};try{fe=E(r).documentMode?r.documentMode:{}}catch(e){}var pe={};t.isSupported=se&&void 0!==se.createHTMLDocument&&9!==fe;var he=R,ge=B,me=F,ve=U,be=H,ye=K,we=z,xe=null,ke=C({},[].concat(q(S),q(D),q(A),q($),q(I))),_e=null,Ce=C({},[].concat(q(P),q(N),q(L),q(j))),Ee=null,Te=null,Se=!0,De=!0,Ae=!1,Oe=!1,$e=!1,Me=!1,Ie=!1,Pe=!1,Ne=!1,Le=!0,je=!1,Re=!0,Be=!0,Fe=!1,Ue={},ze=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),He=null,Ke=C({},["audio","video","img","source","image","track"]),Ye=null,qe=C({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Ve=null,We=r.createElement("form"),Ge=function(e){Ve&&Ve===e||(e&&"object"===(void 0===e?"undefined":Y(e))||(e={}),e=E(e),xe="ALLOWED_TAGS"in e?C({},e.ALLOWED_TAGS):ke,_e="ALLOWED_ATTR"in e?C({},e.ALLOWED_ATTR):Ce,Ye="ADD_URI_SAFE_ATTR"in e?C(E(qe),e.ADD_URI_SAFE_ATTR):qe,He="ADD_DATA_URI_TAGS"in e?C(E(Ke),e.ADD_DATA_URI_TAGS):Ke,Ee="FORBID_TAGS"in e?C({},e.FORBID_TAGS):{},Te="FORBID_ATTR"in e?C({},e.FORBID_ATTR):{},Ue="USE_PROFILES"in e&&e.USE_PROFILES,Se=!1!==e.ALLOW_ARIA_ATTR,De=!1!==e.ALLOW_DATA_ATTR,Ae=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Oe=e.SAFE_FOR_TEMPLATES||!1,$e=e.WHOLE_DOCUMENT||!1,Pe=e.RETURN_DOM||!1,Ne=e.RETURN_DOM_FRAGMENT||!1,Le=!1!==e.RETURN_DOM_IMPORT,je=e.RETURN_TRUSTED_TYPE||!1,Ie=e.FORCE_BODY||!1,Re=!1!==e.SANITIZE_DOM,Be=!1!==e.KEEP_CONTENT,Fe=e.IN_PLACE||!1,we=e.ALLOWED_URI_REGEXP||we,Oe&&(De=!1),Ne&&(Pe=!0),Ue&&(xe=C({},[].concat(q(I))),_e=[],!0===Ue.html&&(C(xe,S),C(_e,P)),!0===Ue.svg&&(C(xe,D),C(_e,N),C(_e,j)),!0===Ue.svgFilters&&(C(xe,A),C(_e,N),C(_e,j)),!0===Ue.mathMl&&(C(xe,$),C(_e,L),C(_e,j))),e.ADD_TAGS&&(xe===ke&&(xe=E(xe)),C(xe,e.ADD_TAGS)),e.ADD_ATTR&&(_e===Ce&&(_e=E(_e)),C(_e,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&C(Ye,e.ADD_URI_SAFE_ATTR),Be&&(xe["#text"]=!0),$e&&C(xe,["html","head","body"]),xe.table&&(C(xe,["tbody"]),delete Ee.tbody),a&&a(e),Ve=e)},Xe=C({},["mi","mo","mn","ms","mtext"]),Je=C({},["foreignobject","desc","title","annotation-xml"]),Ze=C({},D);C(Ze,A),C(Ze,O);var Qe=C({},$);C(Qe,M);var et="http://www.w3.org/1998/Math/MathML",tt="http://www.w3.org/2000/svg",nt="http://www.w3.org/1999/xhtml",rt=function(e){var t=ne(e);t&&t.tagName||(t={namespaceURI:nt,tagName:"template"});var n=g(e.tagName),r=g(t.tagName);if(e.namespaceURI===tt)return t.namespaceURI===nt?"svg"===n:t.namespaceURI===et?"svg"===n&&("annotation-xml"===r||Xe[r]):Boolean(Ze[n]);if(e.namespaceURI===et)return t.namespaceURI===nt?"math"===n:t.namespaceURI===tt?"math"===n&&Je[r]:Boolean(Qe[n]);if(e.namespaceURI===nt){if(t.namespaceURI===tt&&!Je[r])return!1;if(t.namespaceURI===et&&!Xe[r])return!1;var i=C({},["title","style","font","a","script"]);return!Qe[n]&&(i[n]||!Ze[n])}return!1},it=function(e){h(t.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=oe}catch(t){e.remove()}}},ot=function(e,n){try{h(t.removed,{attribute:n.getAttributeNode(e),from:n})}catch(e){h(t.removed,{attribute:null,from:n})}n.removeAttribute(e)},at=function(e){var t=void 0,n=void 0;if(Ie)e="<remove></remove>"+e;else{var i=m(e,/^[\r\n\t ]+/);n=i&&i[0]}var o=ie?ie.createHTML(e):e;try{t=(new X).parseFromString(o,"text/html")}catch(e){}if(!t||!t.documentElement){var a=(t=se.createHTMLDocument("")).body;a.parentNode.removeChild(a.parentNode.firstElementChild),a.outerHTML=o}return e&&n&&t.body.insertBefore(r.createTextNode(n),t.body.childNodes[0]||null),ce.call(t,$e?"html":"body")[0]},st=function(e){return le.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,(function(){return c.FILTER_ACCEPT}),!1)},lt=function(e){return!(e instanceof k||e instanceof _||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof d&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)},ct=function(e){return"object"===(void 0===s?"undefined":Y(s))?e instanceof s:e&&"object"===(void 0===e?"undefined":Y(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},ut=function(e,n,r){pe[e]&&f(pe[e],(function(e){e.call(t,n,r,Ve)}))},dt=function(e){var n=void 0;if(ut("beforeSanitizeElements",e,null),lt(e))return it(e),!0;if(m(e.nodeName,/[\u0080-\uFFFF]/))return it(e),!0;var r=g(e.nodeName);if(ut("uponSanitizeElement",e,{tagName:r,allowedTags:xe}),!ct(e.firstElementChild)&&(!ct(e.content)||!ct(e.content.firstElementChild))&&w(/<[/\w]/g,e.innerHTML)&&w(/<[/\w]/g,e.textContent))return it(e),!0;if(!xe[r]||Ee[r]){if(Be&&!ze[r])for(var i=ne(e),o=te(e),a=o.length-1;a>=0;--a)i.insertBefore(Q(o[a],!0),ee(e));return it(e),!0}return e instanceof l&&!rt(e)?(it(e),!0):"noscript"!==r&&"noembed"!==r||!w(/<\/no(script|embed)/i,e.innerHTML)?(Oe&&3===e.nodeType&&(n=e.textContent,n=v(n,he," "),n=v(n,ge," "),e.textContent!==n&&(h(t.removed,{element:e.cloneNode()}),e.textContent=n)),ut("afterSanitizeElements",e,null),!1):(it(e),!0)},ft=function(e,t,n){if(Re&&("id"===t||"name"===t)&&(n in r||n in We))return!1;if(De&&w(me,t));else if(Se&&w(ve,t));else{if(!_e[t]||Te[t])return!1;if(Ye[t]);else if(w(we,v(n,ye,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==b(n,"data:")||!He[e])if(Ae&&!w(be,v(n,ye,"")));else if(n)return!1}return!0},pt=function(e){var n=void 0,r=void 0,i=void 0,o=void 0;ut("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_e};for(o=a.length;o--;){var l=n=a[o],c=l.name,u=l.namespaceURI;if(r=y(n.value),i=g(c),s.attrName=i,s.attrValue=r,s.keepAttr=!0,s.forceKeepAttr=void 0,ut("uponSanitizeAttribute",e,s),r=s.attrValue,!s.forceKeepAttr&&(ot(c,e),s.keepAttr))if(w(/\/>/i,r))ot(c,e);else{Oe&&(r=v(r,he," "),r=v(r,ge," "));var d=e.nodeName.toLowerCase();if(ft(d,i,r))try{u?e.setAttributeNS(u,c,r):e.setAttribute(c,r),p(t.removed)}catch(e){}}}ut("afterSanitizeAttributes",e,null)}},ht=function e(t){var n=void 0,r=st(t);for(ut("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)ut("uponSanitizeShadowNode",n,null),dt(n)||(n.content instanceof i&&e(n.content),pt(n));ut("afterSanitizeShadowDOM",t,null)};return t.sanitize=function(r,o){var a=void 0,l=void 0,c=void 0,u=void 0,d=void 0;if(r||(r="\x3c!--\x3e"),"string"!=typeof r&&!ct(r)){if("function"!=typeof r.toString)throw x("toString is not a function");if("string"!=typeof(r=r.toString()))throw x("dirty is not a string, aborting")}if(!t.isSupported){if("object"===Y(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof r)return e.toStaticHTML(r);if(ct(r))return e.toStaticHTML(r.outerHTML)}return r}if(Me||Ge(o),t.removed=[],"string"==typeof r&&(Fe=!1),Fe);else if(r instanceof s)1===(l=(a=at("\x3c!----\x3e")).ownerDocument.importNode(r,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?a=l:a.appendChild(l);else{if(!Pe&&!Oe&&!$e&&-1===r.indexOf("<"))return ie&&je?ie.createHTML(r):r;if(!(a=at(r)))return Pe?null:oe}a&&Ie&&it(a.firstChild);for(var f=st(Fe?r:a);c=f.nextNode();)3===c.nodeType&&c===u||dt(c)||(c.content instanceof i&&ht(c.content),pt(c),u=c);if(u=null,Fe)return r;if(Pe){if(Ne)for(d=ue.call(a.ownerDocument);a.firstChild;)d.appendChild(a.firstChild);else d=a;return Le&&(d=de.call(n,d,!0)),d}var p=$e?a.outerHTML:a.innerHTML;return Oe&&(p=v(p,he," "),p=v(p,ge," ")),ie&&je?ie.createHTML(p):p},t.setConfig=function(e){Ge(e),Me=!0},t.clearConfig=function(){Ve=null,Me=!1},t.isValidAttribute=function(e,t,n){Ve||Ge({});var r=g(e),i=g(t);return ft(r,i,n)},t.addHook=function(e,t){"function"==typeof t&&(pe[e]=pe[e]||[],h(pe[e],t))},t.removeHook=function(e){pe[e]&&p(pe[e])},t.removeHooks=function(e){pe[e]&&(pe[e]=[])},t.removeAllHooks=function(){pe={}},t}return G()}()})),ru=eu((function(e,t){e.exports=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function o(e,t){return e(t={exports:{}},t.exports),t.exports}var a=o((function(e){function t(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function n(t){e.exports.defaults=t}e.exports={defaults:t(),getDefaults:t,changeDefaults:n}})),s=(a.defaults,a.getDefaults,a.changeDefaults,/[&<>"']/),l=/[&<>"']/g,c=/[<>"']|&(?!#?\w+;)/,u=/[<>"']|&(?!#?\w+;)/g,d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},f=function(e){return d[e]};function p(e,t){if(t){if(s.test(e))return e.replace(l,f)}else if(c.test(e))return e.replace(u,f);return e}var h=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function g(e){return e.replace(h,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var m=/(^|[^\[])\^/g;function v(e,t){e=e.source||e,t=t||"";var n={replace:function(t,r){return r=(r=r.source||r).replace(m,"$1"),e=e.replace(t,r),n},getRegex:function(){return new RegExp(e,t)}};return n}var b=/[^\w:]/g,y=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function w(e,t,n){if(e){var r;try{r=decodeURIComponent(g(n)).replace(b,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!y.test(n)&&(n=E(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}var x={},k=/^[^:]+:\/*[^/]*$/,_=/^([^:]+:)[\s\S]*$/,C=/^([^:]+:\/*[^/]*)[\s\S]*$/;function E(e,t){x[" "+e]||(k.test(e)?x[" "+e]=e+"/":x[" "+e]=D(e,"/",!0));var n=-1===(e=x[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(_,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(C,"$1")+t:e+t}function T(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function S(e,t){var n=e.replace(/\|/g,(function(e,t,n){for(var r=!1,i=t;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function D(e,t,n){var r=e.length;if(0===r)return"";for(var i=0;i<r;){var o=e.charAt(r-i-1);if(o!==t||n){if(o===t||!n)break;i++}else i++}return e.substr(0,r-i)}function A(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,r=0,i=0;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&--r<0)return i;return-1}function O(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function $(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}var M={escape:p,unescape:g,edit:v,cleanUrl:w,resolveUrl:E,noopTest:{exec:function(){}},merge:T,splitCells:S,rtrim:D,findClosingBracket:A,checkSanitizeDeprecation:O,repeatString:$},I=a.defaults,P=M.rtrim,N=M.splitCells,L=M.escape,j=M.findClosingBracket;function R(e,t,n){var r=t.href,i=t.title?L(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?{type:"link",raw:n,href:r,title:i,text:o}:{type:"image",raw:n,href:r,title:i,text:L(o)}}function B(e,t){var n=e.match(/^(\s+)(?:```)/);if(null===n)return t;var r=n[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=r.length?e.slice(r.length):e})).join("\n")}var F=function(){function e(e){this.options=e||I}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e,t){var n=this.rules.block.code.exec(e);if(n){var r=t[t.length-1];if(r&&"paragraph"===r.type)return{raw:n[0],text:n[0].trimRight()};var i=n[0].replace(/^ {4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:P(i,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],r=B(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:r}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var n=t[2].trim();if(/#$/.test(n)){var r=P(n,"#");this.options.pedantic?n=r.trim():r&&!/ $/.test(r)||(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n}}},t.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var n={type:"table",header:N(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(n.header.length===n.align.length){var r,i=n.align.length;for(r=0;r<i;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]="right":/^ *:-+: *$/.test(n.align[r])?n.align[r]="center":/^ *:-+ *$/.test(n.align[r])?n.align[r]="left":n.align[r]=null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=N(n.cells[r],n.header.length);return n}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:n}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){var n,r,i,o,a,s,l,c,u=t[0],d=t[2],f=d.length>1,p={type:"list",raw:u,ordered:f,start:f?+d.slice(0,-1):"",loose:!1,items:[]},h=t[0].match(this.rules.block.item),g=!1,m=h.length;i=this.rules.block.listItemStart.exec(h[0]);for(var v=0;v<m;v++){if(u=n=h[v],v!==m-1){if((o=this.rules.block.listItemStart.exec(h[v+1]))[1].length>i[0].length||o[1].length>3){h.splice(v,2,h[v]+"\n"+h[v+1]),v--,m--;continue}(!this.options.pedantic||this.options.smartLists?o[2][o[2].length-1]!==d[d.length-1]:f===(1===o[2].length))&&(a=h.slice(v+1).join("\n"),p.raw=p.raw.substring(0,p.raw.length-a.length),v=m-1),i=o}r=n.length,~(n=n.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(r-=n.length,n=this.options.pedantic?n.replace(/^ {1,4}/gm,""):n.replace(new RegExp("^ {1,"+r+"}","gm"),"")),s=g||/\n\n(?!\s*$)/.test(n),v!==m-1&&(g="\n"===n.charAt(n.length-1),s||(s=g)),s&&(p.loose=!0),this.options.gfm&&(c=void 0,(l=/^\[[ xX]\] /.test(n))&&(c=" "!==n[1],n=n.replace(/^\[[ xX]\] +/,""))),p.items.push({type:"list_item",raw:u,task:l,checked:c,loose:s,text:n})}return p}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):L(t[0]):t[0]}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:N(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];var r,i=n.align.length;for(r=0;r<i;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]="right":/^ *:-+: *$/.test(n.align[r])?n.align[r]="center":/^ *:-+ *$/.test(n.align[r])?n.align[r]="left":n.align[r]=null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=N(n.cells[r].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},t.text=function(e,t){var n=this.rules.block.text.exec(e);if(n){var r=t[t.length-1];return r&&"text"===r.type?{raw:n[0],text:n[0]}:{type:"text",raw:n[0],text:n[0]}}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:L(t[1])}},t.tag=function(e,t,n){var r=this.rules.inline.tag.exec(e);if(r)return!t&&/^<a /i.test(r[0])?t=!0:t&&/^<\/a>/i.test(r[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):L(r[0]):r[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var r=P(n.slice(0,-1),"\\");if((n.length-r.length)%2==0)return}else{var i=j(t[2],"()");if(i>-1){var o=(0===t[0].indexOf("!")?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,o).trim(),t[3]=""}}var a=t[2],s="";if(this.options.pedantic){var l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);l&&(a=l[1],s=l[3])}else s=t[3]?t[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(a=this.options.pedantic&&!/>$/.test(n)?a.slice(1):a.slice(1,-1)),R(t,{href:a?a.replace(this.rules.inline._escapes,"$1"):a,title:s?s.replace(this.rules.inline._escapes,"$1"):s},t[0])}},t.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var r=(n[2]||n[1]).replace(/\s+/g," ");if(!(r=t[r.toLowerCase()])||!r.href){var i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return R(n,r,n[0])}},t.strong=function(e,t,n){void 0===n&&(n="");var r=this.rules.inline.strong.start.exec(e);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);var i,o="**"===r[0]?this.rules.inline.strong.endAst:this.rules.inline.strong.endUnd;for(o.lastIndex=0;null!=(r=o.exec(t));)if(i=this.rules.inline.strong.middle.exec(t.slice(0,r.index+3)))return{type:"strong",raw:e.slice(0,i[0].length),text:e.slice(2,i[0].length-2)}}},t.em=function(e,t,n){void 0===n&&(n="");var r=this.rules.inline.em.start.exec(e);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);var i,o="*"===r[0]?this.rules.inline.em.endAst:this.rules.inline.em.endUnd;for(o.lastIndex=0;null!=(r=o.exec(t));)if(i=this.rules.inline.em.middle.exec(t.slice(0,r.index+2)))return{type:"em",raw:e.slice(0,i[0].length),text:e.slice(1,i[0].length-1)}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\n/g," "),r=/[^ ]/.test(n),i=/^ /.test(n)&&/ $/.test(n);return r&&i&&(n=n.substring(1,n.length-1)),n=L(n,!0),{type:"codespan",raw:t[0],text:n}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2]}},t.autolink=function(e,t){var n,r,i=this.rules.inline.autolink.exec(e);if(i)return r="@"===i[2]?"mailto:"+(n=L(this.options.mangle?t(i[1]):i[1])):n=L(i[1]),{type:"link",raw:i[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}},t.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var r,i;if("@"===n[2])i="mailto:"+(r=L(this.options.mangle?t(n[0]):n[0]));else{var o;do{o=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(o!==n[0]);r=L(n[0]),i="www."===n[1]?"http://"+r:r}return{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}},t.inlineText=function(e,t,n){var r,i=this.rules.inline.text.exec(e);if(i)return r=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):L(i[0]):i[0]:L(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:r}},e}(),U=M.noopTest,z=M.edit,H=M.merge,K={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:U,table:U,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};K.def=z(K.def).replace("label",K._label).replace("title",K._title).getRegex(),K.bullet=/(?:[*+-]|\d{1,9}[.)])/,K.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,K.item=z(K.item,"gm").replace(/bull/g,K.bullet).getRegex(),K.listItemStart=z(/^( *)(bull)/).replace("bull",K.bullet).getRegex(),K.list=z(K.list).replace(/bull/g,K.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+K.def.source+")").getRegex(),K._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",K._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,K.html=z(K.html,"i").replace("comment",K._comment).replace("tag",K._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),K.paragraph=z(K._paragraph).replace("hr",K.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",K._tag).getRegex(),K.blockquote=z(K.blockquote).replace("paragraph",K.paragraph).getRegex(),K.normal=H({},K),K.gfm=H({},K.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),K.gfm.nptable=z(K.gfm.nptable).replace("hr",K.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",K._tag).getRegex(),K.gfm.table=z(K.gfm.table).replace("hr",K.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",K._tag).getRegex(),K.pedantic=H({},K.normal,{html:z("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",K._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:U,paragraph:z(K.normal._paragraph).replace("hr",K.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",K.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Y={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:U,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",strong:{start:/^(?:(\*\*(?=[*punctuation]))|\*\*)(?![\s])|__/,middle:/^\*\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*\*$|^__(?![\s])((?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?)__$/,endAst:/[^punctuation\s]\*\*(?!\*)|[punctuation]\*\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]__(?!_)(?:(?=[punctuation*\s])|$)/},em:{start:/^(?:(\*(?=[punctuation]))|\*)(?![*\s])|_/,middle:/^\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*$|^_(?![_\s])(?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?_$/,endAst:/[^punctuation\s]\*(?!\*)|[punctuation]\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]_(?!_)(?:(?=[punctuation*\s])|$)/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:U,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\s*punctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};Y.punctuation=z(Y.punctuation).replace(/punctuation/g,Y._punctuation).getRegex(),Y._blockSkip="\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>",Y._overlapSkip="__[^_]*?__|\\*\\*\\[^\\*\\]*?\\*\\*",Y._comment=z(K._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),Y.em.start=z(Y.em.start).replace(/punctuation/g,Y._punctuation).getRegex(),Y.em.middle=z(Y.em.middle).replace(/punctuation/g,Y._punctuation).replace(/overlapSkip/g,Y._overlapSkip).getRegex(),Y.em.endAst=z(Y.em.endAst,"g").replace(/punctuation/g,Y._punctuation).getRegex(),Y.em.endUnd=z(Y.em.endUnd,"g").replace(/punctuation/g,Y._punctuation).getRegex(),Y.strong.start=z(Y.strong.start).replace(/punctuation/g,Y._punctuation).getRegex(),Y.strong.middle=z(Y.strong.middle).replace(/punctuation/g,Y._punctuation).replace(/overlapSkip/g,Y._overlapSkip).getRegex(),Y.strong.endAst=z(Y.strong.endAst,"g").replace(/punctuation/g,Y._punctuation).getRegex(),Y.strong.endUnd=z(Y.strong.endUnd,"g").replace(/punctuation/g,Y._punctuation).getRegex(),Y.blockSkip=z(Y._blockSkip,"g").getRegex(),Y.overlapSkip=z(Y._overlapSkip,"g").getRegex(),Y._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Y._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Y._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Y.autolink=z(Y.autolink).replace("scheme",Y._scheme).replace("email",Y._email).getRegex(),Y._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Y.tag=z(Y.tag).replace("comment",Y._comment).replace("attribute",Y._attribute).getRegex(),Y._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Y._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Y._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Y.link=z(Y.link).replace("label",Y._label).replace("href",Y._href).replace("title",Y._title).getRegex(),Y.reflink=z(Y.reflink).replace("label",Y._label).getRegex(),Y.reflinkSearch=z(Y.reflinkSearch,"g").replace("reflink",Y.reflink).replace("nolink",Y.nolink).getRegex(),Y.normal=H({},Y),Y.pedantic=H({},Y.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:z(/^!?\[(label)\]\((.*?)\)/).replace("label",Y._label).getRegex(),reflink:z(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Y._label).getRegex()}),Y.gfm=H({},Y.normal,{escape:z(Y.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),Y.gfm.url=z(Y.gfm.url,"i").replace("email",Y.gfm._extended_email).getRegex(),Y.breaks=H({},Y.gfm,{br:z(Y.br).replace("{2,}","*").getRegex(),text:z(Y.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var q={block:K,inline:Y},V=a.defaults,W=q.block,G=q.inline,X=M.repeatString;function J(e){return e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function Z(e){var t,n,r="",i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}var Q=function(){function e(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||V,this.options.tokenizer=this.options.tokenizer||new F,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:W.normal,inline:G.normal};this.options.pedantic?(t.block=W.pedantic,t.inline=G.pedantic):this.options.gfm&&(t.block=W.gfm,this.options.breaks?t.inline=G.breaks:t.inline=G.gfm),this.tokenizer.rules=t}e.lex=function(t,n){return new e(n).lex(t)},e.lexInline=function(t,n){return new e(n).inlineTokens(t)};var n=e.prototype;return n.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},n.blockTokens=function(e,t,n){var r,i,o,a;for(void 0===t&&(t=[]),void 0===n&&(n=!0),e=e.replace(/^ +$/gm,"");e;)if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),r.type&&t.push(r);else if(r=this.tokenizer.code(e,t))e=e.substring(r.raw.length),r.type?t.push(r):((a=t[t.length-1]).raw+="\n"+r.raw,a.text+="\n"+r.text);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.nptable(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),t.push(r);else if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),o=r.items.length,i=0;i<o;i++)r.items[i].tokens=this.blockTokens(r.items[i].text,[],!1);t.push(r)}else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.def(e)))e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.paragraph(e)))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.text(e,t))e=e.substring(r.raw.length),r.type?t.push(r):((a=t[t.length-1]).raw+="\n"+r.raw,a.text+="\n"+r.text);else if(e){var s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}return t},n.inline=function(e){var t,n,r,i,o,a,s=e.length;for(t=0;t<s;t++)switch((a=e[t]).type){case"paragraph":case"text":case"heading":a.tokens=[],this.inlineTokens(a.text,a.tokens);break;case"table":for(a.tokens={header:[],cells:[]},i=a.header.length,n=0;n<i;n++)a.tokens.header[n]=[],this.inlineTokens(a.header[n],a.tokens.header[n]);for(i=a.cells.length,n=0;n<i;n++)for(o=a.cells[n],a.tokens.cells[n]=[],r=0;r<o.length;r++)a.tokens.cells[n][r]=[],this.inlineTokens(o[r],a.tokens.cells[n][r]);break;case"blockquote":this.inline(a.tokens);break;case"list":for(i=a.items.length,n=0;n<i;n++)this.inline(a.items[n].tokens)}return e},n.inlineTokens=function(e,t,n,r){var i;void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===r&&(r=!1);var o,a,s,l=e;if(this.tokens.links){var c=Object.keys(this.tokens.links);if(c.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)c.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+X("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+X("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;e;)if(a||(s=""),a=!1,i=this.tokenizer.escape(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.tag(e,n,r))e=e.substring(i.raw.length),n=i.inLink,r=i.inRawBlock,t.push(i);else if(i=this.tokenizer.link(e))e=e.substring(i.raw.length),"link"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,r)),t.push(i);else if(i=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(i.raw.length),"link"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,r)),t.push(i);else if(i=this.tokenizer.strong(e,l,s))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.em(e,l,s))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.codespan(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.br(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.del(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.autolink(e,Z))e=e.substring(i.raw.length),t.push(i);else if(n||!(i=this.tokenizer.url(e,Z))){if(i=this.tokenizer.inlineText(e,r,J))e=e.substring(i.raw.length),s=i.raw.slice(-1),a=!0,t.push(i);else if(e){var u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}else e=e.substring(i.raw.length),t.push(i);return t},t(e,null,[{key:"rules",get:function(){return{block:W,inline:G}}}]),e}(),ee=a.defaults,te=M.cleanUrl,ne=M.escape,re=function(){function e(e){this.options=e||ee}var t=e.prototype;return t.code=function(e,t,n){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(e,r);null!=i&&i!==e&&(n=!0,e=i)}return r?'<pre><code class="'+this.options.langPrefix+ne(r,!0)+'">'+(n?e:ne(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:ne(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,n){if(null===(e=te(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+ne(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},t.image=function(e,t,n){if(null===(e=te(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},t.text=function(e){return e},e}(),ie=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return""+n},t.image=function(e,t,n){return""+n},t.br=function(){return""},e}(),oe=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{n=e+"-"+ ++r}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n},t.slug=function(e,t){void 0===t&&(t={});var n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)},e}(),ae=a.defaults,se=M.unescape,le=function(){function e(e){this.options=e||ae,this.options.renderer=this.options.renderer||new re,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ie,this.slugger=new oe}e.parse=function(t,n){return new e(n).parse(t)},e.parseInline=function(t,n){return new e(n).parseInline(t)};var t=e.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var n,r,i,o,a,s,l,c,u,d,f,p,h,g,m,v,b,y,w="",x=e.length;for(n=0;n<x;n++)switch((d=e[n]).type){case"space":continue;case"hr":w+=this.renderer.hr();continue;case"heading":w+=this.renderer.heading(this.parseInline(d.tokens),d.depth,se(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":w+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(c="",l="",o=d.header.length,r=0;r<o;r++)l+=this.renderer.tablecell(this.parseInline(d.tokens.header[r]),{header:!0,align:d.align[r]});for(c+=this.renderer.tablerow(l),u="",o=d.cells.length,r=0;r<o;r++){for(l="",a=(s=d.tokens.cells[r]).length,i=0;i<a;i++)l+=this.renderer.tablecell(this.parseInline(s[i]),{header:!1,align:d.align[i]});u+=this.renderer.tablerow(l)}w+=this.renderer.table(c,u);continue;case"blockquote":u=this.parse(d.tokens),w+=this.renderer.blockquote(u);continue;case"list":for(f=d.ordered,p=d.start,h=d.loose,o=d.items.length,u="",r=0;r<o;r++)v=(m=d.items[r]).checked,b=m.task,g="",m.task&&(y=this.renderer.checkbox(v),h?m.tokens.length>0&&"text"===m.tokens[0].type?(m.tokens[0].text=y+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&"text"===m.tokens[0].tokens[0].type&&(m.tokens[0].tokens[0].text=y+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:y}):g+=y),g+=this.parse(m.tokens,h),u+=this.renderer.listitem(g,b,v);w+=this.renderer.list(u,f,p);continue;case"html":w+=this.renderer.html(d.text);continue;case"paragraph":w+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(u=d.tokens?this.parseInline(d.tokens):d.text;n+1<x&&"text"===e[n+1].type;)u+="\n"+((d=e[++n]).tokens?this.parseInline(d.tokens):d.text);w+=t?this.renderer.paragraph(u):u;continue;default:var k='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(k);throw new Error(k)}return w},t.parseInline=function(e,t){t=t||this.renderer;var n,r,i="",o=e.length;for(n=0;n<o;n++)switch((r=e[n]).type){case"escape":i+=t.text(r.text);break;case"html":i+=t.html(r.text);break;case"link":i+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":i+=t.image(r.href,r.title,r.text);break;case"strong":i+=t.strong(this.parseInline(r.tokens,t));break;case"em":i+=t.em(this.parseInline(r.tokens,t));break;case"codespan":i+=t.codespan(r.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(r.tokens,t));break;case"text":i+=t.text(r.text);break;default:var a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}return i},e}(),ce=M.merge,ue=M.checkSanitizeDeprecation,de=M.escape,fe=a.getDefaults,pe=a.changeDefaults,he=a.defaults;function ge(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),t=ce({},ge.defaults,t||{}),ue(t),n){var r,i=t.highlight;try{r=Q.lex(e,t)}catch(e){return n(e)}var o=function(e){var o;if(!e)try{o=le.parse(r,t)}catch(t){e=t}return t.highlight=i,e?n(e):n(null,o)};if(!i||i.length<3)return o();if(delete t.highlight,!r.length)return o();var a=0;return ge.walkTokens(r,(function(e){"code"===e.type&&(a++,setTimeout((function(){i(e.text,e.lang,(function(t,n){if(t)return o(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),0==--a&&o()}))}),0))})),void(0===a&&o())}try{var s=Q.lex(e,t);return t.walkTokens&&ge.walkTokens(s,t.walkTokens),le.parse(s,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+de(e.message+"",!0)+"</pre>";throw e}}return ge.options=ge.setOptions=function(e){return ce(ge.defaults,e),pe(ge.defaults),ge},ge.getDefaults=fe,ge.defaults=he,ge.use=function(e){var t=ce({},e);if(e.renderer&&function(){var n=ge.defaults.renderer||new re,r=function(t){var r=n[t];n[t]=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=e.renderer[t].apply(n,o);return!1===s&&(s=r.apply(n,o)),s}};for(var i in e.renderer)r(i);t.renderer=n}(),e.tokenizer&&function(){var n=ge.defaults.tokenizer||new F,r=function(t){var r=n[t];n[t]=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=e.tokenizer[t].apply(n,o);return!1===s&&(s=r.apply(n,o)),s}};for(var i in e.tokenizer)r(i);t.tokenizer=n}(),e.walkTokens){var n=ge.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens(t),n&&n(t)}}ge.setOptions(t)},ge.walkTokens=function(e,t){for(var n,r=i(e);!(n=r()).done;){var o=n.value;switch(t(o),o.type){case"table":for(var a,s=i(o.tokens.header);!(a=s()).done;){var l=a.value;ge.walkTokens(l,t)}for(var c,u=i(o.tokens.cells);!(c=u()).done;)for(var d,f=i(c.value);!(d=f()).done;){var p=d.value;ge.walkTokens(p,t)}break;case"list":ge.walkTokens(o.items,t);break;default:o.tokens&&ge.walkTokens(o.tokens,t)}}},ge.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=ce({},ge.defaults,t||{}),ue(t);try{var n=Q.lexInline(e,t);return t.walkTokens&&ge.walkTokens(n,t.walkTokens),le.parseInline(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+de(e.message+"",!0)+"</pre>";throw e}},ge.Parser=le,ge.parser=le.parse,ge.Renderer=re,ge.TextRenderer=ie,ge.Lexer=Q,ge.lexer=Q.lex,ge.Tokenizer=F,ge.Slugger=oe,ge.parse=ge,ge}()}));let iu=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([a-z]*)/gi;function ou(e="",t="ms"){var n=null;return(e=e.replace(/(\d),(\d)/g,"$1$2")).replace(iu,(function(e,t,r){(r=ou[r]||ou[r.toLowerCase().replace(/s$/,"")])&&(n=(n||0)+parseFloat(t,10)*r)})),n&&n/ou[t]}function au(e,t,n){const r=e.slice();return r[37]=t[n],r[39]=n,r}function su(e,t,n){const r=e.slice();return r[40]=t[n],r[41]=t,r[39]=n,r}function lu(e,t,n){const r=e.slice();return r[37]=t[n],r}function cu(e){let t,n,r,i,o,s,l,c,u,d,f,h,g,m=e[0].board.title+"",v=e[0].list.title+"";return{c(){t=C("div"),n=C("div"),n.innerHTML='<svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"></path></svg>',r=S(),i=C("div"),o=C("a"),s=T(m),c=S(),u=C("span"),d=T("/ "),f=T(v),$(n,"class","w-6 h-6 mr-2"),$(o,"class","link"),$(i,"class","text-lg"),$(t,"class","flex items-center")},m(a,m){x(a,t,m),w(t,n),w(t,r),w(t,i),w(i,o),w(o,s),e[31](o),w(i,c),w(i,u),w(u,d),w(u,f),h||(g=p(l=ze.call(null,o,"/b/"+e[0].board.id)),h=!0)},p(e,t){1&t[0]&&m!==(m=e[0].board.title+"")&&M(s,m),l&&a(l.update)&&1&t[0]&&l.update.call(null,"/b/"+e[0].board.id),1&t[0]&&v!==(v=e[0].list.title+"")&&M(f,v)},d(n){n&&k(t),e[31](null),h=!1,g()}}}function uu(e){let t,n,r,i,o,a,s,l,c,u,d;return{c(){t=C("div"),n=C("div"),n.innerHTML='<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',r=S(),i=C("a"),o=E("svg"),a=E("path"),s=E("polyline"),l=E("line"),$(n,"class","relative cursor-pointer opacity-75 hover:opacity-100"),$(n,"title","Close"),$(a,"d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"),$(s,"points","15 3 21 3 21 9"),$(l,"x1","10"),$(l,"y1","14"),$(l,"x2","21"),$(l,"y2","3"),$(o,"width","32"),$(o,"height","32"),$(o,"viewBox","0 0 24 24"),$(o,"fill","none"),$(o,"stroke","currentColor"),$(o,"stroke-width","2"),$(o,"stroke-linecap","round"),$(o,"stroke-linejoin","round"),$(i,"href",c="#/c/"+e[0].card.id),$(i,"target","_blank"),$(i,"class","link relative opacity-75 hover:opacity-100"),$(i,"title","Open in new tab"),$(t,"class","flex flex-col space-y-4 absolute w-8 h-8 top-0 right-0 -mr-10")},m(c,f){x(c,t,f),w(t,n),w(t,r),w(t,i),w(i,o),w(o,a),w(o,s),w(o,l),u||(d=A(n,"click",e[14]),u=!0)},p(e,t){513&t[0]&&c!==(c="#/c/"+e[0].card.id)&&$(i,"href",c)},d(e){e&&k(t),u=!1,d()}}}function du(e){let t,n,r,i,o,a=e[6]?"Save":"Edit";return{c(){t=C("div"),n=C("button"),r=T(a),$(n,"class","ml-2 text-base underline dark:opacity-50 dark:hover:opacity-75")},m(a,s){x(a,t,s),w(t,n),w(n,r),i||(o=A(n,"click",e[18]),i=!0)},p(e,t){64&t[0]&&a!==(a=e[6]?"Save":"Edit")&&M(r,a)},d(e){e&&k(t),i=!1,o()}}}function fu(t){let n,r,i;return{c(){n=C("div"),n.textContent="Add a description",$(n,"class","opacity-75 hover:opacity-100 underline cursor-pointer")},m(e,o){x(e,n,o),r||(i=A(n,"click",t[18]),r=!0)},p:e,d(e){e&&k(n),r=!1,i()}}}function pu(e){let t,n,r;return{c(){t=C("textarea"),t.value=e[4],$(t,"class","w-full bg-white border-light-200 border-2 dark:border-transparent dark:bg-dark-100 p-1 rounded placeholder-dark-200 dark:placeholder-gray-400 shadow-sm"),$(t,"placeholder","Add a description"),$(t,"rows","10")},m(i,o){x(i,t,o),n||(r=A(t,"keyup",O(e[19])),n=!0)},p(e,n){16&n[0]&&(t.value=e[4])},d(e){e&&k(t),n=!1,r()}}}function hu(e){let t,n=nu.sanitize(ru(e[0].card.description))+"";return{c(){t=C("div"),$(t,"class","rounded-sm px-1 break-words markdown")},m(e,r){x(e,t,r),t.innerHTML=n},p(e,r){1&r[0]&&n!==(n=nu.sanitize(ru(e[0].card.description))+"")&&(t.innerHTML=n)},d(e){e&&k(t)}}}function gu(e){let t,n,r,i,a,s,l,c,u=[],d=new Map,f=e[9];const p=e=>e[37];for(let t=0;t<f.length;t+=1){let n=lu(e,f,t),r=p(n);d.set(r,u[t]=mu(r,n))}return{c(){t=C("div"),n=C("div"),r=C("div"),r.innerHTML='<h3 class="text-lg">List</h3>',i=S(),a=C("div"),s=C("select");for(let e=0;e<u.length;e+=1)u[e].c();N(r,"ml-8",!e[1]),$(n,"class","flex items-center"),$(s,"class","form-select p-1 bg-white dark:bg-dark-200 border border-light-200 dark:border-transparent w-full pr-8"),void 0===e[0].card.listId&&oe(()=>e[32].call(s)),$(a,"class","flex mt-2 text-lg"),N(a,"ml-8",!e[1])},m(o,d){x(o,t,d),w(t,n),w(n,r),w(t,i),w(t,a),w(a,s);for(let e=0;e<u.length;e+=1)u[e].m(s,null);P(s,e[0].card.listId),l||(c=[A(s,"change",e[22]),A(s,"change",e[32])],l=!0)},p(e,t){if(2&t[0]&&N(r,"ml-8",!e[1]),512&t[0]){const n=e[9];u=Ce(u,t,p,1,e,n,d,s,xe,mu,null,lu)}513&t[0]&&P(s,e[0].card.listId),2&t[0]&&N(a,"ml-8",!e[1])},d(e){e&&k(t);for(let e=0;e<u.length;e+=1)u[e].d();l=!1,o(c)}}}function mu(e,t){let n,r,i,o=t[37].name+"";return{key:e,first:null,c(){n=C("option"),r=T(o),n.__value=i=t[37].value,n.value=n.__value,this.first=n},m(e,t){x(e,n,t),w(n,r)},p(e,t){512&t[0]&&o!==(o=e[37].name+"")&&M(r,o),512&t[0]&&i!==(i=e[37].value)&&(n.__value=i,n.value=n.__value)},d(e){e&&k(n)}}}function vu(e){let t;return{c(){t=C("div"),t.innerHTML='<svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"></path><path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"></path></svg>',$(t,"class","w-6 h-6 mr-2")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function bu(e){let t,n,r,i,a,s;function l(e,t){return e[7]?wu:yu}let c=l(e),u=c(e);return{c(){t=C("span"),n=C("button"),u.c(),r=S(),i=C("button"),i.textContent="Delete all",$(n,"class","ml-2 text-base underline opacity-75"),$(i,"class","ml-2 text-base underline opacity-75")},m(o,l){x(o,t,l),w(t,n),u.m(n,null),w(t,r),w(t,i),a||(s=[A(n,"click",e[24]),A(i,"click",e[16])],a=!0)},p(e,t){c!==(c=l(e))&&(u.d(1),u=c(e),u&&(u.c(),u.m(n,null)))},d(e){e&&k(t),u.d(),a=!1,o(s)}}}function yu(e){let t;return{c(){t=T("Hide completed")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function wu(e){let t;return{c(){t=T("Show completed")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function xu(e){let t,n,r;return{c(){t=C("div"),n=C("div"),$(n,"class","rounded-full w-1/2 bg-indigo-500 h-2 transition-all duration-200 ease-in-out"),$(n,"style",r="width:"+e[8]),$(t,"class","rounded-full w-full h-2 bg-light-100 shadow-sm dark:bg-dark-200 mb-2"),N(t,"ml-8",!e[1])},m(e,r){x(e,t,r),w(t,n)},p(e,i){256&i[0]&&r!==(r="width:"+e[8])&&$(n,"style",r),2&i[0]&&N(t,"ml-8",!e[1])},d(e){e&&k(t)}}}function ku(e){let t,n,r,i,a,s,l,c,u,d,f,p,h,g,m,v,b,y=e[40].text+"";function _(){e[33].call(r,e[41],e[39])}return{c(){t=C("li"),n=C("label"),r=C("input"),i=S(),a=C("span"),s=T(y),l=S(),c=C("div"),u=E("svg"),d=E("polyline"),f=E("path"),p=E("line"),h=E("line"),m=S(),$(r,"type","checkbox"),$(r,"class","form-checkbox text-indigo-500 h-4 w-4 border-2 dark:border"),$(a,"class","ml-2 text-lg"),N(a,"line-through",e[40].checked),N(a,"italic",e[40].checked),N(a,"opacity-75",e[40].checked),$(n,"class","flex items-center cursor-pointer w-full"),N(n,"opacity-50",e[40].checked),$(d,"points","3 6 5 6 21 6"),$(f,"d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"),$(p,"x1","10"),$(p,"y1","11"),$(p,"x2","10"),$(p,"y2","17"),$(h,"x1","14"),$(h,"y1","11"),$(h,"x2","14"),$(h,"y2","17"),$(u,"width","16"),$(u,"height","16"),$(u,"viewBox","0 0 24 24"),$(u,"fill","none"),$(u,"stroke","currentColor"),$(u,"stroke-width","2"),$(u,"stroke-linecap","round"),$(u,"stroke-linejoin","round"),$(u,"class","pointer-events-none"),$(c,"data-index",g=e[39]),$(c,"class","absolute top-0 right-0 p-2 opacity-100 cursor-pointer hidden group-hover:block"),$(t,"class","checklist__item group relative flex mt-1 mr-1 p-1 rounded hover:bg-light-200 dark:hover:bg-dark-200")},m(o,g){x(o,t,g),w(t,n),w(n,r),r.checked=e[40].checked,w(n,i),w(n,a),w(a,s),w(t,l),w(t,c),w(c,u),w(u,d),w(u,f),w(u,p),w(u,h),w(t,m),v||(b=[A(r,"change",_),A(r,"click",e[12]),A(c,"click",e[11])],v=!0)},p(t,i){e=t,513&i[0]&&(r.checked=e[40].checked),1&i[0]&&y!==(y=e[40].text+"")&&M(s,y),1&i[0]&&N(a,"line-through",e[40].checked),1&i[0]&&N(a,"italic",e[40].checked),1&i[0]&&N(a,"opacity-75",e[40].checked),1&i[0]&&N(n,"opacity-50",e[40].checked),513&i[0]&&g!==(g=e[39])&&$(c,"data-index",g)},d(e){e&&k(t),v=!1,o(b)}}}function _u(e,t){let n,r,i=(t[7]&&!t[40].checked||0==t[7])&&ku(t);return{key:e,first:null,c(){n=D(),i&&i.c(),r=D(),this.first=n},m(e,t){x(e,n,t),i&&i.m(e,t),x(e,r,t)},p(e,t){e[7]&&!e[40].checked||0==e[7]?i?i.p(e,t):(i=ku(e),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(e){e&&k(n),i&&i.d(e),e&&k(r)}}}function Cu(e){let t;return{c(){t=C("div"),t.innerHTML='<svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>',$(t,"class","w-6 h-6 mr-2")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function Eu(e,t){let n,r,i,o,a,s,l,c,u,d,f,p,h,g,m,v,b,y,_=qt(t[37].duration)+"",D=Kt(t[37].date)+"";return{key:e,first:null,c(){n=C("li"),r=C("div"),i=C("div"),o=T(_),a=S(),s=C("div"),l=T(D),c=S(),u=C("div"),d=E("svg"),f=E("polyline"),p=E("path"),h=E("line"),g=E("line"),v=S(),$(i,"class","text-xl font-semibold"),$(s,"class","-mt-1 opacity-75"),$(r,"class","flex-grow ml-1"),$(f,"points","3 6 5 6 21 6"),$(p,"d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"),$(h,"x1","10"),$(h,"y1","11"),$(h,"x2","10"),$(h,"y2","17"),$(g,"x1","14"),$(g,"y1","11"),$(g,"x2","14"),$(g,"y2","17"),$(d,"width","16"),$(d,"height","16"),$(d,"viewBox","0 0 24 24"),$(d,"fill","none"),$(d,"stroke","currentColor"),$(d,"stroke-width","2"),$(d,"stroke-linecap","round"),$(d,"stroke-linejoin","round"),$(d,"class","pointer-events-none"),$(u,"data-index",m=t[39]),$(u,"class","p-2 opacity-100 cursor-pointer hidden group-hover:block"),$(n,"class","timetrack__item group flex mt-1 -ml-1 p-1 items-center rounded hover:bg-light-200 dark:hover:bg-dark-200"),this.first=n},m(e,m){x(e,n,m),w(n,r),w(r,i),w(i,o),w(r,a),w(r,s),w(s,l),w(n,c),w(n,u),w(u,d),w(d,f),w(d,p),w(d,h),w(d,g),w(n,v),b||(y=A(u,"click",t[25]),b=!0)},p(e,t){1&t[0]&&_!==(_=qt(e[37].duration)+"")&&M(o,_),1&t[0]&&D!==(D=Kt(e[37].date)+"")&&M(l,D),513&t[0]&&m!==(m=e[39])&&$(u,"data-index",m)},d(e){e&&k(n),b=!1,y()}}}function Tu(e){let t,n,r,i,a,s,l,c,u,d,f,p,h,g,m,v,b,y,_,E,D,I,P,L,j,R,B,F,U,z,H,K,Y,q,V,W,G,X,J,Z,Q,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,de,fe,pe,he,ge,be,ye,we,ke,_e,Ee,Te,Oe,$e,Me,Ie,Pe,Ne,Le,je,Re,Be,Fe,Ue,ze,He=[],Ke=new Map,Ye=qt(e[10])+"",qe=[],Ve=new Map,We=!e[1]&&cu(e),Ge=e[1]&&uu(e);s=new At({props:{content:e[0].card.title,isTitle:!0}}),s.$on("updateTitle",e[27]);let Xe=(e[6]||e[0].card.description)&&du(e);function Je(e,t){return e[0].card.description&&!e[6]?hu:e[6]?pu:fu}let Ze=Je(e),Qe=Ze(e);D=new Pc({props:{date:e[0].card.due,complete:e[0].card.isComplete}}),D.$on("complete",e[20]),D.$on("update",e[15]),F=new Zc({props:{selectedPriority:e[0].card.priority}}),F.$on("update",e[23]),V=new Gc({props:{selected:e[0].card.label,labels:e[0].board.labels}}),V.$on("update",e[21]);let et=e[2]&&gu(e),tt=!e[1]&&vu(),nt=e[0].card.checklist.length&&bu(e),rt=e[0].card.checklist.length&&xu(e),it=e[0].card.checklist;const ot=e=>e[40];for(let t=0;t<it.length;t+=1){let n=su(e,it,t),r=ot(n);Ke.set(r,He[t]=_u(r,n))}let at=!e[1]&&Cu(),st=e[0].card.log;const lt=e=>e[37];for(let t=0;t<st.length;t+=1){let n=au(e,st,t),r=lt(n);Ve.set(r,qe[t]=Eu(r,n))}return{c(){t=C("div"),n=C("div"),We&&We.c(),r=S(),i=C("div"),Ge&&Ge.c(),a=S(),Se(s.$$.fragment),l=S(),c=C("div"),u=C("div"),d=C("div"),d.innerHTML='<h3 class="text-lg">Description</h3>',f=S(),Xe&&Xe.c(),p=S(),h=C("div"),Qe.c(),g=S(),m=C("div"),v=C("div"),b=C("div"),y=C("div"),y.innerHTML='<h3 class="text-lg">Due Date</h3>',_=S(),E=C("div"),Se(D.$$.fragment),I=S(),P=C("div"),L=C("div"),j=C("div"),j.innerHTML='<h3 class="text-lg">Priority</h3>',R=S(),B=C("div"),Se(F.$$.fragment),U=S(),z=C("div"),H=C("div"),K=C("div"),K.innerHTML='<h3 class="text-lg">Label</h3>',Y=S(),q=C("div"),Se(V.$$.fragment),W=S(),et&&et.c(),G=S(),X=C("div"),J=C("div"),tt&&tt.c(),Z=S(),Q=C("div"),ee=C("h3"),te=C("span"),ne=T("Checklist\n            "),re=C("span"),ie=T(e[8]),oe=S(),nt&&nt.c(),ae=S(),se=C("div"),rt&&rt.c(),le=S(),ce=C("ul");for(let e=0;e<He.length;e+=1)He[e].c();ue=S(),de=C("div"),fe=C("textarea"),pe=S(),he=C("div"),ge=C("div"),at&&at.c(),be=S(),ye=C("div"),we=C("h3"),ke=C("span"),_e=T("Time Tracking\n            "),Ee=C("span"),Te=T(Ye),Oe=S(),$e=C("div"),Me=C("ul");for(let e=0;e<qe.length;e+=1)qe[e].c();Ie=S(),Pe=C("div"),Ne=C("input"),Le=S(),je=C("div"),Re=C("button"),Re.textContent="Delete card",$(i,"class","relative text-2xl font-semibold mt-1"),N(i,"ml-8",!e[1]),$(n,"class","mb-2"),N(d,"ml-8",!e[1]),$(u,"class","flex items-center"),$(h,"class","mt-2 text-lg"),N(h,"ml-8",!e[1]),$(c,"class","mb-2"),N(y,"ml-8",!e[1]),$(b,"class","flex items-center"),$(E,"class","flex mt-2 text-lg"),N(E,"ml-8",!e[1]),N(j,"ml-8",!e[1]),$(L,"class","flex items-center"),$(B,"class","flex mt-2 text-lg"),N(B,"ml-8",!e[1]),N(K,"ml-8",!e[1]),$(H,"class","flex items-center"),$(q,"class","flex mt-2 text-lg"),N(q,"ml-8",!e[1]),$(m,"class","flex mb-2"),N(m,"flex-col",e[1]),N(m,"space-y-1",e[1]),$(re,"class","ml-1 opacity-75 text-base"),$(ee,"class","flex items-center w-full justify-between text-2xl font-bold"),$(Q,"class","w-full"),$(J,"class","flex items-center"),$(ce,"class","ml-1 -mr-8"),$(fe,"class","bg-transparent text-base inline-block w-full p-1 rounded-sm placeholder-dark-200 dark:placeholder-gray-500 border border-transparent focus:border-indigo-500"),$(fe,"type","text"),$(fe,"placeholder","Add an item to checklist"),$(de,"class","mt-1"),N(de,"ml-8",!e[1]),$(se,"class","mt-2"),$(X,"class","mb-2"),$(Ee,"class","ml-1 opacity-75 text-base"),$(we,"class","flex items-center w-full justify-between text-2xl font-bold"),$(ye,"class","w-full"),$(ge,"class","flex items-center"),$(Me,"class","-mr-8"),N(Me,"ml-8",!e[1]),$(Ne,"class","bg-transparent text-base inline-block w-full p-1 rounded-sm placeholder-dark-200 dark:placeholder-gray-500 border border-transparent focus:border-indigo-500"),$(Ne,"type","text"),$(Ne,"placeholder","Add a duration. ex. 30m"),$(Pe,"class","mt-1"),N(Pe,"ml-8",!e[1]),$($e,"class","mt-2"),$(he,"class","mb-2"),$(Re,"class","bg-red-600 hover:bg-red-700 text-white text-lg font-bold py-1 px-2 rounded"),$(je,"class","my-6"),N(je,"ml-8",!e[1]),$(t,"class",Be=e[1]?"w-96":"w-4/5 mx-auto")},m(o,k){x(o,t,k),w(t,n),We&&We.m(n,null),w(n,r),w(n,i),Ge&&Ge.m(i,null),w(i,a),De(s,i,null),w(t,l),w(t,c),w(c,u),w(u,d),w(u,f),Xe&&Xe.m(u,null),w(c,p),w(c,h),Qe.m(h,null),w(t,g),w(t,m),w(m,v),w(v,b),w(b,y),w(v,_),w(v,E),De(D,E,null),w(m,I),w(m,P),w(P,L),w(L,j),w(P,R),w(P,B),De(F,B,null),w(m,U),w(m,z),w(z,H),w(H,K),w(z,Y),w(z,q),De(V,q,null),w(m,W),et&&et.m(m,null),w(t,G),w(t,X),w(X,J),tt&&tt.m(J,null),w(J,Z),w(J,Q),w(Q,ee),w(ee,te),w(te,ne),w(te,re),w(re,ie),w(ee,oe),nt&&nt.m(ee,null),w(X,ae),w(X,se),rt&&rt.m(se,null),w(se,le),w(se,ce);for(let e=0;e<He.length;e+=1)He[e].m(ce,null);e[34](ce),w(se,ue),w(se,de),w(de,fe),w(t,pe),w(t,he),w(he,ge),at&&at.m(ge,null),w(ge,be),w(ge,ye),w(ye,we),w(we,ke),w(ke,_e),w(ke,Ee),w(Ee,Te),w(he,Oe),w(he,$e),w($e,Me);for(let e=0;e<qe.length;e+=1)qe[e].m(Me,null);w($e,Ie),w($e,Pe),w(Pe,Ne),w(t,Le),w(t,je),w(je,Re),Fe=!0,Ue||(ze=[A(fe,"keydown",e[13]),A(fe,"keyup",O(e[30])),A(Ne,"keydown",e[26]),A(Ne,"keyup",O(e[29])),A(Re,"click",e[17])],Ue=!0)},p(e,o){e[1]?We&&(We.d(1),We=null):We?We.p(e,o):(We=cu(e),We.c(),We.m(n,r)),e[1]?Ge?Ge.p(e,o):(Ge=uu(e),Ge.c(),Ge.m(i,a)):Ge&&(Ge.d(1),Ge=null);const l={};1&o[0]&&(l.content=e[0].card.title),s.$set(l),2&o[0]&&N(i,"ml-8",!e[1]),2&o[0]&&N(d,"ml-8",!e[1]),e[6]||e[0].card.description?Xe?Xe.p(e,o):(Xe=du(e),Xe.c(),Xe.m(u,null)):Xe&&(Xe.d(1),Xe=null),Ze===(Ze=Je(e))&&Qe?Qe.p(e,o):(Qe.d(1),Qe=Ze(e),Qe&&(Qe.c(),Qe.m(h,null))),2&o[0]&&N(h,"ml-8",!e[1]),2&o[0]&&N(y,"ml-8",!e[1]);const c={};1&o[0]&&(c.date=e[0].card.due),1&o[0]&&(c.complete=e[0].card.isComplete),D.$set(c),2&o[0]&&N(E,"ml-8",!e[1]),2&o[0]&&N(j,"ml-8",!e[1]);const f={};1&o[0]&&(f.selectedPriority=e[0].card.priority),F.$set(f),2&o[0]&&N(B,"ml-8",!e[1]),2&o[0]&&N(K,"ml-8",!e[1]);const p={};if(1&o[0]&&(p.selected=e[0].card.label),1&o[0]&&(p.labels=e[0].board.labels),V.$set(p),2&o[0]&&N(q,"ml-8",!e[1]),e[2]?et?et.p(e,o):(et=gu(e),et.c(),et.m(m,null)):et&&(et.d(1),et=null),2&o[0]&&N(m,"flex-col",e[1]),2&o[0]&&N(m,"space-y-1",e[1]),e[1]?tt&&(tt.d(1),tt=null):tt||(tt=vu(),tt.c(),tt.m(J,Z)),(!Fe||256&o[0])&&M(ie,e[8]),e[0].card.checklist.length?nt?nt.p(e,o):(nt=bu(e),nt.c(),nt.m(ee,null)):nt&&(nt.d(1),nt=null),e[0].card.checklist.length?rt?rt.p(e,o):(rt=xu(e),rt.c(),rt.m(se,le)):rt&&(rt.d(1),rt=null),6273&o[0]){const t=e[0].card.checklist;He=Ce(He,o,ot,1,e,t,Ke,ce,xe,_u,null,su)}if(2&o[0]&&N(de,"ml-8",!e[1]),e[1]?at&&(at.d(1),at=null):at||(at=Cu(),at.c(),at.m(ge,be)),(!Fe||1024&o[0])&&Ye!==(Ye=qt(e[10])+"")&&M(Te,Ye),33554433&o[0]){const t=e[0].card.log;qe=Ce(qe,o,lt,1,e,t,Ve,Me,xe,Eu,null,au)}2&o[0]&&N(Me,"ml-8",!e[1]),2&o[0]&&N(Pe,"ml-8",!e[1]),2&o[0]&&N(je,"ml-8",!e[1]),(!Fe||2&o[0]&&Be!==(Be=e[1]?"w-96":"w-4/5 mx-auto"))&&$(t,"class",Be)},i(e){Fe||(me(s.$$.fragment,e),me(D.$$.fragment,e),me(F.$$.fragment,e),me(V.$$.fragment,e),Fe=!0)},o(e){ve(s.$$.fragment,e),ve(D.$$.fragment,e),ve(F.$$.fragment,e),ve(V.$$.fragment,e),Fe=!1},d(n){n&&k(t),We&&We.d(),Ge&&Ge.d(),Ae(s),Xe&&Xe.d(),Qe.d(),Ae(D),Ae(F),Ae(V),et&&et.d(),tt&&tt.d(),nt&&nt.d(),rt&&rt.d();for(let e=0;e<He.length;e+=1)He[e].d();e[34](null),at&&at.d();for(let e=0;e<qe.length;e+=1)qe[e].d();Ue=!1,o(ze)}}}function Su(e,t,n){var r;let i,o,a,{cardDetails:s}=t,{inline:l}=t,{isZen:c}=t,u=!1,d=!1;const f=W(),p=new ru.Renderer;p.link=function(e,t,n){return ru.Renderer.prototype.link.apply(this,arguments).replace("<a","<a class='link' target='_blank'")},ru.setOptions({renderer:p}),nu.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener"))}));let h,g,m;return q(()=>{fl.create(a,{group:"checklistItems",draggable:".checklist__item",ghostClass:"checklist__item--ghost",chosenClass:"checklist__item--chosen",dragClass:"checklist__item--drag",onEnd:e=>{e.oldDraggableIndex!=e.newDraggableIndex&&s.card.checklist.splice(e.newDraggableIndex,0,s.card.checklist.splice(e.oldDraggableIndex,1)[0]),f("update",{card:s.card,property:"checklist"})}})}),e.$$set=e=>{"cardDetails"in e&&n(0,s=e.cardDetails),"inline"in e&&n(1,l=e.inline),"isZen"in e&&n(2,c=e.isZen)},e.$$.update=()=>{1&e.$$.dirty[0]&&n(8,h=0===s.card.checklist.length?"":Math.round(s.card.checklist.filter(e=>e.checked).length/s.card.checklist.length*100)+"%"),1&e.$$.dirty[0]&&n(9,g=s.board.lists.map(e=>({name:e.title,value:e.id}))),1&e.$$.dirty[0]&&n(10,m=s.card.log.reduce((e,t)=>e+t.duration,0)),268435457&e.$$.dirty[0]&&(null==s?void 0:s.card.id)&&n(4,o=null===n(28,r=null==s?void 0:s.card)||void 0===r?void 0:r.description)},[s,l,c,i,o,a,u,d,h,g,m,e=>{s.card.deleteFromChecklist(Number(e.target.dataset.index)),n(0,s),f("update",{card:s.card,property:"checklist"})},e=>{f("update",{card:s.card,property:"checklist"})},e=>{if(e.target.value&&"Enter"===e.key){let t=e.target.value.split("\n").filter(e=>""!=e.trim());for(let e=0;e<t.length;e++)s.card.addToChecklist(t[e]);f("update",{card:s.card,property:"checklist"}),n(0,s),e.preventDefault(),e.target.value=""}else"Enter"===e.key&&(e.preventDefault(),e.target.value="")},()=>{f("close")},e=>{s.card.setDueDate(e.detail),f("update",{card:s.card,property:"due"}),n(0,s)},e=>{f("delete",{message:"Are you sure you want to delete this checklist?",onConfirm:()=>{n(0,s.card.checklist=[],s),f("update",{card:s.card,property:"checklist"})}})},e=>{f("delete",{message:"Are you sure you want to delete this card?",onConfirm:()=>{f("update",{list:s.list,cardId:s.card.id}),l?f("close"):i.click()}})},e=>{u?(n(0,s.card.description=o,s),f("update",{card:s.card,property:"description"})):n(4,o=s.card.description),n(6,u=!u)},e=>{n(4,o=e.target.value)},e=>{s.card.setComplete(e.detail),f("update",{card:s.card,property:"isComplete"})},e=>{s.card.setLabel(e.detail),f("update",{card:s.card,property:"label"})},e=>{let t=s.board.lists.find(t=>t.id===e.target.value);f("update",{boardId:s.board.id,from:{list:s.card.listId,index:s.card.index},to:{list:t.id,index:t.cards.length}})},e=>{s.card.setPriority(e.detail),f("update",{card:s.card,property:"priority"}),n(0,s)},e=>{n(7,d=!d)},e=>{f("delete",{message:"Are you sure you want to delete this time entry?",onConfirm:()=>{s.card.deleteTimeEntry(Number(e.target.dataset.index)),n(0,s),f("update",{card:s.card,property:"log"})}})},e=>{if(e.target.value&&"Enter"===e.key){let t=ou(e.target.value,"s");t&&(s.card.trackTime(t),f("update",{card:s.card,property:"log"}),n(0,s),e.target.value="")}},e=>{n(0,s.card.title=e.detail,s),f("update",{card:s.card,property:"title"})},r,function(t){X(e,t)},function(t){X(e,t)},function(e){Z[e?"unshift":"push"](()=>{i=e,n(3,i)})},function(){s.card.listId=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n(0,s),n(9,g),n(0,s)},function(e,t){e[t].checked=this.checked,n(0,s),n(9,g),n(0,s)},function(e){Z[e?"unshift":"push"](()=>{a=e,n(5,a)})}]}ou.nanosecond=ou.ns=1e-6,ou["s"]=ou["s"]=ou.us=ou.microsecond=.001,ou.millisecond=ou.ms=1,ou.second=ou.sec=ou.s=1e3*ou.ms,ou.minute=ou.min=ou.m=60*ou.s,ou.hour=ou.hr=ou.h=60*ou.m,ou.day=ou.d=24*ou.h,ou.week=ou.wk=ou.w=7*ou.d,ou.month=ou.b=30.4375*ou.d,ou.year=ou.yr=ou.y=365.25*ou.d;class Du extends $e{constructor(e){super(),Oe(this,e,Su,Tu,s,{cardDetails:0,inline:1,isZen:2},[-1,-1])}}function Au(e){let t,n;return t=new Du({props:{cardDetails:e[2],inline:!0,isZen:e[1]}}),t.$on("close",e[4]),t.$on("delete",e[5]),t.$on("update",e[6]),{c(){Se(t.$$.fragment)},m(e,r){De(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.cardDetails=e[2]),2&n&&(r.isZen=e[1]),t.$set(r)},i(e){n||(me(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Ou(e){let t,n,r,i=e[0]&&Au(e);return{c(){t=C("div"),n=C("div"),i&&i.c(),$(n,"class","flex-none bg-light-300 inline-editor p-4 pb-8 h-auto border shadow-lg dark:bg-dark-300 overflow-y-auto rounded"),N(n,"border-indigo-500",!e[1]),N(n,"border-transparent",e[1]),N(n,"mr-4",!e[1]),N(n,"w-116",!e[1]),N(n,"hidden",null==e[0])},m(e,o){x(e,t,o),w(t,n),i&&i.m(n,null),r=!0},p(e,[t]){e[0]?i?(i.p(e,t),1&t&&me(i,1)):(i=Au(e),i.c(),me(i,1),i.m(n,null)):i&&(he(),ve(i,1,1,()=>{i=null}),ge()),2&t&&N(n,"border-indigo-500",!e[1]),2&t&&N(n,"border-transparent",e[1]),2&t&&N(n,"mr-4",!e[1]),2&t&&N(n,"w-116",!e[1]),1&t&&N(n,"hidden",null==e[0])},i(e){r||(me(i),r=!0)},o(e){ve(i),r=!1},d(e){e&&k(t),i&&i.d()}}}function $u(e,t,n){let r;var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let o,a,{id:s}=t,{isZen:l=!1}=t;const u=W(),d=G("nimbo");c(e,d,e=>n(8,r=e));return e.$$set=e=>{"id"in e&&n(0,s=e.id),"isZen"in e&&n(1,l=e.isZen)},e.$$.update=()=>{385&e.$$.dirty&&(n(7,a=r.getCardDetails(s)),a&&n(2,o=a))},[s,l,o,d,()=>{u("close")},e=>{u("delete",e.detail)},e=>i(void 0,void 0,void 0,(function*(){e.detail.card?yield r.updateCard(e.detail.card,e.detail.property):e.detail.boardId?yield r.moveCard(e.detail):yield r.deleteCard(e.detail.list,e.detail.cardId),d.set(r)})),a,r]}class Mu extends $e{constructor(e){super(),Oe(this,e,$u,Ou,s,{id:0,isZen:1})}}const{window:Iu}=we;function Pu(e,t,n){const r=e.slice();return r[18]=t[n],r}function Nu(n,r){let i,o,a,s,l=e;return o=new Gl({props:{list:r[18],hasMore:r[18].index<r[1].lists.length-1}}),o.$on("delete",r[12]),o.$on("create",r[11]),o.$on("cardEdit",r[8]),{key:n,first:null,c(){i=C("div"),Se(o.$$.fragment),this.first=i},m(e,t){x(e,i,t),De(o,i,null),s=!0},p(e,t){const n={};2&t&&(n.list=e[18]),2&t&&(n.hasMore=e[18].index<e[1].lists.length-1),o.$set(n)},r(){a=i.getBoundingClientRect()},f(){H(i),l()},a(){l(),l=function(n,r,i,o){if(!r)return e;const a=n.getBoundingClientRect();if(r.left===a.left&&r.right===a.right&&r.top===a.top&&r.bottom===a.bottom)return e;const{delay:s=0,duration:l=300,easing:c=t,start:u=g()+s,end:d=u+l,tick:f=e,css:p}=i(n,{from:r,to:a},o);let h,m=!0,v=!1;function b(){p&&z(n,h),m=!1}return y(e=>{if(!v&&e>=u&&(v=!0),v&&e>=d&&(f(1,0),b()),!m)return!1;if(v){const t=0+1*c((e-u)/l);f(t,1-t)}return!0}),p&&(h=U(n,0,1,l,s,c,p)),s||(v=!0),f(0,1),b}(i,a,Ct,{duration:300})},i(e){s||(me(o.$$.fragment,e),s=!0)},o(e){ve(o.$$.fragment,e),s=!1},d(e){e&&k(i),Ae(o)}}}function Lu(e){let t,n,r,i,a,s,l,c,u,d,f,p=[],h=new Map;t=new oc({props:{isConfirmModalOpen:e[3],modalMessage:e[4],onConfirm:e[5]}}),t.$on("close",e[9]),i=new Mu({props:{id:e[0].selectedCardId}}),i.$on("delete",e[12]),i.$on("close",e[10]);let g=e[1].lists;const m=e=>e[18].id;for(let t=0;t<g.length;t+=1){let n=Pu(e,g,t),r=m(n);h.set(r,p[t]=Nu(r,n))}return{c(){Se(t.$$.fragment),n=S(),r=C("div"),Se(i.$$.fragment),a=S();for(let e=0;e<p.length;e+=1)p[e].c();s=S(),l=C("div"),c=C("button"),c.innerHTML="Press <b>l</b> to add new list or click here",$(c,"class","rounded py-2 w-80 text-center border border-dashed border-gray-700\n        focus:outline-none opacity-50 hover:opacity-75 min-h-0 h-auto"),$(r,"class","flex max-h-full w-full pb-2 overflow-x-auto")},m(o,h){De(t,o,h),x(o,n,h),x(o,r,h),De(i,r,null),w(r,a);for(let e=0;e<p.length;e+=1)p[e].m(r,null);w(r,s),w(r,l),w(l,c),e[15](r),u=!0,d||(f=[A(Iu,"keyup",e[13]),A(c,"click",e[7])],d=!0)},p(e,[n]){const o={};8&n&&(o.isConfirmModalOpen=e[3]),16&n&&(o.modalMessage=e[4]),32&n&&(o.onConfirm=e[5]),t.$set(o);const a={};if(1&n&&(a.id=e[0].selectedCardId),i.$set(a),6402&n){const t=e[1].lists;he();for(let e=0;e<p.length;e+=1)p[e].r();p=Ce(p,n,m,1,e,t,h,r,_e,Nu,s,Pu);for(let e=0;e<p.length;e+=1)p[e].a();ge()}},i(e){if(!u){me(t.$$.fragment,e),me(i.$$.fragment,e);for(let e=0;e<g.length;e+=1)me(p[e]);u=!0}},o(e){ve(t.$$.fragment,e),ve(i.$$.fragment,e);for(let e=0;e<p.length;e+=1)ve(p[e]);u=!1},d(a){Ae(t,a),a&&k(n),a&&k(r),Ae(i);for(let e=0;e<p.length;e+=1)p[e].d();e[15](null),d=!1,o(f)}}}function ju(e,t,n){let r;var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let o,a,{boardId:s}=t,l=!1,u="",d=null,f=()=>{};const p=G("nimbo");c(e,p,e=>n(0,r=e));const h=(e,t=null)=>i(void 0,void 0,void 0,(function*(){r.addNewList(s,t),p.set(r),d=null===t?o.lists.length-1:t+1}));return V(()=>{if(null!=d){let e=a.querySelectorAll(".editable-title span");if(e[d].focus(),void 0!==window.getSelection&&void 0!==document.createRange){let t=document.createRange();t.selectNodeContents(e[d]),t.collapse(!1);let n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if(void 0!==document.body.createTextRange){let t=document.body.createTextRange();t.moveToElementText(e[d]),t.collapse(!1),t.select()}e[d].closest(".list").scrollIntoView({behavior:"smooth",inline:"end"}),d=null}}),e.$$set=e=>{"boardId"in e&&n(14,s=e.boardId)},e.$$.update=()=>{16385&e.$$.dirty&&n(1,o=r.getBoard(s))},[r,o,a,l,u,f,p,h,e=>{let t=document.querySelector(".inline-editor");document.querySelectorAll(".list")[e.detail.listIndex].parentNode.after(t),r.setSelectedCard(e.detail.cardId),p.set(r)},()=>{n(3,l=!1)},()=>{r.setSelectedCard(null),p.set(r)},e=>i(void 0,void 0,void 0,(function*(){yield h(0,e.detail)})),e=>{n(4,u=e.detail.message),n(3,l=!0),n(5,f=e.detail.onConfirm)},e=>i(void 0,void 0,void 0,(function*(){"l"===e.key&&null===r.selectedCardId?(yield h(),e.stopPropagation()):"Space"!==e.code&&"h"!==e.key||e.stopPropagation()})),s,function(e){Z[e?"unshift":"push"](()=>{a=e,n(2,a)})}]}class Ru extends $e{constructor(e){super(),Oe(this,e,ju,Lu,s,{boardId:14})}}function Bu(e,t,n){const r=e.slice();return r[12]=t[n],r}function Fu(e){let t,n,r=e[12].text+"";return{c(){t=C("span"),n=T(r),$(t,"class","block truncate py-1")},m(e,r){x(e,t,r),w(t,n)},p(e,t){2&t&&r!==(r=e[12].text+"")&&M(n,r)},d(e){e&&k(t)}}}function Uu(e){let t,n,r,i,a,s;return{c(){t=C("input"),$(t,"data-color",n=e[12].color),$(t,"class","block rounded w-full px-1 focus:bg-light-300 dark:focus:bg-dark-100 border border-transparent border-dashed hover:border-light dark:hover:border-dark py-1"),t.value=r=e[12].text},m(n,r){x(n,t,r),a||(s=[p(i=e[3].call(null,t)),A(t,"blur",e[7]),A(t,"keyup",O(e[9])),A(t,"keydown",e[8])],a=!0)},p(e,i){2&i&&n!==(n=e[12].color)&&$(t,"data-color",n),2&i&&r!==(r=e[12].text)&&t.value!==r&&(t.value=r)},d(e){e&&k(t),a=!1,o(s)}}}function zu(e,t){let n,r,i,o,a,s,l,c,u;function d(e,t){return e[2]==e[12].color?Uu:Fu}let f=d(t),p=f(t);function h(...e){return t[10](t[12],...e)}return{key:e,first:null,c(){n=C("li"),r=C("div"),i=C("span"),o=S(),p.c(),a=S(),s=C("button"),s.innerHTML='<svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>',l=S(),$(i,"class","flex-shrink-0 rounded-full w-4 h-4"),N(i,"bg-red-500",t[12].color==Nt.RED),N(i,"bg-orange-500",t[12].color==Nt.ORANGE),N(i,"bg-yellow-500",t[12].color==Nt.YELLOW),N(i,"bg-green-500",t[12].color==Nt.GREEN),N(i,"bg-teal-500",t[12].color==Nt.TEAL),N(i,"bg-blue-500",t[12].color==Nt.BLUE),N(i,"bg-purple-500",t[12].color==Nt.PURPLE),$(r,"class","flex items-center space-x-2 mr-2"),$(s,"class","absolute mx-auto opacity-50 hover:opacity-100 inset-y-0 right-0 flex items-center mr-2.5 focus:bg-transparent outline-none"),$(s,"title","Edit label"),$(n,"role","option"),$(n,"class","select-none relative py-1 pl-3 pr-9 hover:bg-light-200 dark:hover:bg-dark-100-50"),this.first=n},m(e,t){x(e,n,t),w(n,r),w(r,i),w(r,o),p.m(r,null),w(n,a),w(n,s),w(n,l),c||(u=A(s,"click",h),c=!0)},p(e,n){t=e,2&n&&N(i,"bg-red-500",t[12].color==Nt.RED),2&n&&N(i,"bg-orange-500",t[12].color==Nt.ORANGE),2&n&&N(i,"bg-yellow-500",t[12].color==Nt.YELLOW),2&n&&N(i,"bg-green-500",t[12].color==Nt.GREEN),2&n&&N(i,"bg-teal-500",t[12].color==Nt.TEAL),2&n&&N(i,"bg-blue-500",t[12].color==Nt.BLUE),2&n&&N(i,"bg-purple-500",t[12].color==Nt.PURPLE),f===(f=d(t))&&p?p.p(t,n):(p.d(1),p=f(t),p&&(p.c(),p.m(r,null)))},d(e){e&&k(n),p.d(),c=!1,u()}}}function Hu(e){let t,n=[],r=new Map,i=e[1];const o=e=>e[12];for(let t=0;t<i.length;t+=1){let a=Bu(e,i,t),s=o(a);r.set(s,n[t]=zu(s,a))}return{c(){t=C("ul");for(let e=0;e<n.length;e+=1)n[e].c();$(t,"tabindex","-1"),$(t,"role","listbox"),$(t,"class","text-base w-40 space-y-1 py-2 leading-6 focus:outline-none w-80 rounded border border-indigo-500")},m(e,r){x(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,i){if(454&i){const a=e[1];n=Ce(n,i,o,1,e,a,r,t,xe,zu,null,Bu)}},d(e){e&&k(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function Ku(e){let t,n,r,i,o,a,s;return i=new Fc({props:{isOpen:e[0],$$slots:{default:[Hu]},$$scope:{ctx:e}}}),i.$on("close",e[5]),{c(){t=C("div"),n=C("button"),n.textContent="Labels",r=S(),Se(i.$$.fragment),$(n,"class","py-1 px-2 rounded text-xs bg-indigo-500 text-white hover:bg-indigo-600")},m(l,c){x(l,t,c),w(t,n),w(t,r),De(i,t,null),o=!0,a||(s=A(n,"click",e[4]),a=!0)},p(e,[t]){const n={};1&t&&(n.isOpen=e[0]),32774&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n)},i(e){o||(me(i.$$.fragment,e),o=!0)},o(e){ve(i.$$.fragment,e),o=!1},d(e){e&&k(t),Ae(i),a=!1,s()}}}function Yu(e,t,n){let{isOpen:r=!1}=t,{labels:i}=t;const o=W();let a=null;const s=e=>{n(2,a=e)};return e.$$set=e=>{"isOpen"in e&&n(0,r=e.isOpen),"labels"in e&&n(1,i=e.labels)},[r,i,a,e=>{e.focus()},()=>{n(0,r=!0)},e=>{n(0,r=!1),n(2,a=null)},s,e=>{n(2,a=null)},e=>{if("Enter"==e.key&&e.target.value){for(let t=0;t<i.length;t++)if(i[t].color==e.target.dataset.color){n(1,i[t].text=e.target.value,i),o("update",i);break}e.target.blur()}},function(t){X(e,t)},(e,t)=>s(e.color)]}class qu extends $e{constructor(e){super(),Oe(this,e,Yu,Ku,s,{isOpen:0,labels:1})}}var Vu=eu((function(e){var t,n;t=Qc,n=function(){var e="undefined"==typeof window,t=new Map,n=new Map,r=[];r.total=0;var i=[],o=[];function a(){t.clear(),n.clear(),i=[],o=[]}function s(e){for(var t=-9007199254740991,n=e.length-1;n>=0;--n){var r=e[n];if(null!==r){var i=r.score;i>t&&(t=i)}}return-9007199254740991===t?null:t}function l(e,t){var n=e[t];if(void 0!==n)return n;var r=t;Array.isArray(t)||(r=t.split("."));for(var i=r.length,o=-1;e&&++o<i;)e=e[r[o]];return e}function c(e){return"object"==typeof e}var u=function(){var e=[],t=0,n={};function r(){for(var n=0,r=e[n],i=1;i<t;){var o=i+1;n=i,o<t&&e[o].score<e[i].score&&(n=o),e[n-1>>1]=e[n],i=1+(n<<1)}for(var a=n-1>>1;n>0&&r.score<e[a].score;a=(n=a)-1>>1)e[n]=e[a];e[n]=r}return n.add=function(n){var r=t;e[t++]=n;for(var i=r-1>>1;r>0&&n.score<e[i].score;i=(r=i)-1>>1)e[r]=e[i];e[r]=n},n.poll=function(){if(0!==t){var n=e[0];return e[0]=e[--t],r(),n}},n.peek=function(n){if(0!==t)return e[0]},n.replaceTop=function(t){e[0]=t,r()},n},d=u();return function f(p){var h={single:function(e,t,n){return e?(c(e)||(e=h.getPreparedSearch(e)),t?(c(t)||(t=h.getPrepared(t)),((n&&void 0!==n.allowTypo?n.allowTypo:!p||void 0===p.allowTypo||p.allowTypo)?h.algorithm:h.algorithmNoTypo)(e,t,e[0])):null):null},go:function(e,t,n){if(!e)return r;var i=(e=h.prepareSearch(e))[0],o=n&&n.threshold||p&&p.threshold||-9007199254740991,a=n&&n.limit||p&&p.limit||9007199254740991,u=(n&&void 0!==n.allowTypo?n.allowTypo:!p||void 0===p.allowTypo||p.allowTypo)?h.algorithm:h.algorithmNoTypo,f=0,g=0,m=t.length;if(n&&n.keys)for(var v=n.scoreFn||s,b=n.keys,y=b.length,w=m-1;w>=0;--w){for(var x=t[w],k=new Array(y),_=y-1;_>=0;--_)(T=l(x,E=b[_]))?(c(T)||(T=h.getPrepared(T)),k[_]=u(e,T,i)):k[_]=null;k.obj=x;var C=v(k);null!==C&&(C<o||(k.score=C,f<a?(d.add(k),++f):(++g,C>d.peek().score&&d.replaceTop(k))))}else if(n&&n.key){var E=n.key;for(w=m-1;w>=0;--w)(T=l(x=t[w],E))&&(c(T)||(T=h.getPrepared(T)),null!==(S=u(e,T,i))&&(S.score<o||(S={target:S.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:S.score,indexes:S.indexes,obj:x},f<a?(d.add(S),++f):(++g,S.score>d.peek().score&&d.replaceTop(S)))))}else for(w=m-1;w>=0;--w){var T,S;(T=t[w])&&(c(T)||(T=h.getPrepared(T)),null!==(S=u(e,T,i))&&(S.score<o||(f<a?(d.add(S),++f):(++g,S.score>d.peek().score&&d.replaceTop(S)))))}if(0===f)return r;var D=new Array(f);for(w=f-1;w>=0;--w)D[w]=d.poll();return D.total=f+g,D},goAsync:function(t,n,i){var o=!1,a=new Promise((function(a,d){if(!t)return a(r);var f=(t=h.prepareSearch(t))[0],g=u(),m=n.length-1,v=i&&i.threshold||p&&p.threshold||-9007199254740991,b=i&&i.limit||p&&p.limit||9007199254740991,y=(i&&void 0!==i.allowTypo?i.allowTypo:!p||void 0===p.allowTypo||p.allowTypo)?h.algorithm:h.algorithmNoTypo,w=0,x=0;function k(){if(o)return d("canceled");var u=Date.now();if(i&&i.keys)for(var p=i.scoreFn||s,_=i.keys,C=_.length;m>=0;--m){for(var E=n[m],T=new Array(C),S=C-1;S>=0;--S)(O=l(E,A=_[S]))?(c(O)||(O=h.getPrepared(O)),T[S]=y(t,O,f)):T[S]=null;T.obj=E;var D=p(T);if(null!==D&&!(D<v)&&(T.score=D,w<b?(g.add(T),++w):(++x,D>g.peek().score&&g.replaceTop(T)),m%1e3==0&&Date.now()-u>=10))return void(e?setImmediate(k):setTimeout(k))}else if(i&&i.key){for(var A=i.key;m>=0;--m)if((O=l(E=n[m],A))&&(c(O)||(O=h.getPrepared(O)),null!==($=y(t,O,f))&&!($.score<v)&&($={target:$.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:$.score,indexes:$.indexes,obj:E},w<b?(g.add($),++w):(++x,$.score>g.peek().score&&g.replaceTop($)),m%1e3==0&&Date.now()-u>=10)))return void(e?setImmediate(k):setTimeout(k))}else for(;m>=0;--m){var O,$;if((O=n[m])&&(c(O)||(O=h.getPrepared(O)),null!==($=y(t,O,f))&&!($.score<v)&&(w<b?(g.add($),++w):(++x,$.score>g.peek().score&&g.replaceTop($)),m%1e3==0&&Date.now()-u>=10)))return void(e?setImmediate(k):setTimeout(k))}if(0===w)return a(r);for(var M=new Array(w),I=w-1;I>=0;--I)M[I]=g.poll();M.total=w+x,a(M)}e?setImmediate(k):k()}));return a.cancel=function(){o=!0},a},highlight:function(e,t,n){if(null===e)return null;void 0===t&&(t="<b>"),void 0===n&&(n="</b>");for(var r="",i=0,o=!1,a=e.target,s=a.length,l=e.indexes,c=0;c<s;++c){var u=a[c];if(l[i]===c){if(o||(o=!0,r+=t),++i===l.length){r+=u+n+a.substr(c+1);break}}else o&&(o=!1,r+=n);r+=u}return r},prepare:function(e){if(e)return{target:e,_targetLowerCodes:h.prepareLowerCodes(e),_nextBeginningIndexes:null,score:null,indexes:null,obj:null}},prepareSlow:function(e){if(e)return{target:e,_targetLowerCodes:h.prepareLowerCodes(e),_nextBeginningIndexes:h.prepareNextBeginningIndexes(e),score:null,indexes:null,obj:null}},prepareSearch:function(e){if(e)return h.prepareLowerCodes(e)},getPrepared:function(e){if(e.length>999)return h.prepare(e);var n=t.get(e);return void 0!==n||(n=h.prepare(e),t.set(e,n)),n},getPreparedSearch:function(e){if(e.length>999)return h.prepareSearch(e);var t=n.get(e);return void 0!==t||(t=h.prepareSearch(e),n.set(e,t)),t},algorithm:function(e,t,n){for(var r=t._targetLowerCodes,a=e.length,s=r.length,l=0,c=0,u=0,d=0;;){if(n===r[c]){if(i[d++]=c,++l===a)break;n=e[0===u?l:u===l?l+1:u===l-1?l-1:l]}if(++c>=s)for(;;){if(l<=1)return null;if(0===u){if(n===e[--l])continue;u=l}else{if(1===u)return null;if((n=e[1+(l=--u)])===e[l])continue}c=i[(d=l)-1]+1;break}}l=0;var f=0,p=!1,g=0,m=t._nextBeginningIndexes;null===m&&(m=t._nextBeginningIndexes=h.prepareNextBeginningIndexes(t.target));var v=c=0===i[0]?0:m[i[0]-1];if(c!==s)for(;;)if(c>=s){if(l<=0){if(++f>a-2)break;if(e[f]===e[f+1])continue;c=v;continue}--l,c=m[o[--g]]}else if(e[0===f?l:f===l?l+1:f===l-1?l-1:l]===r[c]){if(o[g++]=c,++l===a){p=!0;break}++c}else c=m[c];if(p)var b=o,y=g;else b=i,y=d;for(var w=0,x=-1,k=0;k<a;++k)x!==(c=b[k])-1&&(w-=c),x=c;for(p?0!==f&&(w+=-20):(w*=1e3,0!==u&&(w+=-20)),w-=s-a,t.score=w,t.indexes=new Array(y),k=y-1;k>=0;--k)t.indexes[k]=b[k];return t},algorithmNoTypo:function(e,t,n){for(var r=t._targetLowerCodes,a=e.length,s=r.length,l=0,c=0,u=0;;){if(n===r[c]){if(i[u++]=c,++l===a)break;n=e[l]}if(++c>=s)return null}l=0;var d=!1,f=0,p=t._nextBeginningIndexes;if(null===p&&(p=t._nextBeginningIndexes=h.prepareNextBeginningIndexes(t.target)),(c=0===i[0]?0:p[i[0]-1])!==s)for(;;)if(c>=s){if(l<=0)break;--l,c=p[o[--f]]}else if(e[l]===r[c]){if(o[f++]=c,++l===a){d=!0;break}++c}else c=p[c];if(d)var g=o,m=f;else g=i,m=u;for(var v=0,b=-1,y=0;y<a;++y)b!==(c=g[y])-1&&(v-=c),b=c;for(d||(v*=1e3),v-=s-a,t.score=v,t.indexes=new Array(m),y=m-1;y>=0;--y)t.indexes[y]=g[y];return t},prepareLowerCodes:function(e){for(var t=e.length,n=[],r=e.toLowerCase(),i=0;i<t;++i)n[i]=r.charCodeAt(i);return n},prepareBeginningIndexes:function(e){for(var t=e.length,n=[],r=0,i=!1,o=!1,a=0;a<t;++a){var s=e.charCodeAt(a),l=s>=65&&s<=90,c=l||s>=97&&s<=122||s>=48&&s<=57,u=l&&!i||!o||!c;i=l,o=c,u&&(n[r++]=a)}return n},prepareNextBeginningIndexes:function(e){for(var t=e.length,n=h.prepareBeginningIndexes(e),r=[],i=n[0],o=0,a=0;a<t;++a)i>a?r[a]=i:(i=n[++o],r[a]=void 0===i?t:i);return r},cleanup:a,new:f};return h}()},e.exports?e.exports=n():t.fuzzysort=n()}));function Wu(e,t,n){const r=e.slice();return r[16]=t[n],r}function Gu(e){let t,n,r,i,a,s,l,c,u,d,f,h,g,m,v,b,y=e[1],T=[];for(let t=0;t<y.length;t+=1)T[t]=ed(Wu(e,y,t));return{c(){t=C("div"),n=C("div"),r=C("div"),i=E("svg"),a=E("circle"),s=E("path"),l=S(),c=C("input"),u=S(),d=C("ul");for(let e=0;e<T.length;e+=1)T[e].c();$(a,"cx","11"),$(a,"cy","11"),$(a,"r","8"),$(s,"d","M21 21l-4.35-4.35"),$(i,"width","24"),$(i,"height","24"),$(i,"fill","none"),$(i,"stroke","currentColor"),$(i,"stroke-width","2"),$(i,"stroke-linecap","round"),$(i,"stroke-linejoin","round"),$(i,"class","absolute text-dark m-4"),$(c,"id","cmdInput"),$(c,"class","dark:text-dark dark:bg-dark-300 text-light text-2xl pl-12 pr-2 py-2 w-full bg-light-300 border border-transparent border-indigo-500 appearance-none leading-normal rounded outline-none"),$(c,"type","text"),$(r,"class","px-2"),$(d,"class","mt-2"),$(n,"class","bg-light-200 dark:bg-dark-200 mt-24 w-3/4 md:w-2/3 xl:w-1/2 mx-auto rounded py-2 shadow-lg"),$(t,"class","absolute w-full top-0 left-0 h-screen z-10 bg-dark-300-75")},m(o,g){x(o,t,g),w(t,n),w(n,r),w(r,i),w(i,a),w(i,s),w(r,l),w(r,c),I(c,e[0]),w(n,u),w(n,d);for(let e=0;e<T.length;e+=1)T[e].m(d,null);e[15](d),m=!0,v||(b=[A(c,"input",e[12]),A(c,"keyup",e[7]),p(f=e[5].call(null,n)),p(h=e[9].call(null,t)),A(t,"keyup",O(e[11]))],v=!0)},p(e,t){if(1&t&&c.value!==e[0]&&I(c,e[0]),322&t){let n;for(y=e[1],n=0;n<y.length;n+=1){const r=Wu(e,y,n);T[n]?T[n].p(r,t):(T[n]=ed(r),T[n].c(),T[n].m(d,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=y.length}},i(e){m||(oe(()=>{g||(g=ye(t,Ot,{duration:100},!0)),g.run(1)}),m=!0)},o(e){g||(g=ye(t,Ot,{duration:100},!1)),g.run(0),m=!1},d(n){n&&k(t),_(T,n),e[15](null),n&&g&&g.end(),v=!1,o(b)}}}function Xu(e){let t;return{c(){t=C("span"),t.textContent="Card",$(t,"class","rounded border border-2 px-2 uppercase text-sm mr-1 text-red-500 border-red-500 dark:text-red-300 dark:border-red-300")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function Ju(e){let t;return{c(){t=C("span"),t.textContent="Board",$(t,"class","rounded border border-2 px-2 uppercase text-sm mr-1 text-green-500 border-green-500 dark:text-green-300 dark:border-green-300")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function Zu(e){let t,n=e[16].obj.text+"";return{c(){t=T(n)},m(e,n){x(e,t,n)},p(e,r){2&r&&n!==(n=e[16].obj.text+"")&&M(t,n)},d(e){e&&k(t)}}}function Qu(e){let t,n,r=Vu.highlight(e[16],'<span class="font-bold text-blue-400">',"</span>")+"";return{c(){n=D(),t=new j(n)},m(e,i){t.m(r,e,i),x(e,n,i)},p(e,n){2&n&&r!==(r=Vu.highlight(e[16],'<span class="font-bold text-blue-400">',"</span>")+"")&&t.p(r)},d(e){e&&k(n),e&&t.d()}}}function ed(e){let t,n,r,i,a;function s(e,t){return e[16].obj.type==Lt.BOARD?Ju:e[16].obj.type==Lt.CARD?Xu:void 0}let l=s(e),c=l&&l(e);function u(e,t){return e[16].target?Qu:Zu}let d=u(e),f=d(e);function p(...t){return e[13](e[16],...t)}function h(...t){return e[14](e[16],...t)}return{c(){t=C("li"),c&&c.c(),n=S(),f.c(),r=S(),$(t,"class","result px-2 py-1 font-bold text-light dark:text-dark text-lg cursor-pointer focus:font-bold focus:bg-light-100 dark:focus:bg-dark-100 hover:bg-light-100-50 dark:hover:bg-dark-100-50 outline-none truncate"),$(t,"tabindex","0")},m(e,o){x(e,t,o),c&&c.m(t,null),w(t,n),f.m(t,null),w(t,r),i||(a=[A(t,"keydown",p),A(t,"click",h)],i=!0)},p(i,o){l!==(l=s(e=i))&&(c&&c.d(1),c=l&&l(e),c&&(c.c(),c.m(t,n))),d===(d=u(e))&&f?f.p(e,o):(f.d(1),f=d(e),f&&(f.c(),f.m(t,r)))},d(e){e&&k(t),c&&c.d(),f.d(),i=!1,o(a)}}}function td(e){let t,n,r=e[2].showCommandPalette&&Gu(e);return{c(){r&&r.c(),t=D()},m(e,i){r&&r.m(e,i),x(e,t,i),n=!0},p(e,[n]){e[2].showCommandPalette?r?(r.p(e,n),4&n&&me(r,1)):(r=Gu(e),r.c(),me(r,1),r.m(t.parentNode,t)):r&&(he(),ve(r,1,1,()=>{r=null}),ge())},i(e){n||(me(r),n=!0)},o(e){ve(r),n=!1},d(e){r&&r.d(e),e&&k(t)}}}function nd(e,t,n){let r,i,o=G("nimbo");c(e,o,e=>n(2,r=e));let a="",s=[],l=[];V(()=>{s.length&&i&&i.querySelector("li").classList.add("focused")});const u=(e,t)=>{"ArrowUp"==e.key?e.target.previousElementSibling?(e.target.classList.remove("focused"),e.target.previousElementSibling.classList.add("focused"),e.target.previousElementSibling.focus()):document.querySelector("#cmdInput").focus():"ArrowDown"==e.key?e.target.nextElementSibling&&(e.target.classList.remove("focused"),e.target.nextElementSibling.classList.add("focused"),e.target.nextElementSibling.focus()):"Escape"==e.key?(r.closePalette(),o.set(r)):"Enter"==e.key&&d(t)},d=e=>{r.closePalette(),r.setSelectedCard(null),o.set(r),Ue(e.obj.path)};return e.$$.update=()=>{if(4&e.$$.dirty&&n(10,l=r.everything()),1027&e.$$.dirty){let e=a,t=l;a.startsWith("b/")?(e=a.replace("b/",""),t=l.filter(e=>e.type==Lt.BOARD)):a.startsWith("c/")&&(e=a.replace("c/",""),t=l.filter(e=>e.type==Lt.CARD)),n(1,s=e?Vu.go(e,t,{limit:12,allowTypo:!1,key:"text"}):t.map(e=>({obj:e}))),n(1,s=s.sort((e,t)=>e.obj.type<t.obj.type?-1:e.obj.type>t.obj.type?1:0).slice(0,12))}},[a,s,r,i,o,e=>Ht(e,(function(){r.closePalette(),o.set(r)})),u,e=>{if("ArrowDown"==e.key){let e=Array.from(document.querySelectorAll(".result"));e.length>1?(e[0].classList.remove("focused"),e[1].classList.add("focused"),e[1].focus()):1==e.length&&(e[0].classList.add("focused"),e[0].focus())}else if("Escape"==e.key)r.closePalette(),o.set(r);else if("Enter"==e.key){let e=Array.from(document.querySelectorAll(".result"));e.length&&e[0].click()}},d,()=>{n(0,a="");let e=document.querySelector("#cmdInput");e.value="",e.focus()},l,function(t){X(e,t)},function(){a=this.value,n(0,a)},(e,t)=>u(t,e),(e,t)=>d(e),function(e){Z[e?"unshift":"push"](()=>{i=e,n(3,i)})}]}class rd extends $e{constructor(e){super(),Oe(this,e,nd,td,s,{})}}function id(t){let n,r,i,o,a,s,l,c,u;return{c(){n=C("div"),r=C("div"),r.textContent="\\_()_/",i=S(),o=C("h1"),o.textContent="Board not found",a=S(),s=C("a"),s.textContent="View all boards",$(r,"class","text-center text-2xl mt-6"),$(o,"class","text-center font-bold text-2xl mt-2 mb-4"),$(s,"class","link text-center text-lg"),$(s,"href","/"),$(n,"class","flex flex-col p-3 max-h-full")},m(e,t){x(e,n,t),w(n,r),w(n,i),w(n,o),w(n,a),w(n,s),c||(u=p(l=ze.call(null,s)),c=!0)},p:e,i:e,o:e,d(e){e&&k(n),c=!1,u()}}}function od(e){let t,n,r,i,o,a,s,l,c,u;return r=new At({props:{content:e[1].boards[e[0]].title,isTitle:!0}}),r.$on("updateTitle",e[4]),a=new qu({props:{labels:e[1].boards[e[0]].labels}}),a.$on("update",e[5]),c=new Ru({props:{boardId:e[1].boards[e[0]].id}}),{c(){t=C("div"),n=C("div"),Se(r.$$.fragment),i=S(),o=C("div"),Se(a.$$.fragment),s=S(),l=C("div"),Se(c.$$.fragment),$(n,"class","mb-1"),$(o,"class","flex space-x-2"),$(l,"class","flex flex-col min-h-0 max-h-full w-full mt-2"),$(t,"class","flex flex-col p-3 max-h-full")},m(e,d){x(e,t,d),w(t,n),De(r,n,null),w(t,i),w(t,o),De(a,o,null),w(t,s),w(t,l),De(c,l,null),u=!0},p(e,t){const n={};3&t&&(n.content=e[1].boards[e[0]].title),r.$set(n);const i={};3&t&&(i.labels=e[1].boards[e[0]].labels),a.$set(i);const o={};3&t&&(o.boardId=e[1].boards[e[0]].id),c.$set(o)},i(e){u||(me(r.$$.fragment,e),me(a.$$.fragment,e),me(c.$$.fragment,e),u=!0)},o(e){ve(r.$$.fragment,e),ve(a.$$.fragment,e),ve(c.$$.fragment,e),u=!1},d(e){e&&k(t),Ae(r),Ae(a),Ae(c)}}}function ad(e){let t,n,r,i,o,a,s,l,c,u;t=new rd({}),document.title=r=e[2];const d=[od,id],f=[];function p(e,t){return e[0]>-1?0:1}return a=p(e),s=f[a]=d[a](e),{c(){Se(t.$$.fragment),n=S(),i=S(),o=C("div"),s.c(),$(o,"class","flex flex-col min-h-screen max-h-full h-screen overflow-hidden bg-light-300 dark:bg-dark-300 text-light dark:text-dark")},m(r,s){De(t,r,s),x(r,n,s),x(r,i,s),x(r,o,s),f[a].m(o,null),l=!0,c||(u=A(window,"keyup",e[6]),c=!0)},p(e,[t]){(!l||4&t)&&r!==(r=e[2])&&(document.title=r);let n=a;a=p(e),a===n?f[a].p(e,t):(he(),ve(f[n],1,1,()=>{f[n]=null}),ge(),s=f[a],s?s.p(e,t):(s=f[a]=d[a](e),s.c()),me(s,1),s.m(o,null))},i(e){l||(me(t.$$.fragment,e),me(s),l=!0)},o(e){ve(t.$$.fragment,e),ve(s),l=!1},d(e){Ae(t,e),e&&k(n),e&&k(i),e&&k(o),f[a].d(),c=!1,u()}}}function sd(e,t,n){let r;var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let o,{params:a={}}=t;const s=G("nimbo");c(e,s,e=>n(1,r=e));let l;return q(()=>{l>-1&&r.updateViewTime(r.boards[l].id)}),e.$$set=e=>{"params"in e&&n(7,a=e.params)},e.$$.update=()=>{130&e.$$.dirty&&n(0,l=r.boards.findIndex(e=>e.id===a.boardId)),3&e.$$.dirty&&n(2,o=l>-1?r.boards[l].title+" | nimbo":"Board not found | nimbo")},[l,r,o,s,e=>i(void 0,void 0,void 0,(function*(){r.updateBoardTitle(r.boards[l].id,e.detail),s.set(r)})),e=>i(void 0,void 0,void 0,(function*(){r.updateLabels(r.boards[l].id,e.detail),s.set(r)})),e=>{e.target.closest(".flatpickr-calendar")||("Space"===e.code?(r.openPalette(),s.set(r)):"h"===e.key&&(r.closePalette(),r.setSelectedCard(null),Ue("/")))},a]}class ld extends $e{constructor(e){super(),Oe(this,e,sd,ad,s,{params:7})}}function cd(t){let n,r,i,o,a,s,l,c,u;return{c(){n=C("div"),r=C("div"),r.textContent="\\_()_/",i=S(),o=C("h1"),o.textContent="Card not found",a=S(),s=C("a"),s.textContent="Go to home",$(r,"class","text-center text-2xl mt-6"),$(o,"class","text-center font-bold text-2xl mt-2 mb-4"),$(s,"class","link text-center text-lg"),$(s,"href","/"),$(n,"class","flex flex-col p-3 max-h-full")},m(e,t){x(e,n,t),w(n,r),w(n,i),w(n,o),w(n,a),w(n,s),c||(u=p(l=ze.call(null,s)),c=!0)},p:e,i:e,o:e,d(e){e&&k(n),c=!1,u()}}}function ud(e){let t,n;return t=new Du({props:{cardDetails:e[0],inline:!1}}),t.$on("update",e[6]),t.$on("delete",e[8]),{c(){Se(t.$$.fragment)},m(e,r){De(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.cardDetails=e[0]),t.$set(r)},i(e){n||(me(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function dd(e){let t,n,r,i,o,a,s,l,c,u,d;document.title=t=e[4],r=new oc({props:{isConfirmModalOpen:e[1],modalMessage:e[2],onConfirm:e[3]}}),r.$on("close",e[7]);const f=[ud,cd],p=[];function h(e,t){return e[0]?0:1}return s=h(e),l=p[s]=f[s](e),{c(){n=S(),Se(r.$$.fragment),i=S(),o=C("div"),a=C("div"),l.c(),$(a,"class","w-3/4 py-8 mx-auto"),$(o,"class","min-h-screen h-full bg-light-300 dark:bg-dark-300 text-light dark:text-dark")},m(t,l){x(t,n,l),De(r,t,l),x(t,i,l),x(t,o,l),w(o,a),p[s].m(a,null),c=!0,u||(d=A(window,"keyup",e[9]),u=!0)},p(e,[n]){(!c||16&n)&&t!==(t=e[4])&&(document.title=t);const i={};2&n&&(i.isConfirmModalOpen=e[1]),4&n&&(i.modalMessage=e[2]),8&n&&(i.onConfirm=e[3]),r.$set(i);let o=s;s=h(e),s===o?p[s].p(e,n):(he(),ve(p[o],1,1,()=>{p[o]=null}),ge(),l=p[s],l?l.p(e,n):(l=p[s]=f[s](e),l.c()),me(l,1),l.m(a,null))},i(e){c||(me(r.$$.fragment,e),me(l),c=!0)},o(e){ve(r.$$.fragment,e),ve(l),c=!1},d(e){e&&k(n),Ae(r,e),e&&k(i),e&&k(o),p[s].d(),u=!1,d()}}}function fd(e,t,n){let r;var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let o,a,s,l,{params:u={}}=t,d=!1,f=()=>{};const p=G("nimbo");c(e,p,e=>n(12,r=e));return e.$$set=e=>{"params"in e&&n(10,u=e.params)},e.$$.update=()=>{7168&e.$$.dirty&&(n(11,a=r.getCardDetails(u.cardId)),a&&n(0,o=a)),1&e.$$.dirty&&n(4,l=o?o.card.title+" | nimbo":"Card not found | nimbo")},[o,d,s,f,l,p,e=>i(void 0,void 0,void 0,(function*(){e.detail.card?yield r.updateCard(e.detail.card,e.detail.property):yield r.deleteCard(e.detail.list,e.detail.cardId),p.set(r)})),()=>{n(1,d=!1)},e=>i(void 0,void 0,void 0,(function*(){n(2,s=e.detail.message),n(1,d=!0),n(3,f=e.detail.onConfirm)})),e=>{"b"===e.key&&o&&Ue("/b/"+o.board.id)},u,a,r]}class pd extends $e{constructor(e){super(),Oe(this,e,fd,dd,s,{params:10})}}var hd=eu((function(e,t){!function(){function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function n(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){s(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof Qc&&Qc.global===Qc?Qc:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,t,a){var s=o.URL||o.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):r(l.href)?n(e,t,a):i(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,o,a){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),o);else if(r(e))n(e,o,a);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){i(s)}))}}:function(e,t,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,r);var s="application/octet-stream"===e.type,l=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&l||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},u.readAsDataURL(e)}else{var d=o.URL||o.webkitURL,f=d.createObjectURL(e);i?i.location=f:location.href=f,i=null,setTimeout((function(){d.revokeObjectURL(f)}),4e4)}});o.saveAs=s.saveAs=s,e.exports=s}()}));function gd(e){let t;return{c(){t=C("div"),t.textContent="Could not import board!",$(t,"class","mt-4 text-red-400 p-1 w-full font-bold text-center rounded")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function md(e){let t,n,r,i,a,s,l,c,u,d,f,p,h=e[2]&&gd();return{c(){t=C("div"),n=C("form"),r=C("input"),i=S(),a=C("button"),a.textContent="Create board",s=S(),l=C("div"),l.innerHTML='<div class="">OR</div>',c=S(),u=C("div"),u.innerHTML="<span>Import from Trello.</span> \n        <span>Export board as JSON and paste (CTRL + V) here!</span>",d=S(),h&&h.c(),$(r,"title","Please enter a valid board name"),$(r,"autocomplete","off"),$(r,"pattern",".*\\S+.*"),$(r,"class","text-light dark:text-dark text-2xl p-2 shadow-none w-full bg-light-300 dark:bg-dark-300 border border-transparent focus:border-indigo-500 appearance-none leading-normal rounded outline-none"),$(r,"placeholder","Board name"),r.required=!0,$(r,"type","text"),$(a,"type","submit"),$(a,"class","mt-4 bg-indigo-600 w-full hover:bg-indigo-700 text-white text-xl font-bold py-2 px-4 rounded"),$(l,"class","my-4 text-lg text-center"),$(u,"class","border border-dashed border-light flex flex-col space-y-2 text-center py-4 text-lg opacity-75"),$(t,"class","p-4")},m(o,g){x(o,t,g),w(t,n),w(n,r),I(r,e[1]),w(n,i),w(n,a),w(n,s),w(n,l),w(n,c),w(n,u),w(n,d),h&&h.m(n,null),f||(p=[A(r,"input",e[9]),A(r,"keydown",e[4]),A(r,"keyup",O(e[8])),A(n,"submit",e[6]),A(t,"paste",e[7])],f=!0)},p(e,t){2&t&&r.value!==e[1]&&I(r,e[1]),e[2]?h||(h=gd(),h.c(),h.m(n,null)):h&&(h.d(1),h=null)},d(e){e&&k(t),h&&h.d(),f=!1,o(p)}}}function vd(e){let t,n;return t=new tc({props:{isOpen:e[0],$$slots:{default:[md]},$$scope:{ctx:e}}}),t.$on("close",e[5]),{c(){Se(t.$$.fragment)},m(e,r){De(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.isOpen=e[0]),8198&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(me(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function bd(e,t,n){let r;var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let{isOpen:o}=t,a="",s=!1;const l=W(),u=G("nimbo");c(e,u,e=>n(10,r=e));const d=e=>i(void 0,void 0,void 0,(function*(){if(e.preventDefault(),a){Ue("/b/"+(yield r.createBoard(a)))}}));return e.$$set=e=>{"isOpen"in e&&n(0,o=e.isOpen)},e.$$.update=()=>{1&e.$$.dirty&&o&&n(1,a="")},[o,a,s,u,e=>{"Enter"==e.key&&d(e)},e=>{n(2,s=!1),l("close")},d,e=>i(void 0,void 0,void 0,(function*(){if("INPUT"===e.target.tagName)return;let t=e.clipboardData.getData("text");try{let e=JSON.parse(t),n=yield r.importTrelloBoard(e);yield r.init(),Ue("/b/"+n)}catch(e){n(2,s=!0)}})),function(t){X(e,t)},function(){a=this.value,n(1,a),n(0,o)}]}class yd extends $e{constructor(e){super(),Oe(this,e,bd,vd,s,{isOpen:0})}}const{document:wd,window:xd}=we;function kd(e,t,n){const r=e.slice();return r[31]=t[n],r}function _d(e,t,n){const r=e.slice();return r[34]=t[n],r}function Cd(e,t,n){const r=e.slice();return r[37]=t[n],r}function Ed(t){let n;return{c(){n=T("Hide archived boards")},m(e,t){x(e,n,t)},p:e,d(e){e&&k(n)}}}function Td(e){let t,n,r=e[7]?`(${e[7]})`:"";return{c(){t=T("Show archived boards "),n=T(r)},m(e,r){x(e,t,r),x(e,n,r)},p(e,t){128&t[0]&&r!==(r=e[7]?`(${e[7]})`:"")&&M(n,r)},d(e){e&&k(t),e&&k(n)}}}function Sd(e){let t,n,r;return{c(){t=E("svg"),n=E("path"),r=T("\n                Dark"),$(n,"d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"),$(t,"width","16"),$(t,"height","16"),$(t,"viewBox","0 0 24 24"),$(t,"fill","none"),$(t,"stroke","currentColor"),$(t,"stroke-width","2"),$(t,"stroke-linecap","round"),$(t,"stroke-linejoin","round"),$(t,"class","mr-2")},m(e,i){x(e,t,i),w(t,n),x(e,r,i)},d(e){e&&k(t),e&&k(r)}}}function Dd(e){let t,n,r,i,o,a,s,l,c,u,d;return{c(){t=E("svg"),n=E("circle"),r=E("line"),i=E("line"),o=E("line"),a=E("line"),s=E("line"),l=E("line"),c=E("line"),u=E("line"),d=T("\n              Light"),$(n,"cx","12"),$(n,"cy","12"),$(n,"r","5"),$(r,"x1","12"),$(r,"y1","1"),$(r,"x2","12"),$(r,"y2","3"),$(i,"x1","12"),$(i,"y1","21"),$(i,"x2","12"),$(i,"y2","23"),$(o,"x1","4.22"),$(o,"y1","4.22"),$(o,"x2","5.64"),$(o,"y2","5.64"),$(a,"x1","18.36"),$(a,"y1","18.36"),$(a,"x2","19.78"),$(a,"y2","19.78"),$(s,"x1","1"),$(s,"y1","12"),$(s,"x2","3"),$(s,"y2","12"),$(l,"x1","21"),$(l,"y1","12"),$(l,"x2","23"),$(l,"y2","12"),$(c,"x1","4.22"),$(c,"y1","19.78"),$(c,"x2","5.64"),$(c,"y2","18.36"),$(u,"x1","18.36"),$(u,"y1","5.64"),$(u,"x2","19.78"),$(u,"y2","4.22"),$(t,"width","16"),$(t,"height","16"),$(t,"viewBox","0 0 24 24"),$(t,"fill","none"),$(t,"stroke","currentColor"),$(t,"stroke-width","2"),$(t,"stroke-linecap","round"),$(t,"stroke-linejoin","round"),$(t,"class","mr-2")},m(e,f){x(e,t,f),w(t,n),w(t,r),w(t,i),w(t,o),w(t,a),w(t,s),w(t,l),w(t,c),w(t,u),x(e,d,f)},d(e){e&&k(t),e&&k(d)}}}function Ad(e){let t,n,r,i,o,s,l,c,u,d,f=e[37].title+"";return{c(){t=C("a"),n=C("div"),i=S(),o=C("span"),s=T(f),l=S(),$(n,"class","flex-none h-6 w-6 rounded mr-2"),$(n,"style",r="background-color: "+It[e[37].color]),$(o,"class","truncate"),$(t,"title",c=e[37].title),$(t,"class","block flex hover:bg-light-100 dark:hover:bg-dark-200 p-2 rounded cursor-pointer font-bold")},m(r,c){x(r,t,c),w(t,n),w(t,i),w(t,o),w(o,s),w(t,l),u||(d=A(t,"click",(function(){a(Ue("/b/"+e[37].id))&&Ue("/b/"+e[37].id).apply(this,arguments)})),u=!0)},p(i,o){e=i,256&o[0]&&r!==(r="background-color: "+It[e[37].color])&&$(n,"style",r),256&o[0]&&f!==(f=e[37].title+"")&&M(s,f),256&o[0]&&c!==(c=e[37].title)&&$(t,"title",c)},d(e){e&&k(t),u=!1,d()}}}function Od(e){let t,n,r,i,o,s,l,c,u,d,f=e[34].title+"";return{c(){t=C("a"),n=C("div"),i=S(),o=C("span"),s=T(f),l=S(),$(n,"class","flex-none h-6 w-6 rounded mr-2"),$(n,"style",r="background-color: "+It[e[34].color]),$(o,"class","truncate"),$(t,"title",c=e[34].title),$(t,"class","block flex hover:bg-light-100 dark:hover:bg-dark-200 p-2 rounded cursor-pointer font-bold")},m(r,c){x(r,t,c),w(t,n),w(t,i),w(t,o),w(o,s),w(t,l),u||(d=A(t,"click",(function(){a(Ue("/b/"+e[34].id))&&Ue("/b/"+e[34].id).apply(this,arguments)})),u=!0)},p(i,o){e=i,512&o[0]&&r!==(r="background-color: "+It[e[34].color])&&$(n,"style",r),512&o[0]&&f!==(f=e[34].title+"")&&M(s,f),512&o[0]&&c!==(c=e[34].title)&&$(t,"title",c)},d(e){e&&k(t),u=!1,d()}}}function $d(e){let t;return{c(){t=C("div"),t.textContent="Archived",$(t,"class","absolute bg-indigo-500 mt-2 w-28 -mr-10 text-center top-0 right-0 transform rotate-45 text-white text-xs")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function Md(e){let t,n,r,i;function o(...t){return e[24](e[31],...t)}return{c(){t=C("div"),n=C("button"),n.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg>',$(n,"class","mr-4 transform ease-in-out hover:scale-150"),$(t,"class","block group-hover:hidden")},m(e,a){x(e,t,a),w(t,n),r||(i=A(n,"click",O(o)),r=!0)},p(t,n){e=t},d(e){e&&k(t),r=!1,i()}}}function Id(e,t){let n,r,i,a,s,l,c,u,d,f,p,h,g,m,v,b,y,_,D,I,P,N,L,j,R,B,F,U=t[31].title+"",z=t[31].isArchived&&$d(),H=t[31].isStarred&&Md(t);function K(...e){return t[25](t[31],...e)}function Y(...e){return t[26](t[31],...e)}function q(...e){return t[27](t[31],...e)}function V(...e){return t[28](t[31],...e)}return{key:e,first:null,c(){n=C("li"),r=C("a"),z&&z.c(),i=S(),a=C("span"),s=T(U),l=S(),c=C("div"),H&&H.c(),u=S(),d=C("div"),f=C("button"),p=E("svg"),h=E("path"),m=S(),v=C("button"),b=E("svg"),y=E("polyline"),_=E("rect"),D=E("line"),P=S(),N=C("button"),N.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>',L=S(),$(a,"class","truncate-2-lines"),$(h,"d","M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"),$(p,"width","16"),$(p,"height","16"),$(p,"viewBox","0 0 24 24"),$(p,"fill",g=t[31].isStarred?"currentColor":"none"),$(p,"stroke","currentColor"),$(p,"stroke-width","2"),$(p,"stroke-linecap","round"),$(p,"stroke-linejoin","round"),$(f,"title","Star board"),$(f,"class","mr-4 transform ease-in-out hover:scale-150"),$(y,"points","21 8 21 21 3 21 3 8"),$(_,"x","1"),$(_,"y","3"),$(_,"width","22"),$(_,"height","5"),$(D,"x1","10"),$(D,"y1","12"),$(D,"x2","14"),$(D,"y2","12"),$(b,"width","16"),$(b,"height","16"),$(b,"viewBox","0 0 24 24"),$(b,"fill",I=t[31].isArchived?"currentColor":"none"),$(b,"stroke","currentColor"),$(b,"stroke-width","2"),$(b,"stroke-linecap","round"),$(b,"stroke-linejoin","round"),$(v,"title","Archive board"),$(v,"class","mr-4 transform ease-in-out hover:scale-150"),$(N,"title","Delete board"),$(N,"class","w-4 h-4 transform ease-in-out hover:scale-150"),$(d,"class","hidden group-hover:block"),$(c,"class","flex bottom-0 pl-1"),$(r,"class","flex flex-col relative group justify-between h-full"),$(n,"title",j=t[31].title),$(n,"class","p-2 w-60 h-32 overflow-hidden text-white font-semibold text-xl rounded ml-4 mb-4 cursor-pointer"),$(n,"style",R="background-color: "+It[t[31].color]),this.first=n},m(e,t){x(e,n,t),w(n,r),z&&z.m(r,null),w(r,i),w(r,a),w(a,s),w(r,l),w(r,c),H&&H.m(c,null),w(c,u),w(c,d),w(d,f),w(f,p),w(p,h),w(d,m),w(d,v),w(v,b),w(b,y),w(b,_),w(b,D),w(d,P),w(d,N),w(n,L),B||(F=[A(f,"click",O(K)),A(v,"click",O(Y)),A(N,"click",O(q)),A(r,"click",V)],B=!0)},p(e,o){(t=e)[31].isArchived?z||(z=$d(),z.c(),z.m(r,i)):z&&(z.d(1),z=null),1024&o[0]&&U!==(U=t[31].title+"")&&M(s,U),t[31].isStarred?H?H.p(t,o):(H=Md(t),H.c(),H.m(c,u)):H&&(H.d(1),H=null),1024&o[0]&&g!==(g=t[31].isStarred?"currentColor":"none")&&$(p,"fill",g),1024&o[0]&&I!==(I=t[31].isArchived?"currentColor":"none")&&$(b,"fill",I),1024&o[0]&&j!==(j=t[31].title)&&$(n,"title",j),1024&o[0]&&R!==(R="background-color: "+It[t[31].color])&&$(n,"style",R)},d(e){e&&k(n),z&&z.d(),H&&H.d(),B=!1,o(F)}}}function Pd(e){let t,n,r,i,a,s,l,c,u,d,f,p,h,g,m,v,b,y,E,T,D,O,M,I,P,N,L,j,R,B,F,U,z,H,K,Y,q,V,W,G=[],X=new Map;function J(e,t){return e[0]?Td:Ed}r=new yd({props:{isOpen:e[3]}}),r.$on("close",e[14]),a=new oc({props:{isConfirmModalOpen:e[4],modalMessage:e[5],onConfirm:e[6]}}),a.$on("close",e[15]);let Z=J(e),Q=Z(e);function ee(e,t){return"light"===e[2].settings.theme?Dd:Sd}let te=ee(e),ne=te(e),re=e[8],ie=[];for(let t=0;t<re.length;t+=1)ie[t]=Ad(Cd(e,re,t));let oe=e[9],ae=[];for(let t=0;t<oe.length;t+=1)ae[t]=Od(_d(e,oe,t));let se=e[10];const le=e=>e[31].id;for(let t=0;t<se.length;t+=1){let n=kd(e,se,t),r=le(n);X.set(r,G[t]=Id(r,n))}return{c(){t=S(),n=C("div"),Se(r.$$.fragment),i=S(),Se(a.$$.fragment),s=S(),l=C("div"),c=C("div"),u=C("h1"),u.textContent="My Boards",d=S(),f=C("button"),Q.c(),p=S(),h=C("div"),g=C("input"),m=S(),v=C("div"),b=C("button"),ne.c(),y=S(),E=C("button"),E.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>\n          Import',T=S(),D=C("button"),D.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>\n          Export',O=S(),M=C("div"),I=C("h4"),I.innerHTML='<span class="mr-2"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg></span>\n          Starred',P=S(),N=C("ul");for(let e=0;e<ie.length;e+=1)ie[e].c();L=S(),j=C("div"),R=C("h4"),R.innerHTML='<span class="mr-2"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 6v6l4 2"></path></svg></span>\n          Recently Viewed',B=S(),F=C("ul");for(let e=0;e<ae.length;e+=1)ae[e].c();U=S(),z=C("div"),H=C("ul"),K=C("li"),K.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-full"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>\n          Create a board',Y=S();for(let e=0;e<G.length;e+=1)G[e].c();var e,o,w;wd.title="My Boards | nimbo",$(u,"class","font-bold text-2xl"),$(f,"class","opacity-75 hover:opacity-100 ml-0.5"),$(g,"id","import"),$(g,"class","hidden"),$(g,"type","file"),$(b,"class","flex items-center py-1 px-2 rounded text-sm border border-transparent bg-indigo-500 text-white hover:bg-indigo-600 mr-2"),$(E,"class","flex items-center py-1 px-2 rounded text-sm border border-indigo-500 text-light dark:text-dark hover:bg-indigo-600 hover:text-white dark:hover:text-white mr-2"),$(D,"class","flex items-center py-1 px-2 rounded text-sm border border-indigo-500 text-light dark:text-dark hover:bg-indigo-600 hover:text-white dark:hover:text-white mr-2"),$(h,"class","flex my-3"),$(I,"class","flex items-center uppercase opacity-75 text-base font-semibold leading mb-1"),$(N,"class","pr-2"),$(M,"class","mt-4 mb-8"),$(R,"class","flex items-center uppercase opacity-75 text-base font-semibold leading mb-1"),$(F,"class","pr-2"),$(c,"class","w-1/4 fixed h-full pr-2 overflow-y-auto"),$(K,"class","p-2 w-60 h-32 opacity-50 hover:opacity-75 flex flex-col justify-center border border-dashed border-light dark:border-dark font-semibold text-xl text-center text-light dark:text-dark rounded ml-4 mb-3 cursor-pointer"),$(K,"tabindex","0"),$(H,"class","flex flex-wrap max-w-6xl w-full"),$(z,"class","w-3/4 h-full"),e="margin-left",o="25%",z.style.setProperty(e,o,w?"important":""),$(l,"class","flex p-8"),$(n,"class","w-full min-h-screen h-full bg-light-300 dark:bg-dark-300 text-light dark:text-dark")},m(o,k){x(o,t,k),x(o,n,k),De(r,n,null),w(n,i),De(a,n,null),w(n,s),w(n,l),w(l,c),w(c,u),w(c,d),w(c,f),Q.m(f,null),w(c,p),w(c,h),w(h,g),w(h,m),w(h,v),w(v,b),ne.m(b,null),w(h,y),w(h,E),w(h,T),w(h,D),w(c,O),w(c,M),w(M,I),w(M,P),w(M,N);for(let e=0;e<ie.length;e+=1)ie[e].m(N,null);w(c,L),w(c,j),w(j,R),w(j,B),w(j,F);for(let e=0;e<ae.length;e+=1)ae[e].m(F,null);w(l,U),w(l,z),w(z,H),w(H,K),w(H,Y);for(let e=0;e<G.length;e+=1)G[e].m(H,null);q=!0,V||(W=[A(xd,"keyup",e[19]),A(f,"click",e[21]),A(g,"change",e[23]),A(b,"click",e[22]),A(E,"click",e[18]),A(D,"click",e[17]),A(K,"click",e[13])],V=!0)},p(e,t){const n={};8&t[0]&&(n.isOpen=e[3]),r.$set(n);const i={};if(16&t[0]&&(i.isConfirmModalOpen=e[4]),32&t[0]&&(i.modalMessage=e[5]),64&t[0]&&(i.onConfirm=e[6]),a.$set(i),Z===(Z=J(e))&&Q?Q.p(e,t):(Q.d(1),Q=Z(e),Q&&(Q.c(),Q.m(f,null))),te!==(te=ee(e))&&(ne.d(1),ne=te(e),ne&&(ne.c(),ne.m(b,null))),256&t[0]){let n;for(re=e[8],n=0;n<re.length;n+=1){const r=Cd(e,re,n);ie[n]?ie[n].p(r,t):(ie[n]=Ad(r),ie[n].c(),ie[n].m(N,null))}for(;n<ie.length;n+=1)ie[n].d(1);ie.length=re.length}if(512&t[0]){let n;for(oe=e[9],n=0;n<oe.length;n+=1){const r=_d(e,oe,n);ae[n]?ae[n].p(r,t):(ae[n]=Od(r),ae[n].c(),ae[n].m(F,null))}for(;n<ae.length;n+=1)ae[n].d(1);ae.length=oe.length}if(1119232&t[0]){const n=e[10];G=Ce(G,t,le,1,e,n,X,H,xe,Id,null,kd)}},i(e){q||(me(r.$$.fragment,e),me(a.$$.fragment,e),q=!0)},o(e){ve(r.$$.fragment,e),ve(a.$$.fragment,e),q=!1},d(e){e&&k(t),e&&k(n),Ae(r),Ae(a),Q.d(),ne.d(),_(ie,e),_(ae,e);for(let e=0;e<G.length;e+=1)G[e].d();V=!1,o(W)}}}function Nd(e,t,n){let r;var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};let o,a,s,l=!0,u=!1,d=!1;const f=G("nimbo");c(e,f,e=>n(2,r=e));const p=e=>{r.toggleBoardArchive(e),f.set(r)},h=e=>{n(6,s=()=>i(void 0,void 0,void 0,(function*(){yield r.deleteBoard(e),f.set(r)}))),n(5,a="Are you sure you want to delete this board?"),n(4,d=!0)},g=e=>{r.toggleBoardStar(e),f.set(r)};let m,v,b,y;return e.$$.update=()=>{4&e.$$.dirty[0]&&n(7,m=[...r.boards].filter(e=>e.isArchived).length),4&e.$$.dirty[0]&&n(8,v=[...r.boards].filter(e=>e.isStarred).splice(0,5)),4&e.$$.dirty[0]&&n(9,b=[...r.boards].sort((e,t)=>t.lastViewTime-e.lastViewTime).splice(0,5)),5&e.$$.dirty[0]&&n(10,y=[...r.boards].filter(e=>!e.isArchived||!l).sort((e,t)=>e.title.localeCompare(t.title))),2&e.$$.dirty[0]&&o&&i(void 0,void 0,void 0,(function*(){(yield r.import(o[0]))&&window.location.reload()}))},[l,o,r,u,d,a,s,m,v,b,y,f,p,e=>{n(3,u=!0)},e=>{n(3,u=!1)},e=>{n(4,d=!1)},h,()=>i(void 0,void 0,void 0,(function*(){let e=yield r.export();hd.saveAs(e,`nimbo_${(new Date).getTime()}.db`)})),()=>{document.querySelector("#import").click()},e=>{"z"===e.key&&Ue("/zen")},g,()=>{n(0,l=!l)},()=>{r.toggleTheme(),f.set(r)},function(){o=this.files,n(1,o)},(e,t)=>g(e.id),(e,t)=>g(e.id),(e,t)=>p(e.id),(e,t)=>h(e.id),(e,t)=>Ue("/b/"+e.id)]}class Ld extends $e{constructor(e){super(),Oe(this,e,Nd,Pd,s,{},[-1,-1])}}function jd(e,t,n){const r=e.slice();return r[12]=t[n],r}function Rd(e){let t,n,r,i,o,a,s,l=[],c=new Map,u=e[4];const d=e=>e[12].value;for(let t=0;t<u.length;t+=1){let n=jd(e,u,t),r=d(n);c.set(r,l[t]=Bd(r,n))}return{c(){t=C("div"),n=C("div");for(let e=0;e<l.length;e+=1)l[e].c();$(n,"class","flex flex-col"),$(t,"class","absolute mt-0.5 w-full h-auto max-h-40 rounded-sm w-auto bg-light-100 dark:bg-dark-200 shadow-lg overflow-y-auto")},m(i,c){x(i,t,c),w(t,n);for(let e=0;e<l.length;e+=1)l[e].m(n,null);o=!0,a||(s=p(r=e[5].call(null,t)),a=!0)},p(e,t){if(89&t){const r=e[4];l=Ce(l,t,d,1,e,r,c,n,xe,Bd,null,jd)}},i(e){o||(oe(()=>{i||(i=ye(t,Ot,{duration:150},!0)),i.run(1)}),o=!0)},o(e){i||(i=ye(t,Ot,{duration:150},!1)),i.run(0),o=!1},d(e){e&&k(t);for(let e=0;e<l.length;e+=1)l[e].d();e&&i&&i.end(),a=!1,s()}}}function Bd(e,t){let n,r,i,o,a,s,l,c,u,d,f=t[12].name+"";function p(){return t[10](t[12])}return{key:e,first:null,c(){n=C("label"),r=C("input"),a=S(),s=C("span"),l=T(f),c=S(),$(r,"type","checkbox"),$(r,"class","form-checkbox text-indigo-500"),r.checked=i=t[0].includes(t[12].value)||t[3],r.value=o=t[12].value,$(s,"class","ml-2"),$(n,"class","flex items-center p-2 hover:bg-light-200 dark:hover:bg-dark-100 cursor-pointer"),this.first=n},m(e,t){var i;x(e,n,t),w(n,r),w(n,a),w(n,s),w(s,l),w(n,c),u||(d=A(n,"click",(i=p,function(e){return e.preventDefault(),i.call(this,e)})),u=!0)},p(e,n){t=e,25&n&&i!==(i=t[0].includes(t[12].value)||t[3])&&(r.checked=i),16&n&&o!==(o=t[12].value)&&(r.value=o),16&n&&f!==(f=t[12].name+"")&&M(l,f)},d(e){e&&k(n),u=!1,d()}}}function Fd(e){let t,n,r,i,o,a,s,l=e[2]&&Rd(e);return{c(){t=C("div"),n=C("div"),r=T(e[1]),i=S(),l&&l.c(),$(n,"class","form-select p-1.5 mt-1 bg-white dark:bg-dark-200 border border-light-200 dark:border-transparent w-full"),N(n,"inFocus",e[2]),$(t,"class","relative")},m(c,u){x(c,t,u),w(t,n),w(n,r),w(t,i),l&&l.m(t,null),o=!0,a||(s=A(n,"click",e[7]),a=!0)},p(e,[i]){(!o||2&i)&&M(r,e[1]),4&i&&N(n,"inFocus",e[2]),e[2]?l?(l.p(e,i),4&i&&me(l,1)):(l=Rd(e),l.c(),me(l,1),l.m(t,null)):l&&(he(),ve(l,1,1,()=>{l=null}),ge())},i(e){o||(me(l),o=!0)},o(e){ve(l),o=!1},d(e){e&&k(t),l&&l.d(),a=!1,s()}}}function Ud(e,t,n){let{options:r}=t,{selected:i}=t;const o=W();let a=[],s="",l=!1;const c=e=>{let t=a.indexOf(e);if(t>-1)if("all"===e)n(0,a=[]);else{a.splice(t,1);let e=a.indexOf("all");e>-1&&a.splice(e,1)}else"all"===e?n(0,a=["all"].concat(r.map(e=>e.value))):a.push(e);a.includes("all")||a.length!==r.length||a.push("all"),n(0,a),o("update",a)};q(()=>{let e=i.includes("all"),t=r.map(e=>e.value);e&&a.push("all");for(let n=0;n<t.length;n++)(e||i.includes(t[n]))&&a.push(t[n]);n(0,a)});let u,d;return e.$$set=e=>{"options"in e&&n(8,r=e.options),"selected"in e&&n(9,i=e.selected)},e.$$.update=()=>{257&e.$$.dirty&&(0===r.length?n(1,s="No boards available"):a.includes("all")&&r.length?n(1,s=`All ${r.length} board(s) selected`):1===a.length?n(1,s=r.find(e=>e.value==a[0]).name):a.length?n(1,s=a.length+" board(s) selected"):n(1,s="No boards selected")),1&e.$$.dirty&&n(3,u=a.includes("all")),256&e.$$.dirty&&n(4,d=[{name:"Select all",value:"all"}].concat(r))},[a,s,l,u,d,e=>Ht(e,(function(){n(2,l=!1)})),c,()=>{1===a.length&&"all"===a[0]||n(2,l=!l)},r,i,e=>c(e.value)]}class zd extends $e{constructor(e){super(),Oe(this,e,Ud,Fd,s,{options:8,selected:9})}}function Hd(e,t,n){const r=e.slice();return r[25]=t[n],r}function Kd(t){let n;return{c(){n=C("div"),n.textContent="No cards to display.",$(n,"class","w-96")},m(e,t){x(e,n,t)},p:e,i:e,o:e,d(e){e&&k(n)}}}function Yd(e){let t,n,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=qd(Hd(e,r,t));const o=e=>ve(i[e],1,1,()=>{i[e]=null});return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=D()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);x(e,t,r),n=!0},p(e,n){if(264195&n){let a;for(r=e[1],a=0;a<r.length;a+=1){const o=Hd(e,r,a);i[a]?(i[a].p(o,n),me(i[a],1)):(i[a]=qd(o),i[a].c(),me(i[a],1),i[a].m(t.parentNode,t))}for(he(),a=r.length;a<i.length;a+=1)o(a);ge()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)me(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)ve(i[e]);n=!1},d(e){_(i,e),e&&k(t)}}}function qd(e){let t,n,r,i,o,a;function s(...t){return e[20](e[25],...t)}return n=new un({props:{c:e[25],isFocused:e[0].selectedCardId===e[25].id,isZen:!0}}),n.$on("trackTime",e[18]),{c(){t=C("div"),Se(n.$$.fragment),r=S(),$(t,"class","card-container bg-white hover:bg-light-100-50 dark:bg-dark-100 dark:hover:bg-dark-100-50 rounded-sm w-96")},m(e,l){x(e,t,l),De(n,t,null),w(t,r),i=!0,o||(a=A(t,"click",s),o=!0)},p(t,r){e=t;const i={};2&r&&(i.c=e[25]),3&r&&(i.isFocused=e[0].selectedCardId===e[25].id),n.$set(i)},i(e){i||(me(n.$$.fragment,e),i=!0)},o(e){ve(n.$$.fragment,e),i=!1},d(e){e&&k(t),Ae(n),o=!1,a()}}}function Vd(e){let t,n,r,i,a,s,l,c,u,d,f,p,h,g,m,v,b,y,_,E,T,D,M,I,N,L,j,R,B,F,U,z,H,K,Y,q,V,W,G,X;return s=new zd({props:{options:e[7],selected:e[6].selectedBoards}}),s.$on("update",e[10]),{c(){t=C("div"),n=C("div"),r=C("div"),i=C("span"),i.textContent="Boards",a=S(),Se(s.$$.fragment),l=S(),c=C("div"),u=C("span"),u.textContent="Lists",d=S(),f=C("input"),p=S(),h=C("label"),g=C("span"),g.textContent="Due Date",m=S(),v=C("select"),b=C("option"),b.textContent="All",y=C("option"),y.textContent="Overdue",_=C("option"),_.textContent="Due in the next day",E=C("option"),E.textContent="Due in the next week",T=C("option"),T.textContent="Due in the next month",M=S(),I=C("label"),N=C("span"),N.textContent="Max cards to display",L=S(),j=C("select"),R=C("option"),R.textContent="1",F=C("option"),F.textContent="3",z=C("option"),z.textContent="5",K=C("option"),K.textContent="7",$(r,"class","block"),$(f,"class","bg-white dark:bg-dark-200 inline-block w-full focus:bg-white dark:focus:bg-dark-100 p-1.5 mt-1 rounded-sm border border-transparent focus:border-indigo-500 placeholder-light dark:placeholder-dark"),$(f,"type","text"),$(f,"placeholder","Ex. 'pending,todo' etc"),$(c,"class","block"),b.__value="all",b.value=b.__value,y.__value="overdue",y.value=y.__value,_.__value="tomorrow",_.value=_.__value,E.__value="week",E.value=E.__value,T.__value="month",T.value=T.__value,$(v,"class","form-select p-1.5 mt-1 bg-white dark:bg-dark-200 border border-light-200 dark:border-transparent w-full"),$(h,"class","block"),R.__value=B=1,R.value=R.__value,F.__value=U=3,F.value=F.__value,z.__value=H=5,z.value=z.__value,K.__value=Y=7,K.value=K.__value,$(j,"class","form-select p-1.5 mt-1 bg-white dark:bg-dark-200 border border-light-200 dark:border-transparent w-full"),$(I,"class","block"),$(n,"class","w-96 space-y-2"),$(t,"class","flex flex-col space-y-4 p-3 border-t border-indigo-500 text-light dark:text-dark my-2")},m(o,k){x(o,t,k),w(t,n),w(n,r),w(r,i),w(r,a),De(s,r,null),w(n,l),w(n,c),w(c,u),w(c,d),w(c,f),w(n,p),w(n,h),w(h,g),w(h,m),w(h,v),w(v,b),w(v,y),w(v,_),w(v,E),w(v,T),P(v,e[6].dueFilter),w(n,M),w(n,I),w(I,N),w(I,L),w(I,j),w(j,R),w(j,F),w(j,z),w(j,K),P(j,e[6].maxCards),W=!0,G||(X=[A(f,"blur",e[16]),A(f,"keyup",O(e[19])),A(v,"change",e[21]),A(j,"change",e[22])],G=!0)},p(e,t){const n={};128&t&&(n.options=e[7]),64&t&&(n.selected=e[6].selectedBoards),s.$set(n),(!W||64&t&&D!==(D=e[6].dueFilter))&&P(v,e[6].dueFilter),(!W||64&t&&q!==(q=e[6].maxCards))&&P(j,e[6].maxCards)},i(e){W||(me(s.$$.fragment,e),oe(()=>{V||(V=ye(t,Mt,{},!0)),V.run(1)}),W=!0)},o(e){ve(s.$$.fragment,e),V||(V=ye(t,Mt,{},!1)),V.run(0),W=!1},d(e){e&&k(t),Ae(s),e&&V&&V.end(),G=!1,o(X)}}}function Wd(e){let t,n,r,i;return n=new Mu({props:{isZen:!0,id:e[0].selectedCardId}}),n.$on("delete",e[13]),n.$on("close",e[12]),{c(){t=C("div"),Se(n.$$.fragment),$(t,"class","min-h-0 overflow-y-auto max-h-160 w-116")},m(e,r){x(e,t,r),De(n,t,null),i=!0},p(e,t){const r={};1&t&&(r.id=e[0].selectedCardId),n.$set(r)},i(e){i||(me(n.$$.fragment,e),oe(()=>{r||(r=ye(t,$t,{x:-100},!0)),r.run(1)}),i=!0)},o(e){ve(n.$$.fragment,e),r||(r=ye(t,$t,{x:-100},!1)),r.run(0),i=!1},d(e){e&&k(t),Ae(n),e&&r&&r.end()}}}function Gd(e){let t,n,r,i,a,s,l,c,u,d,f,p,h,g,m,v,b,y,_;n=new oc({props:{isConfirmModalOpen:e[2],modalMessage:e[3],onConfirm:e[4]}}),n.$on("close",e[9]);const E=[Yd,Kd],T=[];function D(e,t){return e[1].length?0:1}d=D(e),f=T[d]=E[d](e);let O=e[5]&&Vd(e),M=e[0].selectedCardId&&Wd(e);return{c(){t=S(),Se(n.$$.fragment),r=S(),i=C("div"),a=C("div"),s=C("div"),l=C("div"),c=C("div"),u=C("div"),f.c(),p=S(),h=C("div"),g=C("button"),g.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg> \n            <span class="ml-2">Filter</span>',m=S(),O&&O.c(),v=S(),M&&M.c(),document.title="Zen Mode | nimbo",$(u,"class","overflow-y-auto flex flex-col space-y-2 h-auto"),$(c,"class","flex flex-col p-3 rounded bg-light-200 dark:bg-dark-200"),$(g,"class","flex items-center py-1 px-2 rounded text-sm border border-transparent text-indigo-500"),$(h,"class","flex justify-end text-2xl my-1"),$(s,"class","flex items-center space-x-4 m-auto"),$(a,"class","flex flex-col p-3 h-full max-h-full"),$(i,"class","flex flex-col min-h-screen h-full justify-center max-h-full bg-light-300 dark:bg-dark-300 text-light dark:text-dark")},m(o,f){x(o,t,f),De(n,o,f),x(o,r,f),x(o,i,f),w(i,a),w(a,s),w(s,l),w(l,c),w(c,u),T[d].m(u,null),w(l,p),w(l,h),w(h,g),w(l,m),O&&O.m(l,null),w(s,v),M&&M.m(s,null),b=!0,y||(_=[A(window,"keyup",e[15]),A(g,"click",e[14])],y=!0)},p(e,[t]){const r={};4&t&&(r.isConfirmModalOpen=e[2]),8&t&&(r.modalMessage=e[3]),16&t&&(r.onConfirm=e[4]),n.$set(r);let i=d;d=D(e),d===i?T[d].p(e,t):(he(),ve(T[i],1,1,()=>{T[i]=null}),ge(),f=T[d],f?f.p(e,t):(f=T[d]=E[d](e),f.c()),me(f,1),f.m(u,null)),e[5]?O?(O.p(e,t),32&t&&me(O,1)):(O=Vd(e),O.c(),me(O,1),O.m(l,null)):O&&(he(),ve(O,1,1,()=>{O=null}),ge()),e[0].selectedCardId?M?(M.p(e,t),1&t&&me(M,1)):(M=Wd(e),M.c(),me(M,1),M.m(s,null)):M&&(he(),ve(M,1,1,()=>{M=null}),ge())},i(e){b||(me(n.$$.fragment,e),me(f),me(O),me(M),b=!0)},o(e){ve(n.$$.fragment,e),ve(f),ve(O),ve(M),b=!1},d(e){e&&k(t),Ae(n,e),e&&k(r),e&&k(i),T[d].d(),O&&O.d(),M&&M.d(),y=!1,o(_)}}}function Xd(e,t,n){let r;var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const o=G("nimbo");c(e,o,e=>n(0,r=e));let a,s=[],l=!1,u=()=>{},d=!1;const f=e=>{r.setSelectedCard(e),o.set(r)},p=(e,t)=>i(void 0,void 0,void 0,(function*(){n(6,h[e]=isNaN(parseInt(t,10))?t:Number(t),h),yield r.updateSettings(h),o.set(r)}));let h,g;return e.$$.update=()=>{1&e.$$.dirty&&r&&i(void 0,void 0,void 0,(function*(){n(1,s=yield r.zenCards())})),1&e.$$.dirty&&n(6,h=r.settings),1&e.$$.dirty&&n(7,g=r.boards.filter(e=>!1===e.isArchived).map(e=>({name:e.title,value:e.id})))},[r,s,l,a,u,d,h,g,o,()=>{n(2,l=!1)},e=>i(void 0,void 0,void 0,(function*(){n(6,h.selectedBoards=e.detail,h),yield r.updateSettings(h),o.set(r)})),f,()=>{r.setSelectedCard(null),o.set(r)},e=>{n(3,a=e.detail.message),n(2,l=!0),n(4,u=e.detail.onConfirm)},()=>{n(5,d=!d)},e=>{e.target.closest(".flatpickr-calendar")||"h"===e.key&&(r.setSelectedCard(null),Ue("/"))},e=>i(void 0,void 0,void 0,(function*(){n(6,h.listFilter=e.target.value,h),yield r.updateSettings(h),o.set(r)})),p,e=>i(void 0,void 0,void 0,(function*(){yield r.updateCard(e.detail,"log"),o.set(r)})),function(t){X(e,t)},(e,t)=>f(e.id),e=>p("dueFilter",e.target.value),e=>p("maxCards",e.target.value)]}class Jd extends $e{constructor(e){super(),Oe(this,e,Xd,Gd,s,{})}}function Zd(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Qd(e){let t,n,r;return n=new qe({props:{routes:e[2]}}),{c(){t=C("div"),Se(n.$$.fragment),N(t,"dark","dark"===e[0].settings.theme)},m(e,i){x(e,t,i),De(n,t,null),r=!0},p(e,n){1&n&&N(t,"dark","dark"===e[0].settings.theme)},i(e){r||(me(n.$$.fragment,e),r=!0)},o(e){ve(n.$$.fragment,e),r=!1},d(e){e&&k(t),Ae(n)}}}function ef(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function tf(e){let t,n,r,i,o;t=new kt({});let a={ctx:e,current:null,token:null,hasCatch:!1,pending:ef,then:Qd,catch:Zd,value:6,blocks:[,,,]};return function(e,t){const n=t.token={};function r(e,r,i,o){if(t.token!==n)return;t.resolved=o;let a=t.ctx;void 0!==i&&(a=a.slice(),a[i]=o);const s=e&&(t.current=e)(a);let l=!1;t.block&&(t.blocks?t.blocks.forEach((e,n)=>{n!==r&&e&&(he(),ve(e,1,1,()=>{t.blocks[n]=null}),ge())}):t.block.d(1),s.c(),me(s,1),s.m(t.mount(),t.anchor),l=!0),t.block=s,t.blocks&&(t.blocks[r]=s),l&&le()}if((i=e)&&"object"==typeof i&&"function"==typeof i.then){const n=Y();if(e.then(e=>{K(n),r(t.then,1,t.value,e),K(null)},e=>{if(K(n),r(t.catch,2,t.error,e),K(null),!t.hasCatch)throw e}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}var i}(i=e[1],a),{c(){Se(t.$$.fragment),n=S(),r=D(),a.block.c()},m(e,i){De(t,e,i),x(e,n,i),x(e,r,i),a.block.m(e,a.anchor=i),a.mount=()=>r.parentNode,a.anchor=r,o=!0},p(t,[n]){{const r=(e=t).slice();r[6]=a.resolved,a.block.p(r,n)}},i(e){o||(me(t.$$.fragment,e),me(a.block),o=!0)},o(e){ve(t.$$.fragment,e);for(let e=0;e<3;e+=1){ve(a.blocks[e])}o=!1},d(e){Ae(t,e),e&&k(n),e&&k(r),a.block.d(e),a.token=null,a=null}}}function nf(e,t,n){let r;c(e,Ia,e=>n(0,r=e));var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const o=new vt("nimbo");let a=0;r.setChannel(o),o.onmessage=e=>i(void 0,void 0,void 0,(function*(){clearTimeout(a),a=setTimeout(()=>i(void 0,void 0,void 0,(function*(){yield r.refresh(),Ia.set(r)})),250)}));let s=r.init();var l,u;l="nimbo",u=Ia,Y().$$.context.set(l,u);return[r,s,{"/c/:cardId":pd,"/b/:boardId":ld,"/zen":Jd,"/":Ld}]}return new class extends $e{constructor(e){super(),Oe(this,e,nf,tf,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
